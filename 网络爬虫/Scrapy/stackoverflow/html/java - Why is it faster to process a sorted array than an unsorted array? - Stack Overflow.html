<!DOCTYPE html>
<html itemscope="" itemtype="http://schema.org/QAPage"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

<title>java - Why is it faster to process a sorted array than an unsorted array? - Stack Overflow</title>
    <link rel="shortcut icon" href="https://cdn.sstatic.net/Sites/stackoverflow/img/favicon.ico?v=4f32ecc8f43d">
    <link rel="apple-touch-icon image_src" href="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/apple-touch-icon.png">
    <link rel="search" type="application/opensearchdescription+xml" title="Stack Overflow" href="https://stackoverflow.com/opensearch.xml">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary">
        <meta name="twitter:domain" content="stackoverflow.com">

    <meta property="og:image" itemprop="image primaryImageOfPage" content="https://cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon@2.png?v=73d79a89bded">
    <meta name="twitter:title" property="og:title" itemprop="title name" content="Why is it faster to process a sorted array than an unsorted array?">
    <meta name="twitter:description" property="og:description" itemprop="description" content="Here is a piece of C++ code that seems very peculiar. For some strange reason, sorting the data miraculously makes the code almost six times faster.

#include &amp;lt;algorithm&amp;gt;
#include &amp;lt;ctime&amp;g...">
    <meta property="og:url" content="https://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array">
    <link rel="canonical" href="https://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array">

    
    
    <script src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/ads"></script><script type="text/javascript" async="" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/ados_002.js"></script><script async="" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/quant.js"></script><script async="" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/beacon.js"></script><script async="" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/analytics.js"></script><script type="text/javascript" async="" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/ados.js"></script><script src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/jquery.js"></script>
    <script src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/stub.js"></script>
    <link rel="stylesheet" type="text/css" href="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/all.css">

            <link rel="alternate" type="application/atom+xml" title="Feed for question 'Why is it faster to process a sorted array than an unsorted array?'" href="https://stackoverflow.com/feeds/question/11227809">
            <meta name="twitter:app:country" content="US">
            <meta name="twitter:app:name:iphone" content="Stack Exchange iOS">
            <meta name="twitter:app:id:iphone" content="871299723">
            <meta name="twitter:app:url:iphone" content="se-zaphod://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array">
            <meta name="twitter:app:name:ipad" content="Stack Exchange iOS">
            <meta name="twitter:app:id:ipad" content="871299723">
            <meta name="twitter:app:url:ipad" content="se-zaphod://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array">
            <meta name="twitter:app:name:googleplay" content="Stack Exchange Android">
            <meta name="twitter:app:url:googleplay" content="http://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array">
            <meta name="twitter:app:id:googleplay" content="com.stackexchange.marvin">
        <script>
        
            StackExchange.ready(function () {
                                    
                    StackExchange.using("snippets", function () {
                        StackExchange.snippets.initSnippetRenderer();
                    });
                    

                StackExchange.using("postValidation", function () {
                    StackExchange.postValidation.initOnBlurAndSubmit($('#post-form'), 2, 'answer');
                });

                
                StackExchange.question.init({showAnswerHelp:true,totalCommentCount:0,shownCommentCount:0,highlightColor:'#F4A83D',backgroundColor:'#FFF',questionId:11227809});

                styleCode();

                    StackExchange.realtime.subscribeToQuestion('1', '11227809');
                                                                    StackExchange.using("gps", function () { StackExchange.gps.trackOutboundClicks('#content', '.post-text', true); });

            });
        </script>


    <script>
        StackExchange.init({"locale":"en","stackAuthUrl":"https://stackauth.com","networkMetaHostname":"meta.stackexchange.com","serverTime":1503028062,"routeName":"Questions/Show","site":{"name":"Stack Overflow","description":"Q&A for professional and enthusiast programmers","isNoticesTabEnabled":true,"recaptchaPublicKey":"6LdchgIAAAAAAJwGpIzRQSOFaO0pU6s44Xt8aTwc","recaptchaAudioLang":"en","enableNewTagCreationWarning":true,"insertSpaceAfterNameTabCompletion":false,"id":1,"enableInsertDocLinkDialog":true,"childUrl":"https://meta.stackoverflow.com","enableSocialMediaInSharePopup":true,"protocol":"https"},"user":{"fkey":"5b6bcfe5e142095c593f2924970e1f55","rep":0,"isAnonymous":true,"isAnonymousNetworkWide":true,"canSeeNewHeaderDesign":true,"ab":{"inline_signup_hero":{"v":"b","g":1}}},"events":{"postType":{"question":1},"postEditionSection":{"title":1,"body":2,"tags":3}},"story":{"minCompleteBodyLength":75,"likedTagsMaxLength":300,"dislikedTagsMaxLength":300}}, {"site":{"allowImageUploads":true,"enableUserHovercards":true,"styleCode":true,"enableNewLinkInsertDialog":true,"enableImgurHttps":true,"forceHttpsImages":true},"comments":{},"userProfile":{"openGraphAPIKey":"58740831ad23540e00c58987"},"tags":{},"accounts":{"currentPasswordRequiredForChangingStackIdPassword":true},"flags":{"allowRetractingFlags":true},"snippets":{"snippetsEnabled":true,"renderDomain":"stacksnippets.net"},"markdown":{"asteriskIntraWordEmphasis":true},"monitoring":{"clientTimingsAbsoluteTimeout":30000,"clientTimingsDebounceTimeout":1000}});
        StackExchange.using.setCacheBreakers({"js/prettify-full.en.js":"cc04c3e5d4a4","js/moderator.en.js":"9c29f761ceb3","js/full-anon.en.js":"9ea03d861539","js/full.en.js":"2a86e709a571","js/wmd.en.js":"b193b2a15167","js/third-party/jquery.autocomplete.min.js":"d3b8fa7fdf74","js/third-party/jquery.autocomplete.min.en.js":"","js/mobile.en.js":"ffa470dc1700","js/help.en.js":"118cb359bcc6","js/tageditor.en.js":"235a2acc7d79","js/tageditornew.en.js":"51325bc7f5f6","js/inline-tag-editing.en.js":"7581a98341e4","js/revisions.en.js":"cf90cfea0ccf","js/review.en.js":"d36a51d45158","js/tagsuggestions.en.js":"7dfec0d2a2d7","js/post-validation.en.js":"ec3d81e3c366","js/explore-qlist.en.js":"e71f14781288","js/events.en.js":"07ecd77eb09a","js/keyboard-shortcuts.en.js":"3e21e1fc7c3e","js/external-editor.en.js":"3e5baf662544","js/adops.en.js":"9a6a7812a212","js/external-editor.en.js":"3e5baf662544","js/snippet-javascript.en.js":"6396a6cc51fa","js/snippet-javascript-codemirror.en.js":"00be64f533e2"});
        StackExchange.using("gps", function() {
             StackExchange.gps.init(true);
        });
    </script>

        <script>
            StackExchange.ready(function () {
                $('#nav-tour').click(function () {
                    StackExchange.using("gps", function() {
                        StackExchange.gps.track("aboutpage.click", { aboutclick_location: "headermain" }, true);
                    });
                });
            });
        </script>
    <noscript id="noscript-css"><style type="text/css">body,.so-header{margin-top:1.9em}</style></noscript>
<script async="" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/full-anon.js"></script><script async="" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/snippet-javascript.js"></script><script async="" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/post-validation.js"></script><script async="" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/prettify-full.js"></script><script type="text/javascript" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/adFeedback.js"></script><link rel="stylesheet" href="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/adFeedback.css"><script src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/pubads_impl_142.js" async=""></script><link rel="prefetch" href="https://tpc.googlesyndication.com/safeframe/1-0-10/html/container.html" class="coexmawlguhazjiueiep"><link rel="stylesheet" href="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/jobs-multi.css" type="text/css"><style type="text/css" id="firepath-matching-node-style">.firepath-matching-node {	outline: 2px dashed #00F;}</style></head>
<body class="question-page new-topbar">
            <script>(function () { var old = $.fn.contents; $.fn.contents = function () { try { return old.apply(this, arguments); } catch (e) { return $([]); } } })()</script>
        

    <div id="notify-container"></div>
    <div id="custom-header"></div>


<header class="so-header js-so-header _fixed _scrolling">
    <div class="-container">
        <div class="-main">            
            <a href="https://stackoverflow.com/" class="-logo js-gps-track " data-gps-track="top_nav.click({is_current:false, location:2, destination:8})">

                <span class="-img">Stack Overflow</span>
            </a>

            <nav class="navigation" role="navigation" aria-label="site navigation">
                <ol class="-list">
                        <li class="-item _current">
        <a id="nav-questions" href="https://stackoverflow.com/questions" class="-link js-gps-track" data-gps-track="top_nav.click({is_current:true, location:2, destination:1})">Questions</a>
    </li>

    <li class="-item">
        <a id="nav-jobs" href="https://stackoverflow.com/jobs?med=site-ui&amp;ref=jobs-tab" class="-link js-gps-track" data-gps-track="top_nav.click({is_current:false, location:2, destination:6})">Developer Jobs</a>
    </li>
                        <li class="-item">
        <a id="nav-docs" href="https://stackoverflow.com/documentation" class="-link js-gps-track" data-gps-track="top_nav.click({is_current:false, location:2, destination:7})">Documentation <small class="beta-badge">beta</small></a>
    </li>
                        <li class="-item">
        <a id="nav-tags" href="https://stackoverflow.com/tags" class="-link js-gps-track" data-gps-track="top_nav.click({is_current:false, location:2, destination:2})">Tags</a>
    </li>

                        <li class="-item">
        <a id="nav-users" href="https://stackoverflow.com/users" class="-link js-gps-track" data-gps-track="top_nav.click({is_current:false, location:2, destination:3})">Users</a>
    </li>

                </ol>
            </nav>

                <form id="search" action="/search" method="get" class="searchbar" autocomplete="off" role="search">
                    <svg role="icon" class="svg-icon iconSearch" width="18" height="18" viewBox="0 0 18 18"><path d="M12.86 11.32L18 16.5 16.5 18l-5.18-5.14v-.35a7 7 0 1 1 1.19-1.19h.35zM7 12A5 5 0 1 0 7 2a5 5 0 0 0 0 10z"></path></svg>
                    <input name="q" placeholder="Search..." tabindex="1" autocomplete="off" maxlength="240" class="f-input js-search-field" type="text">
                    <button type="submit" class="btn js-search-submit">
                        <svg role="icon" class="svg-icon iconSearch" width="18" height="18" viewBox="0 0 18 18"><path d="M12.86 11.32L18 16.5 16.5 18l-5.18-5.14v-.35a7 7 0 1 1 1.19-1.19h.35zM7 12A5 5 0 1 0 7 2a5 5 0 0 0 0 10z"></path></svg>
                    </button>
                </form>

        </div>
        


    

<div class="-actions">
    <nav class="secondary-nav">
        <div class="-dialog-container js-topbar-dialog-corral">


    <div class="topbar-dialog siteSwitcher-dialog dno">
        <div class="header">
            <h3><a href="https://stackoverflow.com/">current community</a>
            </h3>
        </div>
        <div class="modal-content current-site-container">
            <ul class="current-site">
                    <li>
                            <div class="related-links">
            <a href="https://stackoverflow.com/help" class="js-gps-track" data-gps-track="site_switcher.click({ item_type:14 })">help</a>
                    <a href="https://chat.stackoverflow.com/" class="js-gps-track" data-gps-track="site_switcher.click({ item_type:6 })">chat</a>
            </div>

    <a href="https://stackoverflow.com/" class="current-site-link site-link js-gps-track" data-id="1" data-gps-track="site_switcher.click({ item_type:3 })">
        <div class="site-icon favicon favicon-stackoverflow" title="Stack Overflow"></div>
        Stack Overflow
    </a>

                    </li>
                    <li class="related-site">
                            <div class="L-shaped-icon-container">
        <span class="L-shaped-icon"></span>
    </div>

                        
    <a href="https://meta.stackoverflow.com/" class="site-link js-gps-track" data-id="552" data-gps-track="site.switch({ target_site:552, item_type:3 }),site_switcher.click({ item_type:4 })">
        <div class="site-icon favicon favicon-stackoverflowmeta" title="Meta Stack Overflow"></div>
        Meta Stack Overflow
    </a>

                    </li>
            </ul>
        </div>

        <div class="header" id="your-communities-header">
            <h3>
your communities            </h3>

        </div>
        <div class="modal-content" id="your-communities-section">

                <div class="call-to-login">
<a href="https://stackoverflow.com/users/signup?ssrc=site_switcher&amp;returnurl=%2fusers%2fstory%2fcurrent&amp;amp;utm_source=stackoverflow.com&amp;amp;utm_medium=dev-story&amp;amp;utm_campaign=signup-redirect" class="login-link js-gps-track" data-gps-track="site_switcher.click({ item_type:10 })">Sign up</a> or <a href="https://stackoverflow.com/users/login?ssrc=site_switcher&amp;returnurl=https%3a%2f%2fstackoverflow.com%2fquestions%2f11227809%2fwhy-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array" class="login-link js-gps-track" data-gps-track="site_switcher.click({ item_type:11 })">log in</a> to customize your list.
                </div>
        </div>

        <div class="header">
            <h3><a href="https://stackexchange.com/sites">more stack exchange communities</a>
            </h3>
            <a href="https://stackoverflow.blog/" class="fr">company blog</a>
        </div>
        <div class="modal-content">
                <div class="child-content"></div>
        </div>        
    </div>
                <div class="topbar-dialog help-dialog js-help-dialog dno">
        <div class="modal-content">
            <ul>
                                    <li>
                        <a href="https://stackoverflow.com/tour" class="js-gps-track" data-gps-track="help_popup.click({ item_type:1 })">
                            Tour
                            <span class="item-summary">
                                Start here for a quick overview of the site
                            </span>
                        </a>
                    </li>
                <li>
                    <a href="https://stackoverflow.com/help" class="js-gps-track" data-gps-track="help_popup.click({ item_type:4 })">
                        Help Center
                        <span class="item-summary">
                            Detailed answers to any questions you might have
                        </span>
                    </a>
                </li>
                        <li>
                            <a href="https://meta.stackoverflow.com/" class="js-gps-track" data-gps-track="help_popup.click({ item_type:2 })">
                                Meta
                                <span class="item-summary">
                                    Discuss the workings and policies of this site
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://stackoverflow.com/company/about" class="js-gps-track" data-gps-track="help_popup.click({ item_type:6 })">
                                About Us
                                <span class="item-summary">
                                    Learn more about Stack Overflow the company
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.stackoverflowbusiness.com/?ref=topbar_help" class="js-gps-track" data-gps-track="help_popup.click({ item_type:7 })">
                                Business
                                <span class="item-summary">
                                    Learn more about hiring developers or posting ads with us
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>

        </div>
        <ol class="-list">


    <li class="-item"><a href="#" class="-link js-help-button" title="Help Center and other resources">
        <svg role="icon" class="svg-icon iconHelp" width="18" height="18" viewBox="0 0 18 18"><path d="M9 1a8 8 0 1 0 0 16A8 8 0 0 0 9 1zm.81 12.13c-.02.71-.55 1.15-1.24 1.13-.66-.02-1.17-.49-1.15-1.2.02-.72.56-1.18 1.22-1.16.7.03 1.2.51 1.17 1.23zM11.77 8a5.8 5.8 0 0 1-1.02.91l-.53.37c-.26.2-.42.43-.5.69a4 4 0 0 0-.09.75c0 .05-.03.16-.18.16H7.88c-.16 0-.18-.1-.18-.15.03-.66.12-1.21.4-1.66a5.29 5.29 0 0 1 1.43-1.22c.16-.12.28-.25.38-.39a1.34 1.34 0 0 0 .02-1.71c-.24-.31-.51-.46-1.03-.46-.51 0-.8.26-1.02.6-.21.33-.18.73-.18 1.1H5.75c0-1.38.35-2.25 1.1-2.76.52-.35 1.17-.5 1.93-.5 1 0 1.79.18 2.49.71.64.5.98 1.18.98 2.12 0 .57-.2 1.05-.48 1.44z"></path></svg>
    </a></li>
                <li class="-item">
        <a href="https://stackexchange.com/" class="-link js-site-switcher-button js-gps-track" data-gps-track="site_switcher.show" title="A list of all 170 Stack Exchange sites">
            <svg role="icon" class="svg-icon iconStackExchange" width="18" height="18" viewBox="0 0 18 18"><path d="M1 13c0 1.1.9 2 2 2h8v3l3-3h1a2 2 0 0 0 2-2v-2H1v2zM15 1H3a2 2 0 0 0-2 2v2h16V3a2 2 0 0 0-2-2zM1 6h16v4H1V6z"></path></svg>
        </a>
    </li>


        </ol>
    </nav>
        <div class="-ctas">
                <a href="https://stackoverflow.com/users/login?ssrc=head&amp;returnurl=https%3a%2f%2fstackoverflow.com%2fquestions%2f11227809%2fwhy-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array" class="login-link btn-clear" rel="nofollow">Log In</a>
                    <a href="https://stackoverflow.com/users/signup?ssrc=head&amp;returnurl=%2fusers%2fstory%2fcurrent&amp;utm_source=stackoverflow.com&amp;utm_medium=dev-story&amp;utm_campaign=signup-redirect" class="login-link btn" rel="nofollow">Sign Up</a>

        </div>
</div>
    </div>
</header>

    <script>
        StackExchange.ready(function () { StackExchange.topbar.init(); });
            StackExchange.scrollPadding.setPaddingTop(60, 10);     </script>

    <div class="container  ">
        


        <div id="content" class="snippet-hidden">



            

<div itemscope="" itemtype="http://schema.org/Question">
    <link itemprop="image" href="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/apple-touch-icon.png">


<div id="herobox" class="alternate hero-container">
    <div class="test"></div>
        <div id="close">
            <a title="click to minimize"><span>x</span> Dismiss</a>
        </div>
    <div class="content">
        <b>Join the Stack Overflow Community</b>
        <div class="separator"></div>
        <div class="blurb">
            Stack Overflow is a community of 7.6 million programmers, just like you, helping each other.
                <br>
Join them; it only takes a minute:                <br>
        </div>
        <a href="https://stackoverflow.com/users/signup?ssrc=hero&amp;returnurl=%2fusers%2fstory%2fcurrent&amp;amp;utm_source=stackoverflow.com&amp;amp;utm_medium=dev-story&amp;amp;utm_campaign=signup-redirect" id="tell-me-more" class="button">Sign up</a>
    </div>
</div>
<script>
    StackExchange.ready(function () {

        var location = 0;
        if ($("body").hasClass("questions-page")) {
            location = 1;
        } else if ($("body").hasClass("question-page")) {
            location = 1;
        } else if ($("body").hasClass("faq-page")) {
            location = 5;
        } else if ($("body").hasClass("home-page")) {
            location = 3;
        }
        
        $('#tell-me-more').click(function () {
            StackExchange.using("gps", function () {
                StackExchange.gps.track("hero.action", { hero_action_type: 'cta', location: location }, true);
            });
        });
        
        $('.hero-container #close').click(function () {
            StackExchange.using("gps", function () {
                StackExchange.gps.track("hero.action", { hero_action_type: "minimize", location: location }, true);
            });
            
            $.cookie("hero", "mini", { path: "/", expires: 365 });
            $.ajax({
                url: "/hero-mini",
                success: function (data) {
                    $(".hero-container").fadeOut("fast", function () {
                        $(".hero-container").replaceWith(data);
                        $("#herobox-mini").fadeIn("fast");
                    });
                }
            });
            return false;
        });
    });

</script>    <div class="inner-content">
        <div id="question-header">
                <h1 itemprop="name"><a href="https://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array" class="question-hyperlink">Why is it faster to process a sorted array than an unsorted array?</a></h1>

            
<div class="aside-cta" role="navigation" aria-label="ask new question">
    <a href="https://stackoverflow.com/questions/ask" class="btn-outlined">Ask Question</a>
</div>
        </div>
            <div id="mainbar" role="main" aria-label="question and answers">

            

<div class="question" data-questionid="11227809" id="question">

    <script>
                var ados = ados || {}; ados.run = ados.run || [];
                ados.run.push(function () { ados_add_placement(22,8277,"adzerk1320001963",4).setZone(43); });
            </script>
            <div class="everyonelovesstackoverflow adzerk-vote" id="adzerk1320001963"><a href="https://engine.adzerk.net/r?e=eyJhdiI6NDE0LCJhdCI6NCwiYnQiOjAsImNtIjo0NzE0OTMsImNoIjoxMTc4LCJjayI6e30sImNyIjoxODUzNTU4LCJkaSI6ImMzNTcxYjViNzA3YzRmNGJiNmY5MmIxNjg3YWMyNDE0IiwiZG0iOjEsImZjIjoyMjIzNDk1LCJmbCI6MjE0MjMxMiwiaXAiOiIxMTIuMjI0LjEuNzgiLCJrdyI6ImphdmEsYysrLHBlcmZvcm1hbmNlLG9wdGltaXphdGlvbixicmFuY2gtcHJlZGljdGlvbiIsIm53IjoyMiwicGMiOjAsImVjIjowLCJwciI6MTYwNCwicnQiOjEsInJmIjoiaHR0cDovL2xvY2FsaG9zdDo2MzM0Mi9zdGFja292ZXJmbG93L2h0bWwvSGlnaGVzdCBWb3RlZCBRdWVzdGlvbnMgLSBTdGFjayBPdmVyZmxvdy5odG1sP19panQ9NWNxOWVpbDJmNWpoYXRtcXNnMGRzZHFsMnAiLCJzYSI6IjMiLCJzYiI6ImktMDY2NjYyNjdjMDIwMGQ1ODAiLCJzcCI6MzcyOCwic3QiOjgyNzcsInVrIjoidWUxLTJlMmExMjI2OTQ5YTRhODNiNWVmMTY4NjdiYzM3N2U1Iiwiem4iOjQzLCJ0cyI6MTUwMzAyODA2NTYzNSwiYmYiOnRydWUsInBuIjoiYWR6ZXJrMTMyMDAwMTk2MyIsInVyIjoiaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2pvYnM_dXRtX3NvdXJjZT13ZWJzaXRlJnV0bV9tZWRpdW09YmFubmVyJnV0bV9jb250ZW50PWxlYWRlcmJvYXJkXzYmdXRtX2NhbXBhaWduPWhvdXNlX2Fkc19ob3VzZV9hZHNfUk9TX1NPIn0&amp;s=E6spZavzb_SaOqUTsIjILk3wgwc" rel="nofollow" target="_blank" title=""><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/26fa7bbd485048c7bdcaf5304f04a149.png" title="" alt="" class="coexmawlguhazjiueiep" border="0" width="728" height="90"></a><div class="adzerk-vote-controls" style="display:none;"><div class="adzerk-vote-option adzerk-vote-up"><div class="adzerk-vote-icon"></div></div><div class="adzerk-vote-option adzerk-vote-down"><div class="adzerk-vote-icon"></div></div></div><div class="adzerk-vote-survey" style="display:none;"><form><span>No problem. We won't show you that ad again. Why didn't you like it?</span><ul><li><label><input value="12" name="downvoteReason" type="radio">Uninteresting</label></li><li><label><input value="13" name="downvoteReason" type="radio">Misleading</label></li><li><label><input value="14" name="downvoteReason" type="radio">Offensive</label></li><li><label><input value="15" name="downvoteReason" type="radio">Repetitive</label></li><li><label><input value="16" name="downvoteReason" type="radio">Other</label></li></ul><a href="#" class="adzerk-vote-cancel">Oops! I didn't mean to do this.</a></form></div><img style="position: absolute; display: none;" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/i_002.gif" class="coexmawlguhazjiueiep" border="0" width="0px" height="0px"></div>
            <div id="dfp-tlb" class="dfpad"><div id="google_ads_iframe_/248424177/stackoverflow.com/lb/question-pages_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/248424177/stackoverflow.com/lb/question-pages_0" title="3rd party ad content" name="google_ads_iframe_/248424177/stackoverflow.com/lb/question-pages_0" scrolling="no" marginwidth="0" marginheight="0" style="border: 0px none; vertical-align: bottom;" srcdoc="" width="728" height="90" frameborder="0"></iframe></div></div>    <table>
        <tbody><tr>
            <td class="votecell">
                

<div class="vote">
        <input name="_id_" value="11227809" type="hidden">
        <a class="vote-up-off" title="This question shows research effort; it is useful and clear">up vote</a>
        <span itemprop="upvoteCount" class="vote-count-post high-scored-post">18878</span>
        <a class="vote-down-off" title="This question does not show any research effort; it is unclear or not useful">down vote</a>

        <a class="star-off" href="#">favorite</a>
        <div class="favoritecount"><b>8858</b></div>


</div>

            </td>
            
<td class="postcell">
<div>
    <div class="post-text" itemprop="text">

<p>Here is a piece of C++ code that seems very peculiar. For some 
strange reason, sorting the data miraculously makes the code almost six 
times faster.</p>

<pre class="lang-cpp prettyprint prettyprinted" style=""><code><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;algorithm&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;ctime&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;iostream&gt;</span><span class="pln">

</span><span class="typ">int</span><span class="pln"> main</span><span class="pun">()</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="com">// Generate data</span><span class="pln">
    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">unsigned</span><span class="pln"> arraySize </span><span class="pun">=</span><span class="pln"> </span><span class="lit">32768</span><span class="pun">;</span><span class="pln">
    </span><span class="typ">int</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">arraySize</span><span class="pun">];</span><span class="pln">

    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> c </span><span class="pun">&lt;</span><span class="pln"> arraySize</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">c</span><span class="pun">)</span><span class="pln">
        data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> std</span><span class="pun">::</span><span class="pln">rand</span><span class="pun">()</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> </span><span class="lit">256</span><span class="pun">;</span><span class="pln">

    </span><span class="com">// !!! With this, the next loop runs faster</span><span class="pln">
    std</span><span class="pun">::</span><span class="pln">sort</span><span class="pun">(</span><span class="pln">data</span><span class="pun">,</span><span class="pln"> data </span><span class="pun">+</span><span class="pln"> arraySize</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// Test</span><span class="pln">
    </span><span class="typ">clock_t</span><span class="pln"> start </span><span class="pun">=</span><span class="pln"> clock</span><span class="pun">();</span><span class="pln">
    </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> sum </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">100000</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">{</span><span class="pln">
        </span><span class="com">// Primary loop</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> c </span><span class="pun">&lt;</span><span class="pln"> arraySize</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">c</span><span class="pun">)</span><span class="pln">
        </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">128</span><span class="pun">)</span><span class="pln">
                sum </span><span class="pun">+=</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">];</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">double</span><span class="pln"> elapsedTime </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;double&gt;</span><span class="pun">(</span><span class="pln">clock</span><span class="pun">()</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> start</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> CLOCKS_PER_SEC</span><span class="pun">;</span><span class="pln">

    std</span><span class="pun">::</span><span class="pln">cout </span><span class="pun">&lt;&lt;</span><span class="pln"> elapsedTime </span><span class="pun">&lt;&lt;</span><span class="pln"> std</span><span class="pun">::</span><span class="pln">endl</span><span class="pun">;</span><span class="pln">
    std</span><span class="pun">::</span><span class="pln">cout </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">"sum = "</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> sum </span><span class="pun">&lt;&lt;</span><span class="pln"> std</span><span class="pun">::</span><span class="pln">endl</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre>

<ul>
<li>Without <code>std::sort(data, data + arraySize);</code>, the code runs in 11.54 seconds.</li>
<li>With the sorted data, the code runs in 1.93 seconds.</li>
</ul>

<p>Initially, I thought this might be just a language or compiler anomaly. So I tried it in Java.</p>

<pre class="lang-java prettyprint prettyprinted" style=""><code><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Arrays</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Random</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Main</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">{</span><span class="pln">
        </span><span class="com">// Generate data</span><span class="pln">
        </span><span class="kwd">int</span><span class="pln"> arraySize </span><span class="pun">=</span><span class="pln"> </span><span class="lit">32768</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">int</span><span class="pln"> data</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">[</span><span class="pln">arraySize</span><span class="pun">];</span><span class="pln">

        </span><span class="typ">Random</span><span class="pln"> rnd </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Random</span><span class="pun">(</span><span class="lit">0</span><span class="pun">);</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> c </span><span class="pun">&lt;</span><span class="pln"> arraySize</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">c</span><span class="pun">)</span><span class="pln">
            data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> rnd</span><span class="pun">.</span><span class="pln">nextInt</span><span class="pun">()</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> </span><span class="lit">256</span><span class="pun">;</span><span class="pln">

        </span><span class="com">// !!! With this, the next loop runs faster</span><span class="pln">
        </span><span class="typ">Arrays</span><span class="pun">.</span><span class="pln">sort</span><span class="pun">(</span><span class="pln">data</span><span class="pun">);</span><span class="pln">

        </span><span class="com">// Test</span><span class="pln">
        </span><span class="kwd">long</span><span class="pln"> start </span><span class="pun">=</span><span class="pln"> </span><span class="typ">System</span><span class="pun">.</span><span class="pln">nanoTime</span><span class="pun">();</span><span class="pln">
        </span><span class="kwd">long</span><span class="pln"> sum </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">

        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">100000</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln">
        </span><span class="pun">{</span><span class="pln">
            </span><span class="com">// Primary loop</span><span class="pln">
            </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> c </span><span class="pun">&lt;</span><span class="pln"> arraySize</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">c</span><span class="pun">)</span><span class="pln">
            </span><span class="pun">{</span><span class="pln">
                </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">128</span><span class="pun">)</span><span class="pln">
                    sum </span><span class="pun">+=</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">];</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">((</span><span class="typ">System</span><span class="pun">.</span><span class="pln">nanoTime</span><span class="pun">()</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> start</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="lit">1000000000.0</span><span class="pun">);</span><span class="pln">
        </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"sum = "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> sum</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>

<p>With a somewhat similar but less extreme result.</p>

<hr>

<p>My first thought was that sorting brings the data into the cache, but
 then I thought how silly that is because the array was just generated.</p>

<ul>
<li>What is going on?</li>
<li>Why is a sorted array faster to process than an unsorted array?</li>
<li>The code is summing up some independent terms, and the order should not matter.</li>
</ul>
    </div>
    <div class="post-taglist">
        <a href="https://stackoverflow.com/questions/tagged/java" class="post-tag js-gps-track" title="show questions tagged 'java'" rel="tag">java</a> <a href="https://stackoverflow.com/questions/tagged/c%2b%2b" class="post-tag js-gps-track" title="show questions tagged 'c++'" rel="tag">c++</a> <a href="https://stackoverflow.com/questions/tagged/performance" class="post-tag js-gps-track" title="show questions tagged 'performance'" rel="tag">performance</a> <a href="https://stackoverflow.com/questions/tagged/optimization" class="post-tag js-gps-track" title="show questions tagged 'optimization'" rel="tag">optimization</a> <a href="https://stackoverflow.com/questions/tagged/branch-prediction" class="post-tag js-gps-track" title="show questions tagged 'branch-prediction'" rel="tag">branch-prediction</a> 
    </div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">
<div class="post-menu"><a href="https://stackoverflow.com/q/11227809" title="short permalink to this question" class="short-link" id="link-post-11227809">share</a><span class="lsep">|</span><a href="https://stackoverflow.com/posts/11227809/edit" class="suggest-edit-post" title="">improve this question</a></div>        
    </td>
    <td class="post-signature" align="right">
<div class="user-info user-hover">
    <div class="user-action-time">
        <a href="https://stackoverflow.com/posts/11227809/revisions" title="show all edits to this post">edited <span title="2017-03-22 01:05:39Z" class="relativetime">Mar 22 at 1:05</span></a>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/616460/jason-c"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/Yiloe.png" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/616460/jason-c">Jason C</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 25,745" dir="ltr">25.7k</span><span title="5 gold badges"><span class="badge1"></span><span class="badgecount">5</span></span><span title="56 silver badges"><span class="badge2"></span><span class="badgecount">56</span></span><span title="100 bronze badges"><span class="badge3"></span><span class="badgecount">100</span></span>
        </div>
    </div>
</div>    </td>
    <td class="post-signature owner">
        <div class="user-info user-hover">
    <div class="user-action-time">
        asked <span title="2012-06-27 13:51:36Z" class="relativetime">Jun 27 '12 at 13:51</span>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/87234/gmannickg"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/FkjBe.png" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/87234/gmannickg">GManNickG</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 260,214" dir="ltr">260k</span><span title="32 gold badges"><span class="badge1"></span><span class="badgecount">32</span></span><span title="378 silver badges"><span class="badge2"></span><span class="badgecount">378</span></span><span title="487 bronze badges"><span class="badge3"></span><span class="badgecount">487</span></span>
        </div>
    </div>
</div>
    </td>
    </tr>
    </tbody></table>
</div>
</td>
        </tr>
                        <tr>
            <td class="special-status" colspan="2">
                
            </td>
        </tr>
    
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-11227809" class="comments  dno">
		    <table>
                <tbody data-remaining-comments-count="0" data-canpost="false" data-cansee="true" data-comments-unavailable="false" data-addlink-disabled="true">

                        <tr><td></td><td></td></tr>
                </tbody>
		    </table>
	    </div>

        <div id="comments-link-11227809" data-rep="50" data-anon="true">

                <a class="js-add-link comments-link disabled-link " title="Use comments to ask for more information or suggest improvements. Avoid answering questions in comments.">add a comment</a><span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href="#" onclick=""></a>
        </div>         
    </td>
</tr>        </tbody></table>
</div>

            <div id="answers">

                <a name="tab-top"></a>
                <div id="answers-header">
                    <div class="subheader answers-subheader">
                        <h2>
                                16 Answers
                                <span style="display:none;" itemprop="answerCount">16</span>
                        </h2>
                        <div>
                            <div id="tabs">
        <a href="https://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array?answertab=active#tab-top" data-nav-xhref="" title="Answers with the latest activity first" data-value="active" data-shortcut="A">
            active</a>
        <a href="https://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array?answertab=oldest#tab-top" data-nav-xhref="" title="Answers in the order they were provided" data-value="oldest" data-shortcut="O">
            oldest</a>
        <a class="youarehere" href="https://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array?answertab=votes#tab-top" data-nav-xhref="" title="Answers with the highest score first" data-value="votes" data-shortcut="V">
            votes</a>
</div>
                        </div>
                    </div>    
                </div>    




  
<a name="11227902"></a>
<div id="answer-11227902" class="answer accepted-answer" data-answerid="11227902" itemscope="" itemtype="http://schema.org/Answer" itemprop="acceptedAnswer">
    <table>
        <tbody><tr>
            <td class="votecell">
                

<div class="vote">
        <input name="_id_" value="11227902" type="hidden">
        <a class="vote-up-off" title="This answer is useful">up vote</a>
        <span itemprop="upvoteCount" class="vote-count-post high-scored-post">25311</span>
        <a class="vote-down-off" title="This answer is not useful">down vote</a>



        <span class="vote-accepted-on load-accepted-answer-date" title="loading when this answer was accepted...">accepted</span>
<div class="bounty-award-container"><span class="bounty-award" title="This answer has been awarded bounties worth 1500 reputation by Ryan, rebeliagamer, TLama, nicael, zessx, Oleksandr, TwoStraws, RamenChef and Baum mit Augen">+1500</span></div>
</div>

            </td>
            


<td class="answercell">
    <div class="post-text" itemprop="text">
<p><strong>You are a victim of <a href="https://en.wikipedia.org/wiki/Branch_predictor" rel="noreferrer">branch prediction</a> fail.</strong></p>

<hr>

<h2>What is Branch Prediction?</h2>

<p>Consider a railroad junction:</p>

<p><a href="https://commons.wikimedia.org/wiki/File:Entroncamento_do_Transpraia.JPG" rel="noreferrer"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/muxnt.jpg" alt="Licensed Image"></a>
<sub><a href="https://commons.wikimedia.org/wiki/File:Entroncamento_do_Transpraia.JPG" rel="noreferrer">Image</a> by Mecanismo, via Wikimedia Commons. Used under the <a href="https://creativecommons.org/licenses/by-sa/3.0/deed.en" rel="noreferrer">CC-By-SA 3.0</a> license.</sub></p>

<p>Now for the sake of argument, suppose this is back in the 1800s - before long distance or radio communication.</p>

<p>You are the operator of a junction and you hear a train coming. You 
have no idea which way it is supposed to go. You stop the train to ask 
the driver which direction they want to go. And then you set the switch 
appropriately.</p>

<p><em>Trains are heavy and have a lot of inertia. So they take forever to start up and slow down.</em></p>

<p>Is there a better way? You guess which direction the train will go!</p>

<ul>
<li>If you guessed right, it continues on.</li>
<li>If you guessed wrong, the captain will stop, back up, and yell at 
you to flip the switch. Then it can restart down the other path.</li>
</ul>

<p><strong>If you guess right every time</strong>, the train will never have to stop.<br>
<strong>If you guess wrong too often</strong>, the train will spend a lot of time stopping, backing up, and restarting.</p>

<hr>

<p><strong>Consider an if-statement:</strong> At the processor level, it is a branch instruction:</p>

<p><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/pyfwC.png" alt="image2"></p>

<p>You are a processor and you see a branch. You have no idea which way 
it will go. What do you do? You halt execution and wait until the 
previous instructions are complete. Then you continue down the correct 
path.</p>

<p><em>Modern processors are complicated and have long pipelines. So they take forever to "warm up" and "slow down".</em></p>

<p>Is there a better way? You guess which direction the branch will go!</p>

<ul>
<li>If you guessed right, you continue executing.</li>
<li>If you guessed wrong, you need to flush the pipeline and roll back to the branch. Then you can restart down the other path.</li>
</ul>

<p><strong>If you guess right every time</strong>, the execution will never have to stop.<br>
<strong>If you guess wrong too often</strong>, you spend a lot of time stalling, rolling back, and restarting.</p>

<hr>

<p>This is branch prediction. I admit it's not the best analogy since 
the train could just signal the direction with a flag. But in computers,
 the processor doesn't know which direction a branch will go until the 
last moment.</p>

<p>So how would you strategically guess to minimize the number of times 
that the train must back up and go down the other path? You look at the 
past history! If the train goes left 99% of the time, then you guess 
left. If it alternates, then you alternate your guesses. If it goes one 
way every 3 times, you guess the same...</p>

<p><strong><em>In other words, you try to identify a pattern and follow it.</em></strong> This is more or less how branch predictors work.</p>

<p>Most applications have well-behaved branches. So modern branch 
predictors will typically achieve &gt;90% hit rates. But when faced with
 unpredictable branches with no recognizable patterns, branch predictors
 are virtually useless.</p>

<p>Further reading: <a href="https://en.wikipedia.org/wiki/Branch_predictor" rel="noreferrer">"Branch predictor" article on Wikipedia</a>.</p>

<hr>

<h2>As hinted from above, the culprit is this if-statement:</h2>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">128</span><span class="pun">)</span><span class="pln">
    sum </span><span class="pun">+=</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">];</span></code></pre>

<p>Notice that the data is evenly distributed between 0 and 255. 
When the data is sorted, roughly the first half of the iterations will 
not enter the if-statement. After that, they will all enter the 
if-statement.</p>

<p>This is very friendly to the branch predictor since the branch consecutively goes the same direction many times.
Even a simple saturating counter will correctly predict the branch except for the few iterations after it switches direction.</p>

<p><strong>Quick visualization:</strong></p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="pln">T </span><span class="pun">=</span><span class="pln"> branch taken
N </span><span class="pun">=</span><span class="pln"> branch </span><span class="kwd">not</span><span class="pln"> taken

data</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="pun">...</span><span class="pln"> </span><span class="lit">126</span><span class="pun">,</span><span class="pln"> </span><span class="lit">127</span><span class="pun">,</span><span class="pln"> </span><span class="lit">128</span><span class="pun">,</span><span class="pln"> </span><span class="lit">129</span><span class="pun">,</span><span class="pln"> </span><span class="lit">130</span><span class="pun">,</span><span class="pln"> </span><span class="pun">...</span><span class="pln"> </span><span class="lit">250</span><span class="pun">,</span><span class="pln"> </span><span class="lit">251</span><span class="pun">,</span><span class="pln"> </span><span class="lit">252</span><span class="pun">,</span><span class="pln"> </span><span class="pun">...</span><span class="pln">
branch </span><span class="pun">=</span><span class="pln"> N  N  N  N  N  </span><span class="pun">...</span><span class="pln">   N    N    T    T    T  </span><span class="pun">...</span><span class="pln">   T    T    T  </span><span class="pun">...</span><span class="pln">

       </span><span class="pun">=</span><span class="pln"> NNNNNNNNNNNN </span><span class="pun">...</span><span class="pln"> NNNNNNNTTTTTTTTT </span><span class="pun">...</span><span class="pln"> TTTTTTTTTT  </span><span class="pun">(</span><span class="pln">easy to predict</span><span class="pun">)</span></code></pre>

<p>However, when the data is completely random, the branch predictor is rendered useless because it can't predict random data.
Thus there will probably be around 50% misprediction. (no better than random guessing)</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="pln">data</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">226</span><span class="pun">,</span><span class="pln"> </span><span class="lit">185</span><span class="pun">,</span><span class="pln"> </span><span class="lit">125</span><span class="pun">,</span><span class="pln"> </span><span class="lit">158</span><span class="pun">,</span><span class="pln"> </span><span class="lit">198</span><span class="pun">,</span><span class="pln"> </span><span class="lit">144</span><span class="pun">,</span><span class="pln"> </span><span class="lit">217</span><span class="pun">,</span><span class="pln"> </span><span class="lit">79</span><span class="pun">,</span><span class="pln"> </span><span class="lit">202</span><span class="pun">,</span><span class="pln"> </span><span class="lit">118</span><span class="pun">,</span><span class="pln">  </span><span class="lit">14</span><span class="pun">,</span><span class="pln"> </span><span class="lit">150</span><span class="pun">,</span><span class="pln"> </span><span class="lit">177</span><span class="pun">,</span><span class="pln"> </span><span class="lit">182</span><span class="pun">,</span><span class="pln"> </span><span class="lit">133</span><span class="pun">,</span><span class="pln"> </span><span class="pun">...</span><span class="pln">
branch </span><span class="pun">=</span><span class="pln">   T</span><span class="pun">,</span><span class="pln">   T</span><span class="pun">,</span><span class="pln">   N</span><span class="pun">,</span><span class="pln">   T</span><span class="pun">,</span><span class="pln">   T</span><span class="pun">,</span><span class="pln">   T</span><span class="pun">,</span><span class="pln">   T</span><span class="pun">,</span><span class="pln">  N</span><span class="pun">,</span><span class="pln">   T</span><span class="pun">,</span><span class="pln">   N</span><span class="pun">,</span><span class="pln">   N</span><span class="pun">,</span><span class="pln">   T</span><span class="pun">,</span><span class="pln">   T</span><span class="pun">,</span><span class="pln">   T</span><span class="pun">,</span><span class="pln">   N  </span><span class="pun">...</span><span class="pln">

       </span><span class="pun">=</span><span class="pln"> TTNTTTTNTNNTTTN </span><span class="pun">...</span><span class="pln">   </span><span class="pun">(</span><span class="pln">completely random </span><span class="pun">-</span><span class="pln"> hard to predict</span><span class="pun">)</span></code></pre>

<hr>

<p><strong>So what can be done?</strong></p>

<p>If the compiler isn't able to optimize the branch into a conditional 
move, you can try some hacks if you are willing to sacrifice readability
 for performance.</p>

<p>Replace:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">128</span><span class="pun">)</span><span class="pln">
    sum </span><span class="pun">+=</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">];</span></code></pre>

<p>with:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">int</span><span class="pln"> t </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">128</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;&gt;</span><span class="pln"> </span><span class="lit">31</span><span class="pun">;</span><span class="pln">
sum </span><span class="pun">+=</span><span class="pln"> </span><span class="pun">~</span><span class="pln">t </span><span class="pun">&amp;</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">];</span></code></pre>

<p>This eliminates the branch and replaces it with some bitwise operations.</p>

<p><sub>(Note that this hack is not strictly equivalent to the original 
if-statement. But in this case, it's valid for all the input values of <code>data[]</code>.)</sub></p>

<p><strong>Benchmarks: Core i7 920 @ 3.5 GHz</strong></p>

<p>C++ - Visual Studio 2010 - x64 Release</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="com">//  Branch - Random</span><span class="pln">
seconds </span><span class="pun">=</span><span class="pln"> </span><span class="lit">11.777</span><span class="pln">

</span><span class="com">//  Branch - Sorted</span><span class="pln">
seconds </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2.352</span><span class="pln">

</span><span class="com">//  Branchless - Random</span><span class="pln">
seconds </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2.564</span><span class="pln">

</span><span class="com">//  Branchless - Sorted</span><span class="pln">
seconds </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2.587</span></code></pre>

<p>Java - Netbeans 7.1.1 JDK 7 - x64</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="com">//  Branch - Random</span><span class="pln">
seconds </span><span class="pun">=</span><span class="pln"> </span><span class="lit">10.93293813</span><span class="pln">

</span><span class="com">//  Branch - Sorted</span><span class="pln">
seconds </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5.643797077</span><span class="pln">

</span><span class="com">//  Branchless - Random</span><span class="pln">
seconds </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3.113581453</span><span class="pln">

</span><span class="com">//  Branchless - Sorted</span><span class="pln">
seconds </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3.186068823</span></code></pre>

<p>Observations:</p>

<ul>
<li><strong>With the Branch:</strong> There is a huge difference between the sorted and unsorted data.</li>
<li><strong>With the Hack:</strong> There is no difference between sorted and unsorted data.</li>
<li>In the C++ case, the hack is actually a tad slower than with the branch when the data is sorted.</li>
</ul>

<p>A general rule of thumb is to avoid data-dependent branching in critical loops. (such as in this example)</p>

<hr>

<p><strong>Update:</strong></p>

<ul>
<li><p>GCC 4.6.1 with <code>-O3</code> or <code>-ftree-vectorize</code> on x64 is able to generate a conditional move. So there is no difference between the sorted and unsorted data - both are fast.</p></li>
<li><p>VC++ 2010 is unable to generate conditional moves for this branch even under <code>/Ox</code>.</p></li>
<li><p>Intel Compiler 11 does something miraculous. It <a href="https://en.wikipedia.org/wiki/Loop_interchange" rel="noreferrer">interchanges the two loops</a>,
 thereby hoisting the unpredictable branch to the outer loop. So not 
only is it immune the mispredictions, it is also twice as fast as 
whatever VC++ and GCC can generate! In other words, ICC took advantage 
of the test-loop to defeat the benchmark...</p></li>
<li><p>If you give the Intel Compiler the branchless code, it just 
out-right vectorizes it... and is just as fast as with the branch (with 
the loop interchange).</p></li>
</ul>

<p>This goes to show that even mature modern compilers can vary wildly in their ability to optimize code...</p>
    </div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">
<div class="post-menu"><a href="https://stackoverflow.com/a/11227902" title="short permalink to this answer" class="short-link" id="link-post-11227902">share</a><span class="lsep">|</span><a href="https://stackoverflow.com/posts/11227902/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td class="post-signature" align="right">
<div class="user-info user-hover">
    <div class="user-action-time">
        <a href="https://stackoverflow.com/posts/11227902/revisions" title="show all edits to this post">edited <span title="2017-07-26 17:39:44Z" class="relativetime">Jul 26 at 17:39</span></a>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/2174085/johnny-bones"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/oMs90.jpg" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/2174085/johnny-bones">Johnny Bones</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">6,262</span><span title="4 gold badges"><span class="badge1"></span><span class="badgecount">4</span></span><span title="22 silver badges"><span class="badge2"></span><span class="badgecount">22</span></span><span title="61 bronze badges"><span class="badge3"></span><span class="badgecount">61</span></span>
        </div>
    </div>
</div>    </td>
            


    <td class="post-signature" align="right">   
       

    <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2012-06-27 13:56:42Z" class="relativetime">Jun 27 '12 at 13:56</span>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/922184/mysticial"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/URZNf.jpg" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/922184/mysticial">Mysticial</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 325,920" dir="ltr">326k</span><span title="38 gold badges"><span class="badge1"></span><span class="badgecount">38</span></span><span title="262 silver badges"><span class="badge2"></span><span class="badgecount">262</span></span><span title="279 bronze badges"><span class="badge3"></span><span class="badgecount">279</span></span>
        </div>
    </div>
</div>
    </td>
    </tr>
    </tbody></table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-11227902" class="comments ">
		    <table>
                <tbody data-remaining-comments-count="60" data-canpost="false" data-cansee="true" data-comments-unavailable="false" data-addlink-disabled="true">



    <tr id="comment-14753395" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="supernova">132</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@Mysticial To avoid the shifting hack you could write something like <code>int t=-((data[c]&gt;=128))</code>
 to generate the mask. This should be faster too. Would be interesting 
to know if the compiler is clever enough to insert a conditional move or
 not.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/501183/mackie-messer" title="4,435 reputation" class="comment-user">Mackie Messer</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment14753395_11227902"><span title="2012-06-27 16:47:51Z" class="relativetime-clean">Jun 27 '12 at 16:47</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-15059914" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="supernova">114</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@phonetagger Take a look at this followup question: <a href="http://stackoverflow.com/questions/11276291/why-cant-or-doesnt-the-compiler-optimize-a-predictable-addition-loop-into-a" title="why cant or doesnt the compiler optimize a predictable addition loop into a">stackoverflow.com/questions/11276291/</a> The Intel Compiler came pretty close to completely getting rid of the outer loop.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/922184/mysticial" title="325,920 reputation" class="comment-user">Mysticial</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment15059914_11227902"><span title="2012-07-10 17:08:39Z" class="relativetime-clean">Jul 10 '12 at 17:08</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-26857097" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="supernova">38</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@Novelocrat Only half of that
 is correct. Shifting a 1 into the sign-bit when it is zero is indeed 
UB. That's because it's signed integer overflow. But shifting a 1 out of
 the sign-bit is IB. Right-shifting a negative signed integer is IB. You
 can go into the argument that that C/C++ doesn't require that the top 
bit be the sign indicator. But implementation details are IB.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/922184/mysticial" title="325,920 reputation" class="comment-user">Mysticial</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment26857097_11227902"><span title="2013-08-18 21:04:38Z" class="relativetime-clean">Aug 18 '13 at 21:04</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-33835843" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="supernova">57</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@Mysticial Thanks so much for
 the link. It looks promising. I will go though it. One last request. 
Sorry, but please don't mind, could you tell me how you could do this <code>int t = (data[c] - 128) &gt;&gt; 31; sum += ~t &amp; data[c];</code> to replace the original if-condition above?</span>
                    &nbsp;<a href="https://stackoverflow.com/users/2227834/unheilig" title="10,570 reputation" class="comment-user">Unheilig</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment33835843_11227902"><span title="2014-03-08 20:05:22Z" class="relativetime-clean">Mar 8 '14 at 20:05</span></a></span>
                        <span class="edited-yes" title="this comment was edited 1 time"></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-50193502" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="supernova">87</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">The grammar in me wants me to think this should read "... victim of branch prediction fail<i>ure</i>" rather than just "... victim of branch prediction fail."</span>
                    &nbsp;<a href="https://stackoverflow.com/users/1771044/jdero" title="1,056 reputation" class="comment-user">jdero</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment50193502_11227902"><span title="2015-06-27 11:35:58Z" class="relativetime-clean">Jun 27 '15 at 11:35</span></a></span>
                                                                            </div>
                    </td>
    </tr>
                </tbody>
		    </table>
	    </div>

        <div id="comments-link-11227902" data-rep="50" data-anon="true">

                <a class="js-add-link comments-link  dno" title="Use comments to ask for more information or suggest improvements. Avoid comments like +1 or thanks."></a><span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link " title="expand to show all comments on this post" href="#" onclick="">show <b>60</b> more comments</a>
        </div>         
    </td>
</tr>    </tbody></table>
</div>
<div class="newsletter-anon">
    <img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/apple-touch-icon.png" class="newsletter-logo">
    <div class="newsletter-container">
        <h2>Did you find this question interesting? Try our newsletter</h2>
        <p class="newsletter-description">
            Sign up for our newsletter and get our top new questions delivered to your inbox (<a href="https://stackexchange.com/newsletters/newsletter?site=stackoverflow.com" id="newsletter-preview">see an example</a>).
        </p>
        <form id="anon-newsletter-form" data-error="There was a problem signing up for the newsletter. Please try again later.">
            <input id="newsletter-email-input" placeholder="email address" title="your email address" type="email">
            <input value="Subscribe" id="newsletter-email-submit" type="submit">
        </form>
        <div style="margin-top: 10px; float:right;" class="dno cbt newsletter-status-confirmed">
            <b>Subscribed!</b>
        </div>
        <div style="margin-top: 10px; float:right;" class="dno cbt newsletter-status-unconfirmed">
            <b>Success!</b> Please click the link in the confirmation email to activate your subscription.
        </div>
    </div>
</div>

<script>
    StackExchange.ready(function () {
        StackExchange.newsletterAd.init();
    });

    $('#anon-newsletter-form').submit(function () {
        var $form = $(this);
        var $input = $form.find('#newsletter-email-input');
        var $submit = $form.find('#newsletter-email-submit');
        var $container = $form.closest('.newsletter-container');

        var email = $.trim($input.val());
        if (email.length == 0) {
            return false;
        }
        StackExchange.helpers.addSpinner($form);

        $.ajax({
            url: '/newsletter/signup/anon',
            type: 'POST',
            dataType: 'json',
            data: { fkey: StackExchange.options.user.fkey, email: email, viaAnonNewsletterAd: true },
            success: function (data) {
                if (!data.error && (data.status == 'confirmed' || data.status == 'unconfirmed')) {
                    $input.attr('disabled', true);
                    $submit.remove();
                    $container.find('.newsletter-status-' + data.status).show();
                }
                else {
                    $container.showErrorMessage(data.error || $form.data('error'));
                }
            },
            error: function () {
                $container.showErrorMessage($form.data('error'));
            },
            complete: function () {
                StackExchange.helpers.removeSpinner($form);
            }
        });

        return false;
    });
</script>

  
<a name="11227877"></a>
<div id="answer-11227877" class="answer" data-answerid="11227877" itemscope="" itemtype="http://schema.org/Answer">
    <table>
        <tbody><tr>
            <td class="votecell">
                

<div class="vote">
        <input name="_id_" value="11227877" type="hidden">
        <a class="vote-up-off" title="This answer is useful">up vote</a>
        <span itemprop="upvoteCount" class="vote-count-post high-scored-post">3160</span>
        <a class="vote-down-off" title="This answer is not useful">down vote</a>




</div>

            </td>
            


<td class="answercell">
    <div class="post-text" itemprop="text">
<p><strong>Branch prediction.</strong></p>

<p>With a sorted array, the condition <code>data[c] &gt;= 128</code> is first <code>false</code> for a streak of values, then becomes <code>true</code> for all later values. That's easy to predict. With an unsorted array, you pay for the branching cost.</p>
    </div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">
<div class="post-menu"><a href="https://stackoverflow.com/a/11227877" title="short permalink to this answer" class="short-link" id="link-post-11227877">share</a><span class="lsep">|</span><a href="https://stackoverflow.com/posts/11227877/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td class="post-signature" align="right">
<div class="user-info ">
    <div class="user-action-time">
        <a href="https://stackoverflow.com/posts/11227877/revisions" title="show all edits to this post">edited <span title="2016-08-05 07:53:10Z" class="relativetime">Aug 5 '16 at 7:53</span></a>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/3053978/shankar"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/foTUq.jpg" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/3053978/shankar">Shankar</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">326</span><span title="4 silver badges"><span class="badge2"></span><span class="badgecount">4</span></span><span title="15 bronze badges"><span class="badge3"></span><span class="badgecount">15</span></span>
        </div>
    </div>
</div>    </td>
            


    <td class="post-signature" align="right">   
       

    <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2012-06-27 13:54:45Z" class="relativetime">Jun 27 '12 at 13:54</span>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/1011995/daniel-fischer"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/Jca5Q.jpg" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/1011995/daniel-fischer">Daniel Fischer</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 149,206" dir="ltr">149k</span><span title="14 gold badges"><span class="badge1"></span><span class="badgecount">14</span></span><span title="237 silver badges"><span class="badge2"></span><span class="badgecount">237</span></span><span title="369 bronze badges"><span class="badge3"></span><span class="badgecount">369</span></span>
        </div>
    </div>
</div>
    </td>
    </tr>
    </tbody></table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-11227877" class="comments ">
		    <table>
                <tbody data-remaining-comments-count="2" data-canpost="false" data-cansee="true" data-comments-unavailable="false" data-addlink-disabled="true">



    <tr id="comment-40722655" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="supernova">48</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Does branch prediction work 
better on sorted arrays vs. arrays with different patterns?  For 
example, for the array --&gt; { 10, 5, 20, 10, 40, 20, ... } the next 
element in the array from the pattern is 80.  Would this kind of array 
be sped up by branch prediction in which the next element is 80 here if 
the pattern is followed?  Or does it usually only help with sorted 
arrays?</span>
                    &nbsp;<a href="https://stackoverflow.com/users/538458/adam-freeman" title="824 reputation" class="comment-user">Adam Freeman</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment40722655_11227877"><span title="2014-09-23 18:58:12Z" class="relativetime-clean">Sep 23 '14 at 18:58</span></a></span>
                        <span class="edited-yes" title="this comment was edited 1 time"></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-41900025" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="supernova">49</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">So basically everything I 
conventionally learned about big-O is out of the window?  Better to 
incur a sorting cost than a branching cost?</span>
                    &nbsp;<a href="https://stackoverflow.com/users/3206624/agrim-pathak" title="773 reputation" class="comment-user">Agrim Pathak</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment41900025_11227877"><span title="2014-10-30 07:51:58Z" class="relativetime-clean">Oct 30 '14 at 7:51</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-41904388" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="supernova">70</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@AgrimPathak That depends. 
For not too large input, an algorithm with higher complexity is faster 
than an algorithm with lower complexity when the constants are smaller 
for the algorithm with higher complexity. Where the break-even point is 
can be hard to predict. Also, <a href="http://stackoverflow.com/questions/14023988/why-is-processing-a-sorted-array-slower-than-an-unsorted-array?lq=1">compare this</a>, locality is important. Big-O is important, but it is not the sole criterion for performance.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/1011995/daniel-fischer" title="149,206 reputation" class="comment-user">Daniel Fischer</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment41904388_11227877"><span title="2014-10-30 10:14:12Z" class="relativetime-clean">Oct 30 '14 at 10:14</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-42224805" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="hot">25</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">When does branch prediction 
takes place? When does language will know that array is sorted? I'm 
thinking of situation of array that looks like: 
[1,2,3,4,5,...998,999,1000, 3, 10001, 10002] ? will this obscure 3 
increase running time? Will it be as long as unsorted array?</span>
                    &nbsp;<a href="https://stackoverflow.com/users/2047418/filip-bartuzi" title="2,296 reputation" class="comment-user">Filip Bartuzi</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment42224805_11227877"><span title="2014-11-09 13:37:18Z" class="relativetime-clean">Nov 9 '14 at 13:37</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-42225007" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="hot">24</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@FilipBartuzi Branch 
prediction takes place in the processor, below the language level (but 
the language may offer ways to tell the compiler what's likely, so the 
compiler can emit code suited to that). In your example, the 
out-of-order 3 will lead to a branch-misprediction (for appropriate 
conditions, where 3 gives a different result than 1000), and thus 
processing that array will likely take a couple dozen or hundred 
nanoseconds longer than a sorted array would, hardly ever noticeable. 
What costs time is i high rate of mispredictions, one misprediction per 
1000 isn't much.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/1011995/daniel-fischer" title="149,206 reputation" class="comment-user">Daniel Fischer</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment42225007_11227877"><span title="2014-11-09 13:49:37Z" class="relativetime-clean">Nov 9 '14 at 13:49</span></a></span>
                                                                            </div>
                    </td>
    </tr>
                </tbody>
		    </table>
	    </div>

        <div id="comments-link-11227877" data-rep="50" data-anon="true">

                <a class="js-add-link comments-link  dno" title="Use comments to ask for more information or suggest improvements. Avoid comments like +1 or thanks."></a><span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link " title="expand to show all comments on this post" href="#" onclick="">show <b>2</b> more comments</a>
        </div>         
    </td>
</tr>    </tbody></table>
</div>

  
<a name="11237235"></a>
<div id="answer-11237235" class="answer" data-answerid="11237235" itemscope="" itemtype="http://schema.org/Answer">
    <table>
        <tbody><tr>
            <td class="votecell">
                

<div class="vote">
        <input name="_id_" value="11237235" type="hidden">
        <a class="vote-up-off" title="This answer is useful">up vote</a>
        <span itemprop="upvoteCount" class="vote-count-post high-scored-post">2549</span>
        <a class="vote-down-off" title="This answer is not useful">down vote</a>



<div class="bounty-award-container"><span class="bounty-award" title="This answer has been awarded bounties worth 150 reputation by DatEpicCoderGuyWhoPrograms">+150</span></div>
</div>

            </td>
            


<td class="answercell">
    <div class="post-text" itemprop="text">
<p>The reason why performance improves drastically when the data is 
sorted is that the branch prediction penalty is removed, as explained 
beautifully in <a href="https://stackoverflow.com/users/922184/mysticial">Mysticial</a>'s answer.</p>

<p>Now, if we look at the code</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">128</span><span class="pun">)</span><span class="pln">
    sum </span><span class="pun">+=</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">];</span></code></pre>

<p>we can find that the meaning of this particular <code>if... else...</code> branch is to add something when a condition is satisfied. This type of branch can be easily transformed into a <strong>conditional move</strong> statement, which would be compiled into a conditional move instruction: <code>cmovl</code>, in an <code>x86</code> system. The branch and thus the potential branch prediction penalty is removed.</p>

<p>In <code>C</code>, thus <code>C++</code>, the statement, which would compile directly (without any optimization) into the conditional move instruction in <code>x86</code>, is the ternary operator <code>... ? ... : ...</code>. So we rewrite the above statement into an equivalent one:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="pln">sum </span><span class="pun">+=</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="lit">128</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">]</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></pre>

<p>While maintaining readability, we can check the speedup factor.</p>

<p>On an Intel <a href="http://en.wikipedia.org/wiki/Intel_Core#Core_i7" rel="noreferrer">Core i7</a>-2600K @ 3.4&nbsp;GHz and Visual Studio 2010 Release Mode, the benchmark is (format copied from Mysticial):</p>

<p><strong>x86</strong></p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="com">//  Branch - Random</span><span class="pln">
seconds </span><span class="pun">=</span><span class="pln"> </span><span class="lit">8.885</span><span class="pln">

</span><span class="com">//  Branch - Sorted</span><span class="pln">
seconds </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.528</span><span class="pln">

</span><span class="com">//  Branchless - Random</span><span class="pln">
seconds </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3.716</span><span class="pln">

</span><span class="com">//  Branchless - Sorted</span><span class="pln">
seconds </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3.71</span></code></pre>

<p><strong>x64</strong></p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="com">//  Branch - Random</span><span class="pln">
seconds </span><span class="pun">=</span><span class="pln"> </span><span class="lit">11.302</span><span class="pln">

</span><span class="com">//  Branch - Sorted</span><span class="pln">
 seconds </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.830</span><span class="pln">

</span><span class="com">//  Branchless - Random</span><span class="pln">
seconds </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2.736</span><span class="pln">

</span><span class="com">//  Branchless - Sorted</span><span class="pln">
seconds </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2.737</span></code></pre>

<p>The result is robust in multiple tests. We get a great speedup when 
the branch result is unpredictable, but we suffer a little bit when it 
is predictable. In fact, when using a conditional move, the performance 
is the same regardless of the data pattern.</p>

<p>Now let's look more closely by investigating the <code>x86</code> assembly they generate. For simplicity, we use two functions <code>max1</code> and <code>max2</code>.</p>

<p><code>max1</code> uses the conditional branch <code>if... else ...</code>:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">int</span><span class="pln"> max1</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a </span><span class="pun">&gt;</span><span class="pln"> b</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> a</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">else</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> b</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre>

<p><code>max2</code> uses the ternary operator <code>... ? ... : ...</code>:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">int</span><span class="pln"> max2</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> a </span><span class="pun">&gt;</span><span class="pln"> b </span><span class="pun">?</span><span class="pln"> a </span><span class="pun">:</span><span class="pln"> b</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre>

<p>On a x86-64 machine, <code>GCC -S</code> generates the assembly below.</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="pun">:</span><span class="pln">max1
    movl    </span><span class="pun">%</span><span class="pln">edi</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">4</span><span class="pun">(%</span><span class="pln">rbp</span><span class="pun">)</span><span class="pln">
    movl    </span><span class="pun">%</span><span class="pln">esi</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">8</span><span class="pun">(%</span><span class="pln">rbp</span><span class="pun">)</span><span class="pln">
    movl    </span><span class="pun">-</span><span class="lit">4</span><span class="pun">(%</span><span class="pln">rbp</span><span class="pun">),</span><span class="pln"> </span><span class="pun">%</span><span class="pln">eax
    cmpl    </span><span class="pun">-</span><span class="lit">8</span><span class="pun">(%</span><span class="pln">rbp</span><span class="pun">),</span><span class="pln"> </span><span class="pun">%</span><span class="pln">eax
    jle     </span><span class="pun">.</span><span class="pln">L2
    movl    </span><span class="pun">-</span><span class="lit">4</span><span class="pun">(%</span><span class="pln">rbp</span><span class="pun">),</span><span class="pln"> </span><span class="pun">%</span><span class="pln">eax
    movl    </span><span class="pun">%</span><span class="pln">eax</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">12</span><span class="pun">(%</span><span class="pln">rbp</span><span class="pun">)</span><span class="pln">
    jmp     </span><span class="pun">.</span><span class="pln">L4
</span><span class="pun">.</span><span class="pln">L2</span><span class="pun">:</span><span class="pln">
    movl    </span><span class="pun">-</span><span class="lit">8</span><span class="pun">(%</span><span class="pln">rbp</span><span class="pun">),</span><span class="pln"> </span><span class="pun">%</span><span class="pln">eax
    movl    </span><span class="pun">%</span><span class="pln">eax</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">12</span><span class="pun">(%</span><span class="pln">rbp</span><span class="pun">)</span><span class="pln">
</span><span class="pun">.</span><span class="pln">L4</span><span class="pun">:</span><span class="pln">
    movl    </span><span class="pun">-</span><span class="lit">12</span><span class="pun">(%</span><span class="pln">rbp</span><span class="pun">),</span><span class="pln"> </span><span class="pun">%</span><span class="pln">eax
    leave
    ret

</span><span class="pun">:</span><span class="pln">max2
    movl    </span><span class="pun">%</span><span class="pln">edi</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">4</span><span class="pun">(%</span><span class="pln">rbp</span><span class="pun">)</span><span class="pln">
    movl    </span><span class="pun">%</span><span class="pln">esi</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">8</span><span class="pun">(%</span><span class="pln">rbp</span><span class="pun">)</span><span class="pln">
    movl    </span><span class="pun">-</span><span class="lit">4</span><span class="pun">(%</span><span class="pln">rbp</span><span class="pun">),</span><span class="pln"> </span><span class="pun">%</span><span class="pln">eax
    cmpl    </span><span class="pun">%</span><span class="pln">eax</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">8</span><span class="pun">(%</span><span class="pln">rbp</span><span class="pun">)</span><span class="pln">
    cmovge  </span><span class="pun">-</span><span class="lit">8</span><span class="pun">(%</span><span class="pln">rbp</span><span class="pun">),</span><span class="pln"> </span><span class="pun">%</span><span class="pln">eax
    leave
    ret</span></code></pre>

<p><code>max2</code> uses much less code due to the usage of instruction <code>cmovge</code>. But the real gain is that <code>max2</code> does not involve branch jumps, <code>jmp</code>, which would have a significant performance penalty if the predicted result is not right.</p>

<p>So why does a conditional move perform better?</p>

<p>In a typical <code>x86</code> processor, the execution of an 
instruction is divided into several stages. Roughly, we have different 
hardware to deal with different stages. So we do not have to wait for 
one instruction to finish to start a new one. This is called <strong><a href="http://en.wikipedia.org/wiki/Pipeline_%28computing%29" rel="noreferrer">pipelining</a></strong>.</p>

<p>In a branch case, the following instruction is determined by the 
preceding one, so we cannot do pipelining. We have to either wait or 
predict.</p>

<p>In a conditional move case, the execution conditional move 
instruction is divided into several stages, but the earlier stages like <code>Fetch</code> and <code>Decode</code>
 does not depend on the result of the previous instruction; only latter 
stages need the result. Thus, we wait a fraction of one instruction's 
execution time. This is why the conditional move version is slower than 
the branch when prediction is easy.</p>

<p>The book <em><a href="http://rads.stackoverflow.com/amzn/click/0136108040" rel="noreferrer">Computer Systems: A Programmer's Perspective, second edition</a></em> explains this in detail. You can check Section 3.6.6 for <em>Conditional Move Instructions</em>, entire Chapter 4 for <em>Processor Architecture</em>, and Section 5.11.2 for a special treatment for <em>Branch Prediction and Misprediction Penalties</em>.</p>

<p>Sometimes, some modern compilers can optimize our code to assembly 
with better performance, sometimes some compilers can't (the code in 
question is using Visual Studio's native compiler). Knowing the 
performance difference between branch and conditional move when 
unpredictable can help us write code with better performance when the 
scenario gets so complex that the compiler can not optimize them 
automatically.</p>
    </div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">
<div class="post-menu"><a href="https://stackoverflow.com/a/11237235" title="short permalink to this answer" class="short-link" id="link-post-11237235">share</a><span class="lsep">|</span><a href="https://stackoverflow.com/posts/11237235/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td class="post-signature" align="right">
<div class="user-info user-hover">
    <div class="user-action-time">
        <a href="https://stackoverflow.com/posts/11237235/revisions" title="show all edits to this post">edited <span title="2017-05-23 12:03:09Z" class="relativetime">May 23 at 12:03</span></a>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/-1/community"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/a007be5a61f6aa8f3e85ae2fc18dd66e.png" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/-1/community">Community</a><span class="mod-flair" title="moderator"></span>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">1</span><span title="1 silver badge"><span class="badge2"></span><span class="badgecount">1</span></span>
        </div>
    </div>
</div>    </td>
            


    <td class="post-signature" align="right">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2012-06-28 02:14:03Z" class="relativetime">Jun 28 '12 at 2:14</span>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/866732/wisagan"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/f09f0253204000d6083ed1de21afc6fd.png" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/866732/wisagan">WiSaGaN</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 28,739" dir="ltr">28.7k</span><span title="5 gold badges"><span class="badge1"></span><span class="badgecount">5</span></span><span title="23 silver badges"><span class="badge2"></span><span class="badgecount">23</span></span><span title="65 bronze badges"><span class="badge3"></span><span class="badgecount">65</span></span>
        </div>
    </div>
</div>
    </td>
    </tr>
    </tbody></table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-11237235" class="comments ">
		    <table>
                <tbody data-remaining-comments-count="6" data-canpost="false" data-cansee="true" data-comments-unavailable="false" data-addlink-disabled="true">



    <tr id="comment-14778577" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="supernova">83</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">There's no default 
optimization level unless you add -O to your GCC command lines. (And you
 can't have a worst english than mine ;)</span>
                    &nbsp;<a href="https://stackoverflow.com/users/611560/ydroneaud" title="3,153 reputation" class="comment-user">ydroneaud</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment14778577_11237235"><span title="2012-06-28 14:04:45Z" class="relativetime-clean">Jun 28 '12 at 14:04</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-14826908" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="supernova">54</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">I find it hard to believe 
that the compiler can optimize the ternary-operator better than it can 
the equivalent if-statement.  You've shown that GCC optimizes the 
ternary-operator to a conditional move; you <i>haven't</i> shown that it doesn't do exactly the same thing for the if-statement.  In fact, according to Mystical above, GCC <i>does</i> optimize the if-statement to a conditional move, which would make this answer completely incorrect.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/238419/blueraja-danny-pflughoeft" title="49,856 reputation" class="comment-user">BlueRaja - Danny Pflughoeft</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment14826908_11237235"><span title="2012-06-30 15:29:23Z" class="relativetime-clean">Jun 30 '12 at 15:29</span></a></span>
                        <span class="edited-yes" title="this comment was edited 1 time"></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-17359552" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="supernova">59</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@WiSaGaN The code 
demonstrates nothing, because your two pieces of code compile to the 
same machine code.  It's critically important that people don't get the 
idea that somehow the if statement in your example is different from the
 terenary in your example.  It's true that you own up to the similarity 
in your last paragraph, but that doesn't erase the fact that the rest of
 the example is harmful.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/61394/justin-l" title="2,317 reputation" class="comment-user">Justin L.</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment17359552_11237235"><span title="2012-10-11 03:12:02Z" class="relativetime-clean">Oct 11 '12 at 3:12</span></a></span>
                        <span class="edited-yes" title="this comment was edited 1 time"></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-17360353" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="hot">25</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@WiSaGaN My downvote would definitely turn into an upvote if you modified your answer to remove the misleading <code>-O0</code> example and to show the difference in <i>optimized</i> asm on your two testcases.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/61394/justin-l" title="2,317 reputation" class="comment-user">Justin L.</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment17360353_11237235"><span title="2012-10-11 04:13:03Z" class="relativetime-clean">Oct 11 '12 at 4:13</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-27729780" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="hot">26</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@UpAndAdam At the moment of 
the test, VS2010 can't optimize the original branch into a conditional 
move even when specifying high optimization level, while gcc can.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/866732/wisagan" title="28,739 reputation" class="comment-user">WiSaGaN</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment27729780_11237235"><span title="2013-09-14 15:18:02Z" class="relativetime-clean">Sep 14 '13 at 15:18</span></a></span>
                                                                            </div>
                    </td>
    </tr>
                </tbody>
		    </table>
	    </div>

        <div id="comments-link-11237235" data-rep="50" data-anon="true">

                <a class="js-add-link comments-link  dno" title="Use comments to ask for more information or suggest improvements. Avoid comments like +1 or thanks."></a><span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link " title="expand to show all comments on this post" href="#" onclick="">show <b>6</b> more comments</a>
        </div>         
    </td>
</tr>    </tbody></table>
</div>

  
<a name="11303693"></a>
<div id="answer-11303693" class="answer" data-answerid="11303693" itemscope="" itemtype="http://schema.org/Answer">
    <table>
        <tbody><tr>
            <td class="votecell">
                

<div class="vote">
        <input name="_id_" value="11303693" type="hidden">
        <a class="vote-up-off" title="This answer is useful">up vote</a>
        <span itemprop="upvoteCount" class="vote-count-post high-scored-post">1742</span>
        <a class="vote-down-off" title="This answer is not useful">down vote</a>




</div>

            </td>
            


<td class="answercell">
    <div class="post-text" itemprop="text">
<p>If you are curious about even more optimizations that can be done to this code, consider this:</p>

<p>Starting with the original loop:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">100000</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j </span><span class="pun">&lt;</span><span class="pln"> arraySize</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">j</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">128</span><span class="pun">)</span><span class="pln">
            sum </span><span class="pun">+=</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">j</span><span class="pun">];</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>

<p>With loop interchange, we can safely change this loop to:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j </span><span class="pun">&lt;</span><span class="pln"> arraySize</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">j</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">100000</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">128</span><span class="pun">)</span><span class="pln">
            sum </span><span class="pun">+=</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">j</span><span class="pun">];</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>

<p>Then, you can see that the <code>if</code> conditional is constant throughout the execution of the <code>i</code> loop, so you can hoist the <code>if</code> out:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j </span><span class="pun">&lt;</span><span class="pln"> arraySize</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">j</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">128</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">100000</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln">
        </span><span class="pun">{</span><span class="pln">
            sum </span><span class="pun">+=</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">j</span><span class="pun">];</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>

<p>Then, you see that the inner loop can be collapsed into one single 
expression, assuming the floating point model allows it (/fp:fast is 
thrown, for example)</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j </span><span class="pun">&lt;</span><span class="pln"> arraySize</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">j</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">128</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">{</span><span class="pln">
        sum </span><span class="pun">+=</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">100000</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>

<p>That one is 100,000x faster than before </p>
    </div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">
<div class="post-menu"><a href="https://stackoverflow.com/a/11303693" title="short permalink to this answer" class="short-link" id="link-post-11303693">share</a><span class="lsep">|</span><a href="https://stackoverflow.com/posts/11303693/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td class="post-signature" align="right">
<div class="user-info user-hover">
    <div class="user-action-time">
        <a href="https://stackoverflow.com/posts/11303693/revisions" title="show all edits to this post">edited <span title="2017-07-16 13:09:20Z" class="relativetime">Jul 16 at 13:09</span></a>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/3448527/dippas"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/r2MY3.jpg" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/3448527/dippas">dippas</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 31,477" dir="ltr">31.5k</span><span title="10 gold badges"><span class="badge1"></span><span class="badgecount">10</span></span><span title="32 silver badges"><span class="badge2"></span><span class="badgecount">32</span></span><span title="60 bronze badges"><span class="badge3"></span><span class="badgecount">60</span></span>
        </div>
    </div>
</div>    </td>
            


    <td class="post-signature" align="right">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2012-07-03 02:25:30Z" class="relativetime">Jul 3 '12 at 2:25</span>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/863980/vulcan-raven"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/ea08c9063ae1de86e8d576fb569d513a.png" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/863980/vulcan-raven">vulcan raven</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 20,437" dir="ltr">20.4k</span><span title="4 gold badges"><span class="badge1"></span><span class="badgecount">4</span></span><span title="39 silver badges"><span class="badge2"></span><span class="badgecount">39</span></span><span title="74 bronze badges"><span class="badge3"></span><span class="badgecount">74</span></span>
        </div>
    </div>
</div>
    </td>
    </tr>
    </tbody></table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-11303693" class="comments ">
		    <table>
                <tbody data-remaining-comments-count="1" data-canpost="false" data-cansee="true" data-comments-unavailable="false" data-addlink-disabled="true">



    <tr id="comment-17358678" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="supernova">185</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">If you want to cheat, you might as well take the multiplication outside the loop and do sum*=100000 after the loop.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/81614/jyaif" title="534 reputation" class="comment-user">Jyaif</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment17358678_11303693"><span title="2012-10-11 01:48:01Z" class="relativetime-clean">Oct 11 '12 at 1:48</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-21421811" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="supernova">42</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@Michael - I believe that this example is actually an example of <a href="http://en.wikipedia.org/wiki/Loop-invariant_code_motion" rel="nofollow noreferrer">loop-invariant hoisting</a> (LIH) optimization, and NOT <a href="http://en.wikipedia.org/wiki/Loop_interchange" rel="nofollow noreferrer">loop swap</a>.
 In this case, the entire inner loop is independent of the outer loop 
and can therefore be hoisted out of the outer loop, whereupon the result
 is simply multiplied by a sum over <code>i</code> of one unit =1e5. It 
makes no difference to the end result, but I just wanted to set the 
record straight since this is such a frequented page.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/233829/yair-altman" title="5,032 reputation" class="comment-user">Yair Altman</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment21421811_11303693"><span title="2013-03-04 12:59:11Z" class="relativetime-clean">Mar 4 '13 at 12:59</span></a></span>
                        <span class="edited-yes" title="this comment was edited 1 time"></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-23798525" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="hot">25</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Although not in the simple spirit of swapping loops, the inner <code>if</code> at this point could be converted to:  <code>sum += (data[j] &gt;= 128) ? data[j] * 100000 : 0;</code> which the compiler may be able to reduce to <code>cmovge</code> or equivalent.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/1306959/alex-north-keys" title="2,651 reputation" class="comment-user">Alex North-Keys</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment23798525_11303693"><span title="2013-05-15 11:57:16Z" class="relativetime-clean">May 15 '13 at 11:57</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-63391713" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="hot">18</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">The outer loop is to make the
 time taken by inner loop large enough to profile. So why would you loop
 swap. At the end, that loop will be removed anyways.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/1874627/saurabheights" title="1,328 reputation" class="comment-user">saurabheights</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment63391713_11303693"><span title="2016-06-22 15:45:19Z" class="relativetime-clean">Jun 22 '16 at 15:45</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-69964195" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="warm">9</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@saurabheights: Wrong question: why would the compiler NOT loop swap. Microbenchmarks is hard ;)</span>
                    &nbsp;<a href="https://stackoverflow.com/users/147192/matthieu-m" title="171,753 reputation" class="comment-user">Matthieu M.</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment69964195_11303693"><span title="2016-12-29 13:58:53Z" class="relativetime-clean">Dec 29 '16 at 13:58</span></a></span>
                                                                            </div>
                    </td>
    </tr>
                </tbody>
		    </table>
	    </div>

        <div id="comments-link-11303693" data-rep="50" data-anon="true">

                <a class="js-add-link comments-link  dno" title="Use comments to ask for more information or suggest improvements. Avoid comments like +1 or thanks."></a><span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link " title="expand to show all comments on this post" href="#" onclick="">show <b>1</b> more comment</a>
        </div>         
    </td>
</tr>    </tbody></table>
</div>

  
<a name="12853037"></a>
<div id="answer-12853037" class="answer" data-answerid="12853037" itemscope="" itemtype="http://schema.org/Answer">
    <table>
        <tbody><tr>
            <td class="votecell">
                

<div class="vote">
        <input name="_id_" value="12853037" type="hidden">
        <a class="vote-up-off" title="This answer is useful">up vote</a>
        <span itemprop="upvoteCount" class="vote-count-post high-scored-post">1441</span>
        <a class="vote-down-off" title="This answer is not useful">down vote</a>




</div>

            </td>
            


<td class="answercell">
    <div class="post-text" itemprop="text">
<p>No doubt some of us would be interested in ways of identifying code 
that is problematic for the CPU's branch-predictor. The Valgrind tool <code>cachegrind</code> has a branch-predictor simulator, enabled by using the <code>--branch-sim=yes</code> flag. Running it over the examples in this question, with the number of outer loops reduced to 10000 and compiled with <code>g++</code>, gives these results:</p>

<p><strong>Sorted:</strong></p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="pun">==</span><span class="lit">32551</span><span class="pun">==</span><span class="pln"> </span><span class="typ">Branches</span><span class="pun">:</span><span class="pln">        </span><span class="lit">656</span><span class="pun">,</span><span class="lit">645</span><span class="pun">,</span><span class="lit">130</span><span class="pln">  </span><span class="pun">(</span><span class="pln">  </span><span class="lit">656</span><span class="pun">,</span><span class="lit">609</span><span class="pun">,</span><span class="lit">208</span><span class="pln"> cond </span><span class="pun">+</span><span class="pln">    </span><span class="lit">35</span><span class="pun">,</span><span class="lit">922</span><span class="pln"> ind</span><span class="pun">)</span><span class="pln">
</span><span class="pun">==</span><span class="lit">32551</span><span class="pun">==</span><span class="pln"> </span><span class="typ">Mispredicts</span><span class="pun">:</span><span class="pln">         </span><span class="lit">169</span><span class="pun">,</span><span class="lit">556</span><span class="pln">  </span><span class="pun">(</span><span class="pln">      </span><span class="lit">169</span><span class="pun">,</span><span class="lit">095</span><span class="pln"> cond </span><span class="pun">+</span><span class="pln">       </span><span class="lit">461</span><span class="pln"> ind</span><span class="pun">)</span><span class="pln">
</span><span class="pun">==</span><span class="lit">32551</span><span class="pun">==</span><span class="pln"> </span><span class="typ">Mispred</span><span class="pln"> rate</span><span class="pun">:</span><span class="pln">            </span><span class="lit">0.0</span><span class="pun">%</span><span class="pln"> </span><span class="pun">(</span><span class="pln">          </span><span class="lit">0.0</span><span class="pun">%</span><span class="pln">     </span><span class="pun">+</span><span class="pln">       </span><span class="lit">1.2</span><span class="pun">%</span><span class="pln">   </span><span class="pun">)</span></code></pre>

<p><strong>Unsorted:</strong></p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="pun">==</span><span class="lit">32555</span><span class="pun">==</span><span class="pln"> </span><span class="typ">Branches</span><span class="pun">:</span><span class="pln">        </span><span class="lit">655</span><span class="pun">,</span><span class="lit">996</span><span class="pun">,</span><span class="lit">082</span><span class="pln">  </span><span class="pun">(</span><span class="pln">  </span><span class="lit">655</span><span class="pun">,</span><span class="lit">960</span><span class="pun">,</span><span class="lit">160</span><span class="pln"> cond </span><span class="pun">+</span><span class="pln">  </span><span class="lit">35</span><span class="pun">,</span><span class="lit">922</span><span class="pln"> ind</span><span class="pun">)</span><span class="pln">
</span><span class="pun">==</span><span class="lit">32555</span><span class="pun">==</span><span class="pln"> </span><span class="typ">Mispredicts</span><span class="pun">:</span><span class="pln">     </span><span class="lit">164</span><span class="pun">,</span><span class="lit">073</span><span class="pun">,</span><span class="lit">152</span><span class="pln">  </span><span class="pun">(</span><span class="pln">  </span><span class="lit">164</span><span class="pun">,</span><span class="lit">072</span><span class="pun">,</span><span class="lit">692</span><span class="pln"> cond </span><span class="pun">+</span><span class="pln">     </span><span class="lit">460</span><span class="pln"> ind</span><span class="pun">)</span><span class="pln">
</span><span class="pun">==</span><span class="lit">32555</span><span class="pun">==</span><span class="pln"> </span><span class="typ">Mispred</span><span class="pln"> rate</span><span class="pun">:</span><span class="pln">           </span><span class="lit">25.0</span><span class="pun">%</span><span class="pln"> </span><span class="pun">(</span><span class="pln">         </span><span class="lit">25.0</span><span class="pun">%</span><span class="pln">     </span><span class="pun">+</span><span class="pln">     </span><span class="lit">1.2</span><span class="pun">%</span><span class="pln">   </span><span class="pun">)</span></code></pre>

<p>Drilling down into the line-by-line output produced by <code>cg_annotate</code> we see for the loop in question:</p>

<p><strong>Sorted:</strong></p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="pln">          </span><span class="typ">Bc</span><span class="pln">    </span><span class="typ">Bcm</span><span class="pln"> </span><span class="typ">Bi</span><span class="pln"> </span><span class="typ">Bim</span><span class="pln">
      </span><span class="lit">10</span><span class="pun">,</span><span class="lit">001</span><span class="pln">      </span><span class="lit">4</span><span class="pln">  </span><span class="lit">0</span><span class="pln">   </span><span class="lit">0</span><span class="pln">      </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">10000</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln">
           </span><span class="pun">.</span><span class="pln">      </span><span class="pun">.</span><span class="pln">  </span><span class="pun">.</span><span class="pln">   </span><span class="pun">.</span><span class="pln">      </span><span class="pun">{</span><span class="pln">
           </span><span class="pun">.</span><span class="pln">      </span><span class="pun">.</span><span class="pln">  </span><span class="pun">.</span><span class="pln">   </span><span class="pun">.</span><span class="pln">          </span><span class="com">// primary loop</span><span class="pln">
 </span><span class="lit">327</span><span class="pun">,</span><span class="lit">690</span><span class="pun">,</span><span class="lit">000</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="lit">016</span><span class="pln">  </span><span class="lit">0</span><span class="pln">   </span><span class="lit">0</span><span class="pln">          </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> c </span><span class="pun">&lt;</span><span class="pln"> arraySize</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">c</span><span class="pun">)</span><span class="pln">
           </span><span class="pun">.</span><span class="pln">      </span><span class="pun">.</span><span class="pln">  </span><span class="pun">.</span><span class="pln">   </span><span class="pun">.</span><span class="pln">          </span><span class="pun">{</span><span class="pln">
 </span><span class="lit">327</span><span class="pun">,</span><span class="lit">680</span><span class="pun">,</span><span class="lit">000</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="lit">006</span><span class="pln">  </span><span class="lit">0</span><span class="pln">   </span><span class="lit">0</span><span class="pln">              </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">128</span><span class="pun">)</span><span class="pln">
           </span><span class="lit">0</span><span class="pln">      </span><span class="lit">0</span><span class="pln">  </span><span class="lit">0</span><span class="pln">   </span><span class="lit">0</span><span class="pln">                  sum </span><span class="pun">+=</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">];</span><span class="pln">
           </span><span class="pun">.</span><span class="pln">      </span><span class="pun">.</span><span class="pln">  </span><span class="pun">.</span><span class="pln">   </span><span class="pun">.</span><span class="pln">          </span><span class="pun">}</span><span class="pln">
           </span><span class="pun">.</span><span class="pln">      </span><span class="pun">.</span><span class="pln">  </span><span class="pun">.</span><span class="pln">   </span><span class="pun">.</span><span class="pln">      </span><span class="pun">}</span></code></pre>

<p><strong>Unsorted:</strong></p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="pln">          </span><span class="typ">Bc</span><span class="pln">         </span><span class="typ">Bcm</span><span class="pln"> </span><span class="typ">Bi</span><span class="pln"> </span><span class="typ">Bim</span><span class="pln">
      </span><span class="lit">10</span><span class="pun">,</span><span class="lit">001</span><span class="pln">           </span><span class="lit">4</span><span class="pln">  </span><span class="lit">0</span><span class="pln">   </span><span class="lit">0</span><span class="pln">      </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">10000</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln">
           </span><span class="pun">.</span><span class="pln">           </span><span class="pun">.</span><span class="pln">  </span><span class="pun">.</span><span class="pln">   </span><span class="pun">.</span><span class="pln">      </span><span class="pun">{</span><span class="pln">
           </span><span class="pun">.</span><span class="pln">           </span><span class="pun">.</span><span class="pln">  </span><span class="pun">.</span><span class="pln">   </span><span class="pun">.</span><span class="pln">          </span><span class="com">// primary loop</span><span class="pln">
 </span><span class="lit">327</span><span class="pun">,</span><span class="lit">690</span><span class="pun">,</span><span class="lit">000</span><span class="pln">      </span><span class="lit">10</span><span class="pun">,</span><span class="lit">038</span><span class="pln">  </span><span class="lit">0</span><span class="pln">   </span><span class="lit">0</span><span class="pln">          </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> c </span><span class="pun">&lt;</span><span class="pln"> arraySize</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">c</span><span class="pun">)</span><span class="pln">
           </span><span class="pun">.</span><span class="pln">           </span><span class="pun">.</span><span class="pln">  </span><span class="pun">.</span><span class="pln">   </span><span class="pun">.</span><span class="pln">          </span><span class="pun">{</span><span class="pln">
 </span><span class="lit">327</span><span class="pun">,</span><span class="lit">680</span><span class="pun">,</span><span class="lit">000</span><span class="pln"> </span><span class="lit">164</span><span class="pun">,</span><span class="lit">050</span><span class="pun">,</span><span class="lit">007</span><span class="pln">  </span><span class="lit">0</span><span class="pln">   </span><span class="lit">0</span><span class="pln">              </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">128</span><span class="pun">)</span><span class="pln">
           </span><span class="lit">0</span><span class="pln">           </span><span class="lit">0</span><span class="pln">  </span><span class="lit">0</span><span class="pln">   </span><span class="lit">0</span><span class="pln">                  sum </span><span class="pun">+=</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">];</span><span class="pln">
           </span><span class="pun">.</span><span class="pln">           </span><span class="pun">.</span><span class="pln">  </span><span class="pun">.</span><span class="pln">   </span><span class="pun">.</span><span class="pln">          </span><span class="pun">}</span><span class="pln">
           </span><span class="pun">.</span><span class="pln">           </span><span class="pun">.</span><span class="pln">  </span><span class="pun">.</span><span class="pln">   </span><span class="pun">.</span><span class="pln">      </span><span class="pun">}</span></code></pre>

<p>This lets you easily identify the problematic line - in the unsorted version the <code>if (data[c] &gt;= 128)</code> line is causing 164,050,007 mispredicted conditional branches (<code>Bcm</code>) under cachegrind's branch-predictor model, whereas it's only causing 10,006 in the sorted version.</p>

<hr>

<p>Alternatively, on Linux you can use the performance counters 
subsystem to accomplish the same task, but with native performance using
 CPU counters.</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="pln">perf stat </span><span class="pun">./</span><span class="pln">sumtest_sorted</span></code></pre>

<p><strong>Sorted:</strong></p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="pln"> </span><span class="typ">Performance</span><span class="pln"> counter stats </span><span class="kwd">for</span><span class="pln"> </span><span class="str">'./sumtest_sorted'</span><span class="pun">:</span><span class="pln">

  </span><span class="lit">11808.095776</span><span class="pln"> task</span><span class="pun">-</span><span class="pln">clock                </span><span class="com">#    0.998 CPUs utilized          </span><span class="pln">
         </span><span class="lit">1</span><span class="pun">,</span><span class="lit">062</span><span class="pln"> context</span><span class="pun">-</span><span class="pln">switches          </span><span class="com">#    0.090 K/sec                  </span><span class="pln">
            </span><span class="lit">14</span><span class="pln"> CPU</span><span class="pun">-</span><span class="pln">migrations            </span><span class="com">#    0.001 K/sec                  </span><span class="pln">
           </span><span class="lit">337</span><span class="pln"> page</span><span class="pun">-</span><span class="pln">faults               </span><span class="com">#    0.029 K/sec                  </span><span class="pln">
</span><span class="lit">26</span><span class="pun">,</span><span class="lit">487</span><span class="pun">,</span><span class="lit">882</span><span class="pun">,</span><span class="lit">764</span><span class="pln"> cycles                    </span><span class="com">#    2.243 GHz                    </span><span class="pln">
</span><span class="lit">41</span><span class="pun">,</span><span class="lit">025</span><span class="pun">,</span><span class="lit">654</span><span class="pun">,</span><span class="lit">322</span><span class="pln"> instructions              </span><span class="com">#    1.55  insns per cycle        </span><span class="pln">
 </span><span class="lit">6</span><span class="pun">,</span><span class="lit">558</span><span class="pun">,</span><span class="lit">871</span><span class="pun">,</span><span class="lit">379</span><span class="pln"> branches                  </span><span class="com">#  555.455 M/sec                  </span><span class="pln">
       </span><span class="lit">567</span><span class="pun">,</span><span class="lit">204</span><span class="pln"> branch</span><span class="pun">-</span><span class="pln">misses             </span><span class="com">#    0.01% of all branches        </span><span class="pln">

  </span><span class="lit">11.827228330</span><span class="pln"> seconds time elapsed</span></code></pre>

<p><strong>Unsorted:</strong></p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="pln"> </span><span class="typ">Performance</span><span class="pln"> counter stats </span><span class="kwd">for</span><span class="pln"> </span><span class="str">'./sumtest_unsorted'</span><span class="pun">:</span><span class="pln">

  </span><span class="lit">28877.954344</span><span class="pln"> task</span><span class="pun">-</span><span class="pln">clock                </span><span class="com">#    0.998 CPUs utilized          </span><span class="pln">
         </span><span class="lit">2</span><span class="pun">,</span><span class="lit">584</span><span class="pln"> context</span><span class="pun">-</span><span class="pln">switches          </span><span class="com">#    0.089 K/sec                  </span><span class="pln">
            </span><span class="lit">18</span><span class="pln"> CPU</span><span class="pun">-</span><span class="pln">migrations            </span><span class="com">#    0.001 K/sec                  </span><span class="pln">
           </span><span class="lit">335</span><span class="pln"> page</span><span class="pun">-</span><span class="pln">faults               </span><span class="com">#    0.012 K/sec                  </span><span class="pln">
</span><span class="lit">65</span><span class="pun">,</span><span class="lit">076</span><span class="pun">,</span><span class="lit">127</span><span class="pun">,</span><span class="lit">595</span><span class="pln"> cycles                    </span><span class="com">#    2.253 GHz                    </span><span class="pln">
</span><span class="lit">41</span><span class="pun">,</span><span class="lit">032</span><span class="pun">,</span><span class="lit">528</span><span class="pun">,</span><span class="lit">741</span><span class="pln"> instructions              </span><span class="com">#    0.63  insns per cycle        </span><span class="pln">
 </span><span class="lit">6</span><span class="pun">,</span><span class="lit">560</span><span class="pun">,</span><span class="lit">579</span><span class="pun">,</span><span class="lit">013</span><span class="pln"> branches                  </span><span class="com">#  227.183 M/sec                  </span><span class="pln">
 </span><span class="lit">1</span><span class="pun">,</span><span class="lit">646</span><span class="pun">,</span><span class="lit">394</span><span class="pun">,</span><span class="lit">749</span><span class="pln"> branch</span><span class="pun">-</span><span class="pln">misses             </span><span class="com">#   25.10% of all branches        </span><span class="pln">

  </span><span class="lit">28.935500947</span><span class="pln"> seconds time elapsed</span></code></pre>

<p>It can also do source code annotation with dissassembly.</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="pln">perf record </span><span class="pun">-</span><span class="pln">e branch</span><span class="pun">-</span><span class="pln">misses </span><span class="pun">./</span><span class="pln">sumtest_unsorted
perf annotate </span><span class="pun">-</span><span class="pln">d sumtest_unsorted</span></code></pre>



<pre class="default prettyprint prettyprinted" style=""><code><span class="pln"> </span><span class="typ">Percent</span><span class="pln"> </span><span class="pun">|</span><span class="pln">      </span><span class="typ">Source</span><span class="pln"> code </span><span class="pun">&amp;</span><span class="pln"> </span><span class="typ">Disassembly</span><span class="pln"> of sumtest_unsorted
</span><span class="pun">------------------------------------------------</span><span class="pln">
</span><span class="pun">...</span><span class="pln">
         </span><span class="pun">:</span><span class="pln">                      sum </span><span class="pun">+=</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">];</span><span class="pln">
    </span><span class="lit">0.00</span><span class="pln"> </span><span class="pun">:</span><span class="pln">        </span><span class="lit">400a1a</span><span class="pun">:</span><span class="pln">       mov    </span><span class="pun">-</span><span class="lit">0x14</span><span class="pun">(%</span><span class="pln">rbp</span><span class="pun">),%</span><span class="pln">eax
   </span><span class="lit">39.97</span><span class="pln"> </span><span class="pun">:</span><span class="pln">        </span><span class="lit">400a1d</span><span class="pun">:</span><span class="pln">       mov    </span><span class="pun">%</span><span class="pln">eax</span><span class="pun">,%</span><span class="pln">eax
    </span><span class="lit">5.31</span><span class="pln"> </span><span class="pun">:</span><span class="pln">        </span><span class="lit">400a1f</span><span class="pun">:</span><span class="pln">       mov    </span><span class="pun">-</span><span class="lit">0x20040</span><span class="pun">(%</span><span class="pln">rbp</span><span class="pun">,%</span><span class="pln">rax</span><span class="pun">,</span><span class="lit">4</span><span class="pun">),%</span><span class="pln">eax
    </span><span class="lit">4.60</span><span class="pln"> </span><span class="pun">:</span><span class="pln">        </span><span class="lit">400a26</span><span class="pun">:</span><span class="pln">       cltq   
    </span><span class="lit">0.00</span><span class="pln"> </span><span class="pun">:</span><span class="pln">        </span><span class="lit">400a28</span><span class="pun">:</span><span class="pln">       add    </span><span class="pun">%</span><span class="pln">rax</span><span class="pun">,-</span><span class="lit">0x30</span><span class="pun">(%</span><span class="pln">rbp</span><span class="pun">)</span><span class="pln">
</span><span class="pun">...</span></code></pre>

<p>See <a href="https://perf.wiki.kernel.org/index.php/Tutorial" rel="noreferrer">the performance tutorial</a> for more details.</p>
    </div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">
<div class="post-menu"><a href="https://stackoverflow.com/a/12853037" title="short permalink to this answer" class="short-link" id="link-post-12853037">share</a><span class="lsep">|</span><a href="https://stackoverflow.com/posts/12853037/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td class="post-signature" align="right">
<div class="user-info user-hover">
    <div class="user-action-time">
        <a href="https://stackoverflow.com/posts/12853037/revisions" title="show all edits to this post">edited <span title="2012-10-18 19:20:21Z" class="relativetime">Oct 18 '12 at 19:20</span></a>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/63550/peter-mortensen"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/RIZKi.png" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/63550/peter-mortensen">Peter Mortensen</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 11,359" dir="ltr">11.4k</span><span title="16 gold badges"><span class="badge1"></span><span class="badgecount">16</span></span><span title="77 silver badges"><span class="badge2"></span><span class="badgecount">77</span></span><span title="110 bronze badges"><span class="badge3"></span><span class="badgecount">110</span></span>
        </div>
    </div>
</div>    </td>
            


    <td class="post-signature" align="right">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2012-10-12 05:53:33Z" class="relativetime">Oct 12 '12 at 5:53</span>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/134633/caf"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/dc6be45ddcfd038ba5e1e5fca319c7fa.png" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/134633/caf">caf</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 169,449" dir="ltr">169k</span><span title="21 gold badges"><span class="badge1"></span><span class="badgecount">21</span></span><span title="222 silver badges"><span class="badge2"></span><span class="badgecount">222</span></span><span title="353 bronze badges"><span class="badge3"></span><span class="badgecount">353</span></span>
        </div>
    </div>
</div>
    </td>
    </tr>
    </tbody></table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-12853037" class="comments ">
		    <table>
                <tbody data-remaining-comments-count="0" data-canpost="false" data-cansee="true" data-comments-unavailable="false" data-addlink-disabled="true">



    <tr id="comment-30576818" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="supernova">40</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">This is scary, in the 
unsorted list, there should be 50% chance of hitting the add.  Somehow 
the branch prediction only has a 25% miss rate, how can it do better 
than 50% miss?</span>
                    &nbsp;<a href="https://stackoverflow.com/users/2383730/tallbrianl" title="476 reputation" class="comment-user">TallBrianL</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment30576818_12853037"><span title="2013-12-09 04:00:09Z" class="relativetime-clean">Dec 9 '13 at 4:00</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-30577316" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="supernova">73</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@tall.b.lo: The 25% is of all branches - there are <i>two</i> branches in the loop, one for <code>data[c] &gt;= 128</code> (which has a 50% miss rate as you suggest) and one for the loop condition <code>c &lt; arraySize</code> which has ~0% miss rate.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/134633/caf" title="169,449 reputation" class="comment-user">caf</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment30577316_12853037"><span title="2013-12-09 04:29:25Z" class="relativetime-clean">Dec 9 '13 at 4:29</span></a></span>
                                                                            </div>
                    </td>
    </tr>
                </tbody>
		    </table>
	    </div>

        <div id="comments-link-12853037" data-rep="50" data-anon="true">

                <a class="js-add-link comments-link disabled-link " title="Use comments to ask for more information or suggest improvements. Avoid comments like +1 or thanks.">add a comment</a><span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href="#" onclick=""></a>
        </div>         
    </td>
</tr>    </tbody></table>
</div>

  
<a name="16184827"></a>
<div id="answer-16184827" class="answer" data-answerid="16184827" itemscope="" itemtype="http://schema.org/Answer">
    <table>
        <tbody><tr>
            <td class="votecell">
                

<div class="vote">
        <input name="_id_" value="16184827" type="hidden">
        <a class="vote-up-off" title="This answer is useful">up vote</a>
        <span itemprop="upvoteCount" class="vote-count-post ">945</span>
        <a class="vote-down-off" title="This answer is not useful">down vote</a>




</div>

            </td>
            


<td class="answercell">
    <div class="post-text" itemprop="text">
<p>Just read up on the thread and I feel an answer is missing. A common 
way to eliminate branch prediction that I've found to work particularly 
good in managed languages is a table lookup instead of using a branch. 
(although I haven't tested it in this case)</p>

<p>This approach works in general if:</p>

<ol>
<li>It's a small table and is likely to be cached in the processor</li>
<li>You are running things in a quite tight loop and/or the processor can pre-load the data</li>
</ol>

<p><strong>Background and why</strong></p>

<p>Pfew, so what the hell is that supposed to mean?</p>

<p>From a processor perspective, your memory is slow. To compensate for 
the difference in speed, they build in a couple of caches in your 
processor (L1/L2 cache) that compensate for that. So imagine that you're
 doing your nice calculations and figure out that you need a piece of 
memory. The processor will get his 'load' operation and loads the piece 
of memory into cache - and then uses the cache to do the rest of the 
calculations. Because memory is relatively slow, this 'load' will slow 
down your program. </p>

<p>Like branch prediction, this was optimized in the Pentium processors:
 the processor predicts that it needs to load a piece of data and 
attempts to load that into the cache before the operation actually hits 
the cache. As we've already seen, branch prediction sometimes goes 
horribly wrong -- in the worst case scenario you need to go back and 
actually wait for a memory load, which will take forever (<strong>in other words: failing branch prediction is bad, a memory load after a branch prediction fail is just horrible!</strong>).</p>

<p>Fortunately for us, if the memory access pattern is predictable, the processor will load it in its fast cache and all is well.</p>

<p>First thing we need to know is what is <em>small</em>? While smaller 
is generally better, a rule of thumb is to stick to lookup tables that 
are &lt;=4096 bytes in size. As an upper limit: if your lookup table is 
larger than 64K it's probably worth reconsidering.</p>

<p><strong>Constructing a table</strong></p>

<p>So we've figured out that we can create a small table. Next thing to 
do is get a lookup function in place. Lookup functions are usually small
 functions that use a couple of basic integer operations (and, or, xor, 
shift, add, remove and perhaps a multiply). What you want is to have 
your input translated by the lookup function to some kind of 'unique 
key' in your table, which then simply gives you the answer of all the 
work you wanted it to do.</p>

<p>In this case: &gt;=128 means we can keep the value, &lt;128 means we 
get rid of it. The easiest way to do that is by using an 'AND': if we 
keep it, we AND it with 7FFFFFFF ; if we want to get rid of it, we AND 
it with 0. Notice also that 128 is a power of 2 -- so we can go ahead 
and make a table of 32768/128 integers and fill it with one zero and a 
lot of 7FFFFFFFF's.</p>

<p><strong>Managed languages</strong></p>

<p>You might wonder why this works well in managed languages. After all,
 managed languages check the boundaries of the arrays with a branch to 
ensure you don't mess up...</p>

<p>Well, not exactly... :-)</p>

<p>There has been quite some work on eliminating this branch for managed languages. For example:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln">array</span><span class="pun">.</span><span class="typ">Length</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln">
   </span><span class="com">// use array[i]</span></code></pre>

<p>in this case it's obvious to the compiler that the boundary condition
 will never hit. At least the Microsoft JIT compiler (but I expect Java 
does similar things) will notice this and remove the check all together.
 WOW - that means no branch. Similarly, it will deal with other obvious 
cases.</p>

<p>If you run into trouble with lookups on managed languages - the key is to add a <code>&amp; 0x[something]FFF</code> to your lookup function to make the boundary check predictable - and watch it going faster.</p>

<p><strong>The result for this case</strong></p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="com">// generate data</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> arraySize </span><span class="pun">=</span><span class="pln"> </span><span class="lit">32768</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">int</span><span class="pun">[]</span><span class="pln"> data </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">[</span><span class="pln">arraySize</span><span class="pun">];</span><span class="pln">

</span><span class="typ">Random</span><span class="pln"> rnd </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Random</span><span class="pun">(</span><span class="lit">0</span><span class="pun">);</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> c </span><span class="pun">&lt;</span><span class="pln"> arraySize</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">c</span><span class="pun">)</span><span class="pln">
    data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> rnd</span><span class="pun">.</span><span class="typ">Next</span><span class="pun">(</span><span class="lit">256</span><span class="pun">);</span><span class="pln">


</span><span class="com">// Too keep the spirit of the code in-tact I'll make a separate lookup table</span><span class="pln">
</span><span class="com">// (I assume we cannot modify 'data' or the number of loops)</span><span class="pln">
</span><span class="kwd">int</span><span class="pun">[]</span><span class="pln"> lookup </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">[</span><span class="lit">256</span><span class="pun">];</span><span class="pln">

</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> c </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">256</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">c</span><span class="pun">)</span><span class="pln">
    lookup</span><span class="pun">[</span><span class="pln">c</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">c </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">128</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> c </span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">

</span><span class="com">// test</span><span class="pln">
</span><span class="typ">DateTime</span><span class="pln"> startTime </span><span class="pun">=</span><span class="pln"> </span><span class="typ">System</span><span class="pun">.</span><span class="typ">DateTime</span><span class="pun">.</span><span class="typ">Now</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">long</span><span class="pln"> sum </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">100000</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="com">// primary loop</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> j </span><span class="pun">&lt;</span><span class="pln"> arraySize</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">j</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">{</span><span class="pln">
        </span><span class="com">// here you basically want to use simple operations - so no </span><span class="pln">
        </span><span class="com">// random branches, but things like &amp;, |, *, -, +, etc are fine.</span><span class="pln">
        sum </span><span class="pun">+=</span><span class="pln"> lookup</span><span class="pun">[</span><span class="pln">data</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]];</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="typ">DateTime</span><span class="pln"> endTime </span><span class="pun">=</span><span class="pln"> </span><span class="typ">System</span><span class="pun">.</span><span class="typ">DateTime</span><span class="pun">.</span><span class="typ">Now</span><span class="pun">;</span><span class="pln">
</span><span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="pln">endTime </span><span class="pun">-</span><span class="pln"> startTime</span><span class="pun">);</span><span class="pln">
</span><span class="typ">Console</span><span class="pun">.</span><span class="typ">WriteLine</span><span class="pun">(</span><span class="str">"sum = "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> sum</span><span class="pun">);</span><span class="pln">

</span><span class="typ">Console</span><span class="pun">.</span><span class="typ">ReadLine</span><span class="pun">();</span></code></pre>
    </div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">
<div class="post-menu"><a href="https://stackoverflow.com/a/16184827" title="short permalink to this answer" class="short-link" id="link-post-16184827">share</a><span class="lsep">|</span><a href="https://stackoverflow.com/posts/16184827/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td class="post-signature" align="right">
<div class="user-info ">
    <div class="user-action-time">
        <a href="https://stackoverflow.com/posts/16184827/revisions" title="show all edits to this post">edited <span title="2014-03-17 10:21:12Z" class="relativetime">Mar 17 '14 at 10:21</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        
        <div class="-flair">
            
        </div>
    </div>
</div>    </td>
            


    <td class="post-signature" align="right">   
       

    <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2013-04-24 06:26:28Z" class="relativetime">Apr 24 '13 at 6:26</span>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/1031591/atlaste"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/s3MiH.jpg" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/1031591/atlaste">atlaste</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 18,755" dir="ltr">18.8k</span><span title="1 gold badge"><span class="badge1"></span><span class="badgecount">1</span></span><span title="30 silver badges"><span class="badge2"></span><span class="badgecount">30</span></span><span title="51 bronze badges"><span class="badge3"></span><span class="badgecount">51</span></span>
        </div>
    </div>
</div>
    </td>
    </tr>
    </tbody></table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-16184827" class="comments ">
		    <table>
                <tbody data-remaining-comments-count="5" data-canpost="false" data-cansee="true" data-comments-unavailable="false" data-addlink-disabled="true">



    <tr id="comment-23161186" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="supernova">33</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">You want to bypass the branch-predictor, why? It's an optimization.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/706421/dustin-oprea" title="4,036 reputation" class="comment-user">Dustin Oprea</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment23161186_16184827"><span title="2013-04-24 17:50:33Z" class="relativetime-clean">Apr 24 '13 at 17:50</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-23168606" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="supernova">74</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Because no branch is better 
than a branch :-) In a lot of situations this is simply a lot faster... 
if you're optimizing, it's definitely worth a try. They also use it 
quite a bit in f.ex. <a href="http://graphics.stanford.edu/%7Eseander/bithacks.html" rel="nofollow noreferrer">graphics.stanford.edu/~seander/bithacks.html</a></span>
                    &nbsp;<a href="https://stackoverflow.com/users/1031591/atlaste" title="18,755 reputation" class="comment-user">atlaste</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment23168606_16184827"><span title="2013-04-24 21:57:13Z" class="relativetime-clean">Apr 24 '13 at 21:57</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-30989994" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="hot">15</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">In general lookup tables can 
be fast, but have you ran the tests for this particular condition? 
You'll still have a branch condition in your code, only now it's moved 
to the look up table generation part.  You still wouldn't get your perf 
boost</span>
                    &nbsp;<a href="https://stackoverflow.com/users/21539/zain-rizvi" title="11,084 reputation" class="comment-user">Zain Rizvi</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment30989994_16184827"><span title="2013-12-19 21:45:03Z" class="relativetime-clean">Dec 19 '13 at 21:45</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-31021845" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="hot">17</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@Zain if you really want to 
know... Yes: 15 seconds with the branch and 10 with my version. 
Regardless, it's a useful technique to know either way.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/1031591/atlaste" title="18,755 reputation" class="comment-user">atlaste</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment31021845_16184827"><span title="2013-12-20 18:57:29Z" class="relativetime-clean">Dec 20 '13 at 18:57</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-33971695" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="hot">21</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Why not <code>sum += lookup[data[j]]</code> where <code>lookup</code> is an array with 256 entries, the first ones being zero and the last ones being equal to the index?</span>
                    &nbsp;<a href="https://stackoverflow.com/users/1403794/kris-vandermotten" title="7,769 reputation" class="comment-user">Kris Vandermotten</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment33971695_16184827"><span title="2014-03-12 12:17:49Z" class="relativetime-clean">Mar 12 '14 at 12:17</span></a></span>
                                                                            </div>
                    </td>
    </tr>
                </tbody>
		    </table>
	    </div>

        <div id="comments-link-16184827" data-rep="50" data-anon="true">

                <a class="js-add-link comments-link  dno" title="Use comments to ask for more information or suggest improvements. Avoid comments like +1 or thanks."></a><span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link " title="expand to show all comments on this post" href="#" onclick="">show <b>5</b> more comments</a>
        </div>         
    </td>
</tr>    </tbody></table>
</div>

  
<a name="14889969"></a>
<div id="answer-14889969" class="answer" data-answerid="14889969" itemscope="" itemtype="http://schema.org/Answer">
    <table>
        <tbody><tr>
            <td class="votecell">
                

<div class="vote">
        <input name="_id_" value="14889969" type="hidden">
        <a class="vote-up-off" title="This answer is useful">up vote</a>
        <span itemprop="upvoteCount" class="vote-count-post ">845</span>
        <a class="vote-down-off" title="This answer is not useful">down vote</a>




</div>

            </td>
            


<td class="answercell">
    <div class="post-text" itemprop="text">
<p>As data is distributed between 0 and 255 when array is sorted, around
 first half of the iterations will not enter the if-statement (if 
statement shared below).</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">128</span><span class="pun">)</span><span class="pln">
    sum </span><span class="pun">+=</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">];</span></code></pre>

<p>Question is what make the above statement not execute in certain case
 as in case of sorted data? Here comes the "Branch predictor" a branch 
predictor is a digital circuit that tries to guess which way a branch 
(e.g. an if-then-else structure) will go before this is known for sure. 
The purpose of the branch predictor is to improve the flow in the 
instruction pipeline. Branch predictors play a critical role in 
achieving high effective performance!</p>

<p><strong>Lets do some bench marking to understand it better</strong></p>

<p>The performance of an if-statement depends on whether its condition 
has a predictable pattern. If the condition is always true or always 
false, the branch prediction logic in the processor will pick up the 
pattern. On the other hand, if the pattern is unpredictable, the 
if-statement will be much more expensive.</p>

<p>Lets measure the performance of this loop with different conditions:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> max</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">condition</span><span class="pun">)</span><span class="pln"> sum</span><span class="pun">++;</span></code></pre>

<p>Here are the timings of the loop with different True-False patterns:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="typ">Condition</span><span class="pln">           </span><span class="typ">Pattern</span><span class="pln">              </span><span class="typ">Time</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ms</span><span class="pun">)</span><span class="pln">

</span><span class="pun">(</span><span class="pln">i </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">0</span><span class="pun"></span><span class="lit">80000000</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln">   T repeated        </span><span class="lit">322</span><span class="pln">

</span><span class="pun">(</span><span class="pln">i </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">0xffffffff</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln">   F repeated        </span><span class="lit">276</span><span class="pln">

</span><span class="pun">(</span><span class="pln">i </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln">            TF alternating    </span><span class="lit">760</span><span class="pln">

</span><span class="pun">(</span><span class="pln">i </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln">            TFFFTFFF</span><span class="pun"></span><span class="pln">         </span><span class="lit">513</span><span class="pln">

</span><span class="pun">(</span><span class="pln">i </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln">            TTFFTTFF</span><span class="pun"></span><span class="pln">         </span><span class="lit">1675</span><span class="pln">

</span><span class="pun">(</span><span class="pln">i </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">4</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln">            TTTTFFFFTTTTFFFF</span><span class="pun"></span><span class="pln"> </span><span class="lit">1275</span><span class="pln">

</span><span class="pun">(</span><span class="pln">i </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">8</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln">            </span><span class="lit">8T</span><span class="pln"> </span><span class="lit">8F</span><span class="pln"> </span><span class="lit">8T</span><span class="pln"> </span><span class="lit">8F</span><span class="pln"> </span><span class="pun"></span><span class="pln">     </span><span class="lit">752</span><span class="pln">

</span><span class="pun">(</span><span class="pln">i </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">16</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln">           </span><span class="lit">16T</span><span class="pln"> </span><span class="lit">16F</span><span class="pln"> </span><span class="lit">16T</span><span class="pln"> </span><span class="lit">16F</span><span class="pln"> </span><span class="pun"></span><span class="pln"> </span><span class="lit">490</span></code></pre>

<p>A <strong>bad</strong> true-false pattern can make an if-statement up to six times slower than a <strong>good</strong>
 pattern! Of course, which pattern is good and which is bad depends on 
the exact instructions generated by the compiler and on the specific 
processor.</p>

<p>So there is no doubt about impact of branch prediction on performance!</p>
    </div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">
<div class="post-menu"><a href="https://stackoverflow.com/a/14889969" title="short permalink to this answer" class="short-link" id="link-post-14889969">share</a><span class="lsep">|</span><a href="https://stackoverflow.com/posts/14889969/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td class="post-signature" align="right">
<div class="user-info ">
    <div class="user-action-time">
        <a href="https://stackoverflow.com/posts/14889969/revisions" title="show all edits to this post">edited <span title="2013-03-22 12:20:10Z" class="relativetime">Mar 22 '13 at 12:20</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        
        <div class="-flair">
            
        </div>
    </div>
</div>    </td>
            


    <td class="post-signature" align="right">   
       

    <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2013-02-15 07:24:16Z" class="relativetime">Feb 15 '13 at 7:24</span>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/1012551/saqlain"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/22df608584e3ef466f34afef94f134df.png" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/1012551/saqlain">Saqlain</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 10,590" dir="ltr">10.6k</span><span title="3 gold badges"><span class="badge1"></span><span class="badgecount">3</span></span><span title="16 silver badges"><span class="badge2"></span><span class="badgecount">16</span></span><span title="29 bronze badges"><span class="badge3"></span><span class="badgecount">29</span></span>
        </div>
    </div>
</div>
    </td>
    </tr>
    </tbody></table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-14889969" class="comments ">
		    <table>
                <tbody data-remaining-comments-count="3" data-canpost="false" data-cansee="true" data-comments-unavailable="false" data-addlink-disabled="true">



    <tr id="comment-21133170" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="supernova">34</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">You don't show the timings of the "random" TF pattern.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/845092/mooing-duck" title="42,099 reputation" class="comment-user">Mooing Duck</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment21133170_14889969"><span title="2013-02-23 02:31:21Z" class="relativetime-clean">Feb 23 '13 at 2:31</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-60153643" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="warm">11</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@MooingDuck 'Cause it won't 
make a difference - that value can be anything, but it still will be in 
the bounds of these thresholds. So why show a random value when you 
already know the limits? Although I agree that you could show one for 
the sake of completeness, and 'just for the heck of it'.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/4037019/cst1992" title="981 reputation" class="comment-user">cst1992</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment60153643_14889969"><span title="2016-03-28 12:58:51Z" class="relativetime-clean">Mar 28 '16 at 12:58</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-60164274" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="warm">11</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@cst1992: Right now his 
slowest timing is TTFFTTFFTTFF, which seems, to my human eye, quite 
predictable. Random is inherently unpredictable, so it's entirely 
possible it would be slower still, and thus outside the limits shown 
here.  OTOH, it could be that TTFFTTFF perfectly hits the pathological 
case.  Can't tell, since he didn't show the timings for random.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/845092/mooing-duck" title="42,099 reputation" class="comment-user">Mooing Duck</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment60164274_14889969"><span title="2016-03-28 18:27:16Z" class="relativetime-clean">Mar 28 '16 at 18:27</span></a></span>
                        <span class="edited-yes" title="this comment was edited 2 times"></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-64383305" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="warm">7</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@MooingDuck To a human eye, 
"TTFFTTFFTTFF" is a predictable sequence, but what we are talking about 
here is the behavior of the branch predictor built into a CPU.  The 
branch predictor is not AI-level pattern recognition; it's very simple. 
 When you just alternate branches it doesn't predict well.  In most 
code, branches go the same way almost all the time; consider a loop that
 executes a thousand times.  The branch at the end of the loop goes back
 to the start of the loop 999 times, and then the thousandth time does 
something different.  A very simple branch predictor works well, 
usually.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/166949/steveha" title="45,243 reputation" class="comment-user">steveha</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment64383305_14889969"><span title="2016-07-20 21:07:37Z" class="relativetime-clean">Jul 20 '16 at 21:07</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-64383386" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="warm">8</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@steveha: I think you're 
making assumptions about how the CPU branch predictor works, and I 
disagree with that methodology. I don't know how advanced that branch 
predictor is, but I seem to think it's far more advanced than you do. 
You're probably right, but measurements would definitely be good.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/845092/mooing-duck" title="42,099 reputation" class="comment-user">Mooing Duck</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment64383386_14889969"><span title="2016-07-20 21:10:18Z" class="relativetime-clean">Jul 20 '16 at 21:10</span></a></span>
                                                                            </div>
                    </td>
    </tr>
                </tbody>
		    </table>
	    </div>

        <div id="comments-link-14889969" data-rep="50" data-anon="true">

                <a class="js-add-link comments-link  dno" title="Use comments to ask for more information or suggest improvements. Avoid comments like +1 or thanks."></a><span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link " title="expand to show all comments on this post" href="#" onclick="">show <b>3</b> more comments</a>
        </div>         
    </td>
</tr>    </tbody></table>
</div>

  
<a name="17782979"></a>
<div id="answer-17782979" class="answer" data-answerid="17782979" itemscope="" itemtype="http://schema.org/Answer">
    <table>
        <tbody><tr>
            <td class="votecell">
                

<div class="vote">
        <input name="_id_" value="17782979" type="hidden">
        <a class="vote-up-off" title="This answer is useful">up vote</a>
        <span itemprop="upvoteCount" class="vote-count-post ">792</span>
        <a class="vote-down-off" title="This answer is not useful">down vote</a>




</div>

            </td>
            


<td class="answercell">
    <div class="post-text" itemprop="text">
<p>One way to avoid branch prediction errors is to build a lookup table,
 and index it using the data.  Stefan de Bruijn discussed that in his 
answer.</p>

<p>But in this case, we know values are in the range [0, 255] and we 
only care about values &gt;= 128.  That means we can easily extract a 
single bit that will tell us whether we want a value or not: by shifting
 the data to the right 7 bits, we are left with a 0 bit or a 1 bit, and 
we only want to add the value when we have a 1 bit.  Let's call this bit
 the "decision bit".</p>

<p>By using the 0/1 value of the decision bit as an index into an array,
 we can make code that will be equally fast whether the data is sorted 
or not sorted.  Our code will always add a value, but when the decision 
bit is 0, we will add the value somewhere we don't care about.  Here's 
the code:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="com">// Test</span><span class="pln">
</span><span class="typ">clock_t</span><span class="pln"> start </span><span class="pun">=</span><span class="pln"> clock</span><span class="pun">();</span><span class="pln">
</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> a</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">};</span><span class="pln">
</span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> sum</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">100000</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="com">// Primary loop</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> c </span><span class="pun">&lt;</span><span class="pln"> arraySize</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">c</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">int</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;&gt;</span><span class="pln"> </span><span class="lit">7</span><span class="pun">);</span><span class="pln">
        a</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+=</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">];</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">double</span><span class="pln"> elapsedTime </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">static_cast</span><span class="str">&lt;double&gt;</span><span class="pun">(</span><span class="pln">clock</span><span class="pun">()</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> start</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> CLOCKS_PER_SEC</span><span class="pun">;</span><span class="pln">
sum </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">1</span><span class="pun">];</span></code></pre>

<p>This code wastes half of the adds, but never has a branch prediction 
failure.  It's tremendously faster on random data than the version with 
an actual if statement.</p>

<p>But in my testing, an explicit lookup table was slightly faster than 
this, probably because indexing into a lookup table was slightly faster 
than bit shifting.  This shows how my code sets up and uses the lookup 
table (unimaginatively called <code>lut</code> for "LookUp Table" in the code).  Here's the C++ code:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="com">// declare and then fill in the lookup table</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> lut</span><span class="pun">[</span><span class="lit">256</span><span class="pun">];</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> c </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">256</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">c</span><span class="pun">)</span><span class="pln">
    lut</span><span class="pun">[</span><span class="pln">c</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">c </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">128</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> c </span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">

</span><span class="com">// use the lookup table after it is built</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">100000</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="com">// Primary loop</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">unsigned</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> c </span><span class="pun">&lt;</span><span class="pln"> arraySize</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">c</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">{</span><span class="pln">
        sum </span><span class="pun">+=</span><span class="pln"> lut</span><span class="pun">[</span><span class="pln">data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">]];</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>

<p>In this case the lookup table was only 256 bytes, so it fit nicely in
 cache and all was fast.  This technique wouldn't work well if the data 
was 24-bit values and we only wanted half of them... the lookup table 
would be far too big to be practical.  On the other hand, we can combine
 the two techniques shown above: first shift the bits over, then index a
 lookup table.  For a 24-bit value that we only want the top half value,
 we could potentially shift the data right by 12 bits, and be left with a
 12-bit value for a table index.  A 12-bit table index implies a table 
of 4096 values, which might be practical.</p>

<p>EDIT: One thing I forgot to put in.</p>

<p>The technique of indexing into an array, instead of using an <code>if</code>
 statement, can be used for deciding which pointer to use.  I saw a 
library that implemented binary trees, and instead of having two named 
pointers (<code>pLeft</code> and <code>pRight</code> or whatever) had a 
length-2 array of pointers, and used the "decision bit" technique to 
decide which one to follow.  For example, instead of:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">x </span><span class="pun">&lt;</span><span class="pln"> node</span><span class="pun">-&gt;</span><span class="pln">value</span><span class="pun">)</span><span class="pln">
    node </span><span class="pun">=</span><span class="pln"> node</span><span class="pun">-&gt;</span><span class="pln">pLeft</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">else</span><span class="pln">
    node </span><span class="pun">=</span><span class="pln"> node</span><span class="pun">-&gt;</span><span class="pln">pRight</span><span class="pun">;</span></code></pre>

<p>this library would do something like:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="pln">i </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">x </span><span class="pun">&lt;</span><span class="pln"> node</span><span class="pun">-&gt;</span><span class="pln">value</span><span class="pun">);</span><span class="pln">
node </span><span class="pun">=</span><span class="pln"> node</span><span class="pun">-&gt;</span><span class="pln">link</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></code></pre>

<p>Here's a link to this code: <a href="http://www.eternallyconfuzzled.com/tuts/datastructures/jsw_tut_rbtree.aspx">Red Black Trees</a>, <em>Eternally Confuzzled</em></p>
    </div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">
<div class="post-menu"><a href="https://stackoverflow.com/a/17782979" title="short permalink to this answer" class="short-link" id="link-post-17782979">share</a><span class="lsep">|</span><a href="https://stackoverflow.com/posts/17782979/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td class="post-signature" align="right">
<div class="user-info user-hover">
    <div class="user-action-time">
        <a href="https://stackoverflow.com/posts/17782979/revisions" title="show all edits to this post">edited <span title="2015-08-23 19:12:22Z" class="relativetime">Aug 23 '15 at 19:12</span></a>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/25847/mark-rogers"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/34d142b034e7b194fc1708f3b20d9568.jpeg" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/25847/mark-rogers">Mark Rogers</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 35,504" dir="ltr">35.5k</span><span title="12 gold badges"><span class="badge1"></span><span class="badgecount">12</span></span><span title="65 silver badges"><span class="badge2"></span><span class="badgecount">65</span></span><span title="106 bronze badges"><span class="badge3"></span><span class="badgecount">106</span></span>
        </div>
    </div>
</div>    </td>
            


    <td class="post-signature" align="right">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2013-07-22 08:29:30Z" class="relativetime">Jul 22 '13 at 8:29</span>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/166949/steveha"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/tIFie.png" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/166949/steveha">steveha</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 45,243" dir="ltr">45.2k</span><span title="12 gold badges"><span class="badge1"></span><span class="badgecount">12</span></span><span title="67 silver badges"><span class="badge2"></span><span class="badgecount">67</span></span><span title="97 bronze badges"><span class="badge3"></span><span class="badgecount">97</span></span>
        </div>
    </div>
</div>
    </td>
    </tr>
    </tbody></table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-17782979" class="comments ">
		    <table>
                <tbody data-remaining-comments-count="4" data-canpost="false" data-cansee="true" data-comments-unavailable="false" data-addlink-disabled="true">



    <tr id="comment-26185793" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="hot">18</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Right, you can also just use the bit directly and multiply (<code>data[c]&gt;&gt;7</code>
 - which is discussed somewhere here as well); I intentionally left this
 solution out, but of course you are correct. Just a small note: The 
rule of thumb for lookup tables is that if it fits in 4KB (because of 
caching), it'll work - preferably make the table as small as possible. 
For managed languages I'd push that to 64KB, for low-level languages 
like C++ and C, I'd probably reconsider (that's just my experience). 
Since <code>typeof(int) = 4</code>, I'd try to stick to max 10 bits.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/1031591/atlaste" title="18,755 reputation" class="comment-user">atlaste</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment26185793_17782979"><span title="2013-07-29 12:05:24Z" class="relativetime-clean">Jul 29 '13 at 12:05</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-26206652" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="warm">13</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">I think indexing with the 0/1
 value will probably be faster than an integer multiply, but I guess if 
performance is really critical you should profile it.  I agree that 
small lookup tables are essential to avoid cache pressure, but clearly 
if you have a bigger cache you can get away with a bigger lookup table, 
so 4KB is more a rule of thumb than a hard rule.  I think you meant <code>sizeof(int) == 4</code>?
  That would be true for 32-bit.  My two-year-old cell phone has a 32KB 
L1 cache, so even a 4K lookup table might work, especially if the lookup
 values were a byte instead of an int.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/166949/steveha" title="45,243 reputation" class="comment-user">steveha</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment26206652_17782979"><span title="2013-07-29 22:02:13Z" class="relativetime-clean">Jul 29 '13 at 22:02</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-33658701" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="warm">9</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">Possibly I'm missing something but in your <code>j</code> equals 0 or 1 method why don't you just multiply your value by <code>j</code> before adding it rather than using the array indexing (possibly should be multiplied by <code>1-j</code> rather than <code>j</code>)</span>
                    &nbsp;<a href="https://stackoverflow.com/users/2187042/richard-tingle" title="11,200 reputation" class="comment-user">Richard Tingle</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment33658701_17782979"><span title="2014-03-04 15:38:24Z" class="relativetime-clean">Mar 4 '14 at 15:38</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-34186464" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="cool">4</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@steveha Multiplication 
should be faster, I tried looking it up in the Intel books, but couldn't
 find it... either way, benchmarking also gives me that result here.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/1031591/atlaste" title="18,755 reputation" class="comment-user">atlaste</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment34186464_17782979"><span title="2014-03-18 08:45:05Z" class="relativetime-clean">Mar 18 '14 at 8:45</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-34186699" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="warm">7</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@steveha P.S.: another possible answer would be <code>int c = data[j]; sum += c &amp; -(c &gt;&gt; 7);</code> which requires no multiplications at all.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/1031591/atlaste" title="18,755 reputation" class="comment-user">atlaste</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment34186699_17782979"><span title="2014-03-18 08:52:11Z" class="relativetime-clean">Mar 18 '14 at 8:52</span></a></span>
                                                                            </div>
                    </td>
    </tr>
                </tbody>
		    </table>
	    </div>

        <div id="comments-link-17782979" data-rep="50" data-anon="true">

                <a class="js-add-link comments-link  dno" title="Use comments to ask for more information or suggest improvements. Avoid comments like +1 or thanks."></a><span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link " title="expand to show all comments on this post" href="#" onclick="">show <b>4</b> more comments</a>
        </div>         
    </td>
</tr>    </tbody></table>
</div>

  
<a name="17828251"></a>
<div id="answer-17828251" class="answer" data-answerid="17828251" itemscope="" itemtype="http://schema.org/Answer">
    <table>
        <tbody><tr>
            <td class="votecell">
                

<div class="vote">
        <input name="_id_" value="17828251" type="hidden">
        <a class="vote-up-off" title="This answer is useful">up vote</a>
        <span itemprop="upvoteCount" class="vote-count-post ">735</span>
        <a class="vote-down-off" title="This answer is not useful">down vote</a>




</div>

            </td>
            


<td class="answercell">
    <div class="post-text" itemprop="text">
<p>In the sorted case, you can do better than relying on successful 
branch prediction or any branchless comparison trick: completely remove 
the branch.</p>

<p>Indeed, the array is partitioned in a contiguous zone with <code>data &lt; 128</code> and another with <code>data &gt;= 128</code>. So you should find the partition point with a dichotomic search (using <code>Lg(arraySize) = 15</code> comparisons), then do a straight accumulation from that point.</p>

<p>Something like (unchecked)</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> j</span><span class="pun">,</span><span class="pln"> k</span><span class="pun">=</span><span class="pln"> arraySize</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">&lt;</span><span class="pln"> k</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
  j</span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">+</span><span class="pln"> k</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">128</span><span class="pun">)</span><span class="pln">
    k</span><span class="pun">=</span><span class="pln"> j</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">else</span><span class="pln">
    i</span><span class="pun">=</span><span class="pln"> j</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
sum</span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> arraySize</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln">
  sum</span><span class="pun">+=</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></code></pre>

<p>or, slightly more obfuscated</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">int</span><span class="pln"> i</span><span class="pun">,</span><span class="pln"> k</span><span class="pun">,</span><span class="pln"> j</span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">+</span><span class="pln"> k</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i</span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> k</span><span class="pun">=</span><span class="pln"> arraySize</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> k</span><span class="pun">;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">128</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> k </span><span class="pun">:</span><span class="pln"> i</span><span class="pun">)=</span><span class="pln"> j</span><span class="pun">)</span><span class="pln">
  j</span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i </span><span class="pun">+</span><span class="pln"> k</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln">sum</span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> arraySize</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln">
  sum</span><span class="pun">+=</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></code></pre>

<p>A yet faster approach, that gives an <strong>approximate</strong> solution for both sorted or unsorted is: <code>sum= 3137536;</code> (assuming a truly uniform distribution, 16384 samples with expected value 191.5) <strong>:-)</strong></p>
    </div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">
<div class="post-menu"><a href="https://stackoverflow.com/a/17828251" title="short permalink to this answer" class="short-link" id="link-post-17828251">share</a><span class="lsep">|</span><a href="https://stackoverflow.com/posts/17828251/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td class="post-signature" align="right">
<div class="user-info ">
    <div class="user-action-time">
        <a href="https://stackoverflow.com/posts/17828251/revisions" title="show all edits to this post">edited <span title="2015-04-22 21:07:24Z" class="relativetime">Apr 22 '15 at 21:07</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        
        <div class="-flair">
            
        </div>
    </div>
</div>    </td>
            


    <td class="post-signature" align="right">   
       

    <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2013-07-24 07:57:39Z" class="relativetime">Jul 24 '13 at 7:57</span>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/1196549/yves-daoust"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/fa597bf0dc47449a25e1f7f5b57e3ef1.png" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/1196549/yves-daoust">Yves Daoust</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 27,330" dir="ltr">27.3k</span><span title="3 gold badges"><span class="badge1"></span><span class="badgecount">3</span></span><span title="21 silver badges"><span class="badge2"></span><span class="badgecount">21</span></span><span title="50 bronze badges"><span class="badge3"></span><span class="badgecount">50</span></span>
        </div>
    </div>
</div>
    </td>
    </tr>
    </tbody></table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-17828251" class="comments ">
		    <table>
                <tbody data-remaining-comments-count="0" data-canpost="false" data-cansee="true" data-comments-unavailable="false" data-addlink-disabled="true">



    <tr id="comment-26040119" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="hot">18</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy"><code>sum= 3137536</code> - 
clever. That's kinda obviously not the point of the question. The 
question is clearly about explaining surprising performance 
characteristics. I'm inclined to say that the addition of doing <code>std::partition</code> instead of <code>std::sort</code> is valuable. Though the actual question extends to more than just the synthetic benchmark given.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/85371/sehe" title="232,221 reputation" class="comment-user">sehe</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment26040119_17828251"><span title="2013-07-24 16:31:30Z" class="relativetime-clean">Jul 24 '13 at 16:31</span></a></span>
                                                                            </div>
                    </td>
    </tr>
    <tr id="comment-26048383" class="comment ">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class=" comment-score">
                                <span title="number of 'useful comment' votes received" class="warm">9</span>
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
                <span class="comment-copy">@DeadMG: this is indeed not 
the standard dichotomic search for a given key, but a search for the 
partitioning index; it requires a single compare per iteration. But 
don't rely on this code, I have not checked it. If you are interested in
 a guaranteed correct implementation, let me know.</span>
                    &nbsp;<a href="https://stackoverflow.com/users/1196549/yves-daoust" title="27,330 reputation" class="comment-user">Yves Daoust</a>
                <span class="comment-date" dir="ltr"><a class="comment-link" href="#comment26048383_17828251"><span title="2013-07-24 20:37:31Z" class="relativetime-clean">Jul 24 '13 at 20:37</span></a></span>
                                                                            </div>
                    </td>
    </tr>
                </tbody>
		    </table>
	    </div>

        <div id="comments-link-17828251" data-rep="50" data-anon="true">

                <a class="js-add-link comments-link disabled-link " title="Use comments to ask for more information or suggest improvements. Avoid comments like +1 or thanks.">add a comment</a><span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href="#" onclick=""></a>
        </div>         
    </td>
</tr>    </tbody></table>
</div>

  
<a name="31210295"></a>
<div id="answer-31210295" class="answer" data-answerid="31210295" itemscope="" itemtype="http://schema.org/Answer">
    <table>
        <tbody><tr>
            <td class="votecell">
                

<div class="vote">
        <input name="_id_" value="31210295" type="hidden">
        <a class="vote-up-off" title="This answer is useful">up vote</a>
        <span itemprop="upvoteCount" class="vote-count-post ">513</span>
        <a class="vote-down-off" title="This answer is not useful">down vote</a>




</div>

            </td>
            


<td class="answercell">
    <div class="post-text" itemprop="text">
<p>The above behavior is happening because of Branch prediction.</p>

<p>To understand branch prediction one must first understand <strong>Instruction Pipeline</strong>:</p>

<p>Any instruction is broken into sequence of steps so that different 
steps can be executed concurrently in parallel. This technique is known 
as instruction pipeline and this is used to increase throughput in 
modern processors. To understand this better please see this <a href="https://en.wikipedia.org/wiki/Pipeline_%28computing%29#Concept_and_motivation" rel="noreferrer">example on Wikipedia</a>.</p>

<p>Generally modern processors have quite long pipelines, but for ease let's consider these 4 steps only.</p>

<ol>  
  <li>IF -- Fetch the instruction from memory 
  </li><li>ID -- Decode the instruction
  </li><li>EX -- Execute the instruction 
  </li><li>WB -- Write back to CPU register
</li></ol>

<p><strong><em>4-stage pipeline in general for 2 instructions.</em></strong>
<img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/PqBBR.png" alt="4-stage pipeline in general"></p>

<p>Moving back to the above question let's consider the following instructions:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="pln">                        A</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">128</span><span class="pun">)</span><span class="pln">
                                </span><span class="pun">/</span><span class="pln">\
                               </span><span class="pun">/</span><span class="pln">  \
                              </span><span class="pun">/</span><span class="pln">    \
                        </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">/</span><span class="pln">      \ </span><span class="kwd">false</span><span class="pln">
                            </span><span class="pun">/</span><span class="pln">        \
                           </span><span class="pun">/</span><span class="pln">          \
                          </span><span class="pun">/</span><span class="pln">            \
                         </span><span class="pun">/</span><span class="pln">              \
              B</span><span class="pun">)</span><span class="pln"> sum </span><span class="pun">+=</span><span class="pln"> data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">];</span><span class="pln">          C</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> loop </span><span class="kwd">or</span><span class="pln"> </span><span class="kwd">print</span><span class="pun">().</span></code></pre>

<p>Without branch prediction the following would occur:</p>

<p>To execute instruction B or instruction C the processor will have to 
wait till the instruction A doesn't reach till EX stage in the pipeline,
 as the decision to go to instruction B or instruction C depends on the 
result of instruction A. So the pipeline will look like this.</p>

<p><strong><em>when if condition returns true:</em></strong>
<img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/0H4gP.png" alt="enter image description here"></p>

<p><strong><em>When if condition returns false:</em></strong>
<img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/APpca.png" alt="enter image description here"></p>

<p>As a result of waiting for the result of instruction A, the total CPU
 cycles spent in the above case (without branch prediction; for both 
true and false) is 7.</p>

<p><strong>So what is branch prediction?</strong></p>

<p>Branch predictor will tries to guess which way a branch (an 
if-then-else structure) will go before this is known for sure. It will 
not wait for the instruction A to reach the EX stage of the pipeline, 
but it will guess the decision and go onto that instruction (B or C in 
case of our example).</p>

<p><strong><em>In case of a correct guess, the pipeline looks something like this:</em></strong>
<img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/ZYUbs.png" alt="enter image description here"></p>

<p>If it is later detected that the guess was wrong then the partially 
executed instructions are discarded and the pipeline starts over with 
the correct branch, incurring a delay. 
The time that is wasted in case of a branch misprediction is equal to 
the number of stages in the pipeline from the fetch stage to the execute
 stage. Modern microprocessors tend to have quite long pipelines so that
 the misprediction delay is between 10 and 20 clock cycles. The longer 
the pipeline the greater the need for a good <a href="https://en.wikipedia.org/wiki/Branch_predictor" rel="noreferrer">branch predictor</a>.</p>

<p>In the OP's code, the first time when the conditional, the branch 
predictor does not have any information to base up prediction, so first 
time it will randomly choose the next instruction. Later in the for loop
 it can base the prediction on the history. 
For an array sorted in ascending order, there are three possibilities:</p>

<ol>
<li> All the elements are less than 128
</li><li> All the elements are greater than 128
</li><li> Some starting new elements are less than 128 and later it become greater than 128
</li></ol>

<p>Let us assume that the predictor will always assume the true branch on the first run.</p>

<p>So in the first case it will always take the true branch since 
historically all its predictions are correct.
In the 2nd case, initially it will predict wrong, but after a few 
iterations it will predict correctly.
In the 3rd case it will initially predict correctly till the elements 
are less than 128. After which it will fail for some time and the 
correct itself when it see branch prediction failure in history. </p>

<p>In all these cases the failure will be too less in number and as a 
result only few times it will need to discard the partially executed 
instructions and start over with the correct branch, resulting in less 
CPU cycles. </p>

<p>But in case of random unsorted array, the prediction will need to 
discard the partially executed instructions and start over with the 
correct branch most of the time and result in more CPU cycles compared 
to the sorted array.</p>
    </div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">
<div class="post-menu"><a href="https://stackoverflow.com/a/31210295" title="short permalink to this answer" class="short-link" id="link-post-31210295">share</a><span class="lsep">|</span><a href="https://stackoverflow.com/posts/31210295/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td class="post-signature" align="right">
<div class="user-info user-hover">
    <div class="user-action-time">
        <a href="https://stackoverflow.com/posts/31210295/revisions" title="show all edits to this post">edited <span title="2016-10-28 10:47:36Z" class="relativetime">Oct 28 '16 at 10:47</span></a>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/1372621/stacked"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/5e815f5f2d1333cd06a54e443f064428.jpeg" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/1372621/stacked">Stacked</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">2,249</span><span title="2 gold badges"><span class="badge1"></span><span class="badgecount">2</span></span><span title="27 silver badges"><span class="badge2"></span><span class="badgecount">27</span></span><span title="47 bronze badges"><span class="badge3"></span><span class="badgecount">47</span></span>
        </div>
    </div>
</div>    </td>
            


    <td class="post-signature" align="right">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2015-07-03 15:35:52Z" class="relativetime">Jul 3 '15 at 15:35</span>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/1627741/harsh-sharma"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/YXvvz.jpg" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/1627741/harsh-sharma">Harsh Sharma</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">5,478</span><span title="1 gold badge"><span class="badge1"></span><span class="badgecount">1</span></span><span title="8 silver badges"><span class="badge2"></span><span class="badgecount">8</span></span><span title="17 bronze badges"><span class="badge3"></span><span class="badgecount">17</span></span>
        </div>
    </div>
</div>
    </td>
    </tr>
    </tbody></table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-31210295" class="comments  dno">
		    <table>
                <tbody data-remaining-comments-count="0" data-canpost="false" data-cansee="true" data-comments-unavailable="false" data-addlink-disabled="true">

                        <tr><td></td><td></td></tr>
                </tbody>
		    </table>
	    </div>

        <div id="comments-link-31210295" data-rep="50" data-anon="true">

                <a class="js-add-link comments-link disabled-link " title="Use comments to ask for more information or suggest improvements. Avoid comments like +1 or thanks.">add a comment</a><span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href="#" onclick=""></a>
        </div>         
    </td>
</tr>    </tbody></table>
</div>

  
<a name="33070112"></a>
<div id="answer-33070112" class="answer" data-answerid="33070112" itemscope="" itemtype="http://schema.org/Answer">
    <table>
        <tbody><tr>
            <td class="votecell">
                

<div class="vote">
        <input name="_id_" value="33070112" type="hidden">
        <a class="vote-up-off" title="This answer is useful">up vote</a>
        <span itemprop="upvoteCount" class="vote-count-post ">468</span>
        <a class="vote-down-off" title="This answer is not useful">down vote</a>




</div>

            </td>
            


<td class="answercell">
    <div class="post-text" itemprop="text">
<p>An official answer would be from</p>

<ol>
<li><a href="https://software.intel.com/en-us/articles/avoiding-the-cost-of-branch-misprediction" rel="noreferrer">Intel - Avoiding the Cost of Branch Misprediction</a></li>
<li><a href="https://software.intel.com/en-us/articles/branch-and-loop-reorganization-to-prevent-mispredicts" rel="noreferrer">Intel - Branch and Loop Reorganization to Prevent Mispredicts</a></li>
<li><a href="https://scholar.google.com/scholar?q=branch%20prediction%20computer%20architecture&amp;hl=da&amp;as_sdt=0&amp;as_vis=1&amp;oi=scholart" rel="noreferrer">Scientific papers - branch prediction computer architecture</a></li>
<li>Books: J.L. Hennessy, D.A. Patterson: Computer architecture: a quantitative approach</li>
<li>Articles in scientific publications: T.Y. Yeh, Y.N. Patt made a lot of these on branch predictions.</li>
</ol>

<p>You can also see from this lovely <a href="https://en.wikipedia.org/wiki/Branch_predictor#/media/File:Branch_prediction_2bit_saturating_counter-dia.svg" rel="noreferrer">diagram</a> why the branch predictor gets confused.</p>

<p><a href="https://i.stack.imgur.com/pBMV2.png" rel="noreferrer"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/pBMV2.png" alt="2-bit state diagram"></a></p>

<p>Each element in the original code is a random value</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="pln">data</span><span class="pun">[</span><span class="pln">c</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> std</span><span class="pun">::</span><span class="pln">rand</span><span class="pun">()</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> </span><span class="lit">256</span><span class="pun">;</span></code></pre>

<p>so the predictor will change sides as the <code>std::rand()</code> blow.</p>

<p>On the other hand, once it's sorted, the predictor will first move 
into a state of strongly not taken and when the values change to the 
high value the predictor will in three runs through change all the way 
from strongly not taken to strongly taken.</p>

<hr>
    </div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">
<div class="post-menu"><a href="https://stackoverflow.com/a/33070112" title="short permalink to this answer" class="short-link" id="link-post-33070112">share</a><span class="lsep">|</span><a href="https://stackoverflow.com/posts/33070112/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td class="post-signature" align="right">
<div class="user-info user-hover">
    <div class="user-action-time">
        <a href="https://stackoverflow.com/posts/33070112/revisions" title="show all edits to this post">edited <span title="2017-01-31 11:39:33Z" class="relativetime">Jan 31 at 11:39</span></a>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/234175/greatwolf"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/37f386df1c4e98d9ce0350431f590f2a.png" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/234175/greatwolf">greatwolf</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score 14,892" dir="ltr">14.9k</span><span title="8 gold badges"><span class="badge1"></span><span class="badgecount">8</span></span><span title="48 silver badges"><span class="badge2"></span><span class="badgecount">48</span></span><span title="91 bronze badges"><span class="badge3"></span><span class="badgecount">91</span></span>
        </div>
    </div>
</div>    </td>
            


    <td class="post-signature" align="right">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2015-10-11 21:05:18Z" class="relativetime">Oct 11 '15 at 21:05</span>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/4013258/surt"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/1d423395e1033fa23d80a5561ab170fa.png" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/4013258/surt">Surt</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">7,146</span><span title="1 gold badge"><span class="badge1"></span><span class="badgecount">1</span></span><span title="10 silver badges"><span class="badge2"></span><span class="badgecount">10</span></span><span title="24 bronze badges"><span class="badge3"></span><span class="badgecount">24</span></span>
        </div>
    </div>
</div>
    </td>
    </tr>
    </tbody></table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-33070112" class="comments  dno">
		    <table>
                <tbody data-remaining-comments-count="0" data-canpost="false" data-cansee="true" data-comments-unavailable="false" data-addlink-disabled="true">

                        <tr><td></td><td></td></tr>
                </tbody>
		    </table>
	    </div>

        <div id="comments-link-33070112" data-rep="50" data-anon="true">

                <a class="js-add-link comments-link disabled-link " title="Use comments to ask for more information or suggest improvements. Avoid comments like +1 or thanks.">add a comment</a><span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href="#" onclick=""></a>
        </div>         
    </td>
</tr>    </tbody></table>
</div>

  
<a name="32742980"></a>
<div id="answer-32742980" class="answer" data-answerid="32742980" itemscope="" itemtype="http://schema.org/Answer">
    <table>
        <tbody><tr>
            <td class="votecell">
                

<div class="vote">
        <input name="_id_" value="32742980" type="hidden">
        <a class="vote-up-off" title="This answer is useful">up vote</a>
        <span itemprop="upvoteCount" class="vote-count-post ">437</span>
        <a class="vote-down-off" title="This answer is not useful">down vote</a>



<div class="bounty-award-container"><span class="bounty-award" title="This answer has been awarded bounties worth 100 reputation by ArtEze">+100</span></div>
</div>

            </td>
            


<td class="answercell">
    <div class="post-text" itemprop="text">
<p>In the same line (I think this was not highlighted by any answer) 
it's good to mention that sometimes (specially in software where the 
performance matterslike in the Linux kernel) you can find some if 
statements like the following:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">likely</span><span class="pun">(</span><span class="pln"> everything_is_ok </span><span class="pun">))</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="com">/* Do something */</span><span class="pln">
</span><span class="pun">}</span></code></pre>

<p>or similarly:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">unlikely</span><span class="pun">(</span><span class="pln">very_improbable_condition</span><span class="pun">))</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="com">/* Do something */</span><span class="pln">    
</span><span class="pun">}</span></code></pre>

<p>Both <code>likely()</code> and <code>unlikely()</code> are in fact macros that are defined by using something like the GCC's <code>__builtin_expect</code>
 to help the compiler insert prediction code to favour the condition 
taking into account the information provided by the user. GCC supports 
other builtins that could change the behavior of the running program or 
emit low level instructions like clearing the cache, etc. See <a href="https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html" rel="noreferrer">this documentation</a> that goes through the available GCC's builtins.</p>

<p>Normally this kind of optimizations are mainly found in hard-real 
time applications or embedded systems where execution time matters and 
it's critical. For example, if you are checking for some error condition
 that only happens 1/10000000 times, then why not inform the compiler 
about this? This way, by default, the branch prediction would assume 
that the condition is false.</p>
    </div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">
<div class="post-menu"><a href="https://stackoverflow.com/a/32742980" title="short permalink to this answer" class="short-link" id="link-post-32742980">share</a><span class="lsep">|</span><a href="https://stackoverflow.com/posts/32742980/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td class="post-signature" align="right">
<div class="user-info user-hover">
    <div class="user-action-time">
        <a href="https://stackoverflow.com/posts/32742980/revisions" title="show all edits to this post">edited <span title="2016-10-28 10:28:11Z" class="relativetime">Oct 28 '16 at 10:28</span></a>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/1372621/stacked"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/5e815f5f2d1333cd06a54e443f064428.jpeg" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/1372621/stacked">Stacked</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">2,249</span><span title="2 gold badges"><span class="badge1"></span><span class="badgecount">2</span></span><span title="27 silver badges"><span class="badge2"></span><span class="badgecount">27</span></span><span title="47 bronze badges"><span class="badge3"></span><span class="badgecount">47</span></span>
        </div>
    </div>
</div>    </td>
            


    <td class="post-signature" align="right">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2015-09-23 14:57:47Z" class="relativetime">Sep 23 '15 at 14:57</span>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/1313233/redobot"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/hBeXC.png" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/1313233/redobot">redobot</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">6,992</span><span title="2 gold badges"><span class="badge1"></span><span class="badgecount">2</span></span><span title="17 silver badges"><span class="badge2"></span><span class="badgecount">17</span></span><span title="30 bronze badges"><span class="badge3"></span><span class="badgecount">30</span></span>
        </div>
    </div>
</div>
    </td>
    </tr>
    </tbody></table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-32742980" class="comments  dno">
		    <table>
                <tbody data-remaining-comments-count="0" data-canpost="false" data-cansee="true" data-comments-unavailable="false" data-addlink-disabled="true">

                        <tr><td></td><td></td></tr>
                </tbody>
		    </table>
	    </div>

        <div id="comments-link-32742980" data-rep="50" data-anon="true">

                <a class="js-add-link comments-link disabled-link " title="Use comments to ask for more information or suggest improvements. Avoid comments like +1 or thanks.">add a comment</a><span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href="#" onclick=""></a>
        </div>         
    </td>
</tr>    </tbody></table>
</div>

  
<a name="33048998"></a>
<div id="answer-33048998" class="answer" data-answerid="33048998" itemscope="" itemtype="http://schema.org/Answer">
    <table>
        <tbody><tr>
            <td class="votecell">
                

<div class="vote">
        <input name="_id_" value="33048998" type="hidden">
        <a class="vote-up-off" title="This answer is useful">up vote</a>
        <span itemprop="upvoteCount" class="vote-count-post ">420</span>
        <a class="vote-down-off" title="This answer is not useful">down vote</a>



<div class="bounty-award-container"><span class="bounty-award" title="This answer has been awarded bounties worth 25 reputation by Community">+25</span></div>
</div>

            </td>
            


<td class="answercell">
    <div class="post-text" itemprop="text">
<p>Frequently used Boolean operations in C++ produce many branches in 
compiled program. If these branches are inside loops and are hard to 
predict they can slow down execution significantly. Boolean variables 
are stored as 8-bit integers with the value <code>0</code> for <code>false</code> and <code>1</code> for <code>true</code>.</p>

<p>Boolean variables are overdetermined in the sense that all operators 
that have Boolean variables as input check if the inputs have any other 
value than <code>0</code> or <code>1</code>, but operators that have Booleans as output can produce no other value than <code>0</code> or <code>1</code>. This makes operations with Boolean variables as input less efficient than necessary.
Consider example:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">bool</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">,</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> d</span><span class="pun">;</span><span class="pln">
c </span><span class="pun">=</span><span class="pln"> a </span><span class="pun">&amp;&amp;</span><span class="pln"> b</span><span class="pun">;</span><span class="pln">
d </span><span class="pun">=</span><span class="pln"> a </span><span class="pun">||</span><span class="pln"> b</span><span class="pun">;</span></code></pre>

<p>This is typically implemented by the compiler in the following way:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">bool</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">,</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> d</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">b </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">goto</span><span class="pln"> CFALSE</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    CFALSE</span><span class="pun">:</span><span class="pln">
    c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">b </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        d </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">goto</span><span class="pln"> DTRUE</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    DTRUE</span><span class="pun">:</span><span class="pln">
    d </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre>

<p>This code is far from optimal. The branches may take a long time in 
case of mispredictions. The Boolean operations can be made much more 
efficient if it is known with certainty that the operands have no other 
values than <code>0</code> and <code>1</code>. The reason why the 
compiler does not make such an assumption is that the variables might 
have other values if they are uninitialized or come from unknown 
sources. The above code can be optimized if <code>a</code> and <code>b</code>
 have been initialized to valid values or if they come from operators 
that produce Boolean output. The optimized code looks like this:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">char</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> d</span><span class="pun">;</span><span class="pln">
c </span><span class="pun">=</span><span class="pln"> a </span><span class="pun">&amp;</span><span class="pln"> b</span><span class="pun">;</span><span class="pln">
d </span><span class="pun">=</span><span class="pln"> a </span><span class="pun">|</span><span class="pln"> b</span><span class="pun">;</span></code></pre>

<p><code>char</code> is used instead of <code>bool</code> in order to make it possible to use the bitwise operators (<code>&amp;</code> and <code>|</code>) instead of the Boolean operators (<code>&amp;&amp;</code> and <code>||</code>). The bitwise operators are single instructions that take only one clock cycle. The OR operator (<code>|</code>) works even if <code>a</code> and <code>b</code> have other values than <code>0</code> or <code>1</code>. The AND operator (<code>&amp;</code>) and the EXCLUSIVE OR operator (<code>^</code>) may give inconsistent results if the operands have other values than <code>0</code> and <code>1</code>.</p>

<p><code>~</code> can not be used for NOT. Instead, you can make a Boolean NOT on a variable which is known to be <code>0</code> or <code>1</code> by XOR'ing it with <code>1</code>:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">bool</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">;</span><span class="pln">
b </span><span class="pun">=</span><span class="pln"> </span><span class="pun">!</span><span class="pln">a</span><span class="pun">;</span></code></pre>

<p>can be optimized to:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">char</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">;</span><span class="pln">
b </span><span class="pun">=</span><span class="pln"> a </span><span class="pun">^</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></code></pre>

<p><code>a &amp;&amp; b</code> cannot be replaced with <code>a &amp; b</code> if <code>b</code> is an expression that should not be evaluated if <code>a</code> is <code>false</code> ( <code>&amp;&amp;</code> will not evaluate <code>b</code>, <code>&amp;</code> will). Likewise, <code>a || b</code> can not be replaced with <code>a | b</code> if <code>b</code> is an expression that should not be evaluated if <code>a</code> is <code>true</code>.</p>

<p>Using bitwise operators is more advantageous if the operands are variables than if the operands are comparisons:</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">bool</span><span class="pln"> a</span><span class="pun">;</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> z</span><span class="pun">;</span><span class="pln">
a </span><span class="pun">=</span><span class="pln"> x </span><span class="pun">&gt;</span><span class="pln"> y </span><span class="pun">&amp;&amp;</span><span class="pln"> z </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">5.0</span><span class="pun">;</span></code></pre>

<p>is optimal in most cases (unless you expect the <code>&amp;&amp;</code> expression to generate many branch mispredictions).</p>
    </div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">
<div class="post-menu"><a href="https://stackoverflow.com/a/33048998" title="short permalink to this answer" class="short-link" id="link-post-33048998">share</a><span class="lsep">|</span><a href="https://stackoverflow.com/posts/33048998/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td class="post-signature" align="right">
<div class="user-info ">
    <div class="user-action-time">
        <a href="https://stackoverflow.com/posts/33048998/revisions" title="show all edits to this post">edited <span title="2015-10-10 01:11:21Z" class="relativetime">Oct 10 '15 at 1:11</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        
        <div class="-flair">
            
        </div>
    </div>
</div>    </td>
            


    <td class="post-signature" align="right">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2015-10-10 00:30:42Z" class="relativetime">Oct 10 '15 at 0:30</span>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/4895229/maciej"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/cc00fb71bd8f252a7ec9fc4216f58c0b.png" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/4895229/maciej">Maciej</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">4,969</span><span title="2 gold badges"><span class="badge1"></span><span class="badgecount">2</span></span><span title="8 silver badges"><span class="badge2"></span><span class="badgecount">8</span></span><span title="14 bronze badges"><span class="badge3"></span><span class="badgecount">14</span></span>
        </div>
    </div>
</div>
    </td>
    </tr>
    </tbody></table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-33048998" class="comments  dno">
		    <table>
                <tbody data-remaining-comments-count="0" data-canpost="false" data-cansee="true" data-comments-unavailable="false" data-addlink-disabled="true">

                        <tr><td></td><td></td></tr>
                </tbody>
		    </table>
	    </div>

        <div id="comments-link-33048998" data-rep="50" data-anon="true">

                <a class="js-add-link comments-link disabled-link " title="Use comments to ask for more information or suggest improvements. Avoid comments like +1 or thanks.">add a comment</a><span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href="#" onclick=""></a>
        </div>         
    </td>
</tr>    </tbody></table>
</div>

  
<a name="41603849"></a>
<div id="answer-41603849" class="answer" data-answerid="41603849" itemscope="" itemtype="http://schema.org/Answer">
    <table>
        <tbody><tr>
            <td class="votecell">
                

<div class="vote">
        <input name="_id_" value="41603849" type="hidden">
        <a class="vote-up-off" title="This answer is useful">up vote</a>
        <span itemprop="upvoteCount" class="vote-count-post ">102</span>
        <a class="vote-down-off" title="This answer is not useful">down vote</a>




</div>

            </td>
            


<td class="answercell">
    <div class="post-text" itemprop="text">
<p>This question has already been answered excellently many times over. 
Still I'd like to draw the group's attention to yet another interesting 
analysis.</p>

<p>Recently this example (modified very slightly) was also used as a way
 to demonstrate how a piece of code can be profiled within the program 
itself on Windows. Along the way, the author also shows how to use the 
results to determine where the code is spending most of its time in both
 the sorted &amp; unsorted case. Finally the piece also shows how to use
 a little known feature of the HAL (Hardware Abstraction Layer) to 
determine just how much branch misprediction is happening in the 
unsorted case.</p>

<p>The link is here:
<a href="http://www.geoffchappell.com/studies/windows/km/ntoskrnl/api/ex/profile/demo.htm">http://www.geoffchappell.com/studies/windows/km/ntoskrnl/api/ex/profile/demo.htm</a></p>
    </div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">
<div class="post-menu"><a href="https://stackoverflow.com/a/41603849" title="short permalink to this answer" class="short-link" id="link-post-41603849">share</a><span class="lsep">|</span><a href="https://stackoverflow.com/posts/41603849/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td class="post-signature" align="right">
<div class="user-info ">
    <div class="user-action-time">
        <a href="https://stackoverflow.com/posts/41603849/revisions" title="show all edits to this post">edited <span title="2017-01-17 18:02:31Z" class="relativetime">Jan 17 at 18:02</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        
        <div class="-flair">
            
        </div>
    </div>
</div>    </td>
            


    <td class="post-signature" align="right">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2017-01-12 01:50:28Z" class="relativetime">Jan 12 at 1:50</span>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/601567/foreverlearning"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/354e6825881d0dbb29130bdd4c0e560e.png" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/601567/foreverlearning">ForeverLearning</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">1,714</span><span title="3 gold badges"><span class="badge1"></span><span class="badgecount">3</span></span><span title="13 silver badges"><span class="badge2"></span><span class="badgecount">13</span></span><span title="24 bronze badges"><span class="badge3"></span><span class="badgecount">24</span></span>
        </div>
    </div>
</div>
    </td>
    </tr>
    </tbody></table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-41603849" class="comments  dno">
		    <table>
                <tbody data-remaining-comments-count="0" data-canpost="false" data-cansee="true" data-comments-unavailable="false" data-addlink-disabled="true">

                        <tr><td></td><td></td></tr>
                </tbody>
		    </table>
	    </div>

        <div id="comments-link-41603849" data-rep="50" data-anon="true">

                <a class="js-add-link comments-link disabled-link " title="Use comments to ask for more information or suggest improvements. Avoid comments like +1 or thanks.">add a comment</a><span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href="#" onclick=""></a>
        </div>         
    </td>
</tr>    </tbody></table>
</div>

  
<a name="44614591"></a>
<div id="answer-44614591" class="answer" data-answerid="44614591" itemscope="" itemtype="http://schema.org/Answer">
    <table>
        <tbody><tr>
            <td class="votecell">
                

<div class="vote">
        <input name="_id_" value="44614591" type="hidden">
        <a class="vote-up-off" title="This answer is useful">up vote</a>
        <span itemprop="upvoteCount" class="vote-count-post ">43</span>
        <a class="vote-down-off" title="This answer is not useful">down vote</a>




</div>

            </td>
            


<td class="answercell">
    <div class="post-text" itemprop="text">
<p>That's for sure!...</p>

<p><strong>Branch Prediction</strong> makes the logic run slower because
 of the switching which happens in the code! It's like you going a 
straight street or a street with a lot of turning, for sure the straight
 street gonna be done faster!</p>

<p>If the array is sorted, your condition is false at the first step: <code>data[c] &gt;= 128</code>,
 then becomes a true value for the whole way to the end of the street. 
That's how you get to the end of the logic faster. on the other hand, 
using unsorted array, you need alot of turning and processing which make
 your code run slower for sure...</p>

<p>Look at the image I created for you below, which street gonna be finished faster?</p>

<p><a href="https://i.stack.imgur.com/cSmCa.jpg" rel="noreferrer"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/cSmCa.jpg" alt="Branch Prediction"></a></p>

<p>So programmatically, <strong>Branch Prediction</strong> causes the process be slower...</p>

<p>Also at the end, it's good to know we have 2 kinds of branch predictions that each gonna effects your code differently:</p>

<p><strong>1. static</strong></p>

<p><strong>2. dynamic</strong></p>

<p><a href="https://i.stack.imgur.com/ZfhDu.jpg" rel="noreferrer"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/ZfhDu.jpg" alt="enter image description here"></a></p>

<blockquote>
  <p>Static branch prediction is used by the microprocessor the first time
  a conditional branch is encountered, and dynamic branch prediction is
  used for succeeding executions of the conditional branch code.</p>
  
  <p>In order to effectively write your code to take advantage of these
  rules, when writing <strong>if-else</strong> or <strong>switch</strong> statements, check the most
  common cases first and work progressively down to the least common.
  Loops do not necessarily require any special ordering of code for
  static branch prediction, as only the condition of the loop iterator
  is normally used.</p>
</blockquote>
    </div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">
<div class="post-menu"><a href="https://stackoverflow.com/a/44614591" title="short permalink to this answer" class="short-link" id="link-post-44614591">share</a><span class="lsep">|</span><a href="https://stackoverflow.com/posts/44614591/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td class="post-signature" align="right">
<div class="user-info ">
    <div class="user-action-time">
        <a href="https://stackoverflow.com/posts/44614591/revisions" title="show all edits to this post">edited <span title="2017-08-08 13:37:19Z" class="relativetime">Aug 8 at 13:37</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        
        <div class="-flair">
            
        </div>
    </div>
</div>    </td>
            


    <td class="post-signature" align="right">   
       

    <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2017-06-18 11:40:43Z" class="relativetime">Jun 18 at 11:40</span>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/5423108/alireza"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/WtfBG.png" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/5423108/alireza">Alireza</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">6,374</span><span title="4 gold badges"><span class="badge1"></span><span class="badgecount">4</span></span><span title="47 silver badges"><span class="badge2"></span><span class="badgecount">47</span></span><span title="48 bronze badges"><span class="badge3"></span><span class="badgecount">48</span></span>
        </div>
    </div>
</div>
    </td>
    </tr>
    </tbody></table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-44614591" class="comments  dno">
		    <table>
                <tbody data-remaining-comments-count="0" data-canpost="false" data-cansee="true" data-comments-unavailable="false" data-addlink-disabled="true">

                        <tr><td></td><td></td></tr>
                </tbody>
		    </table>
	    </div>

        <div id="comments-link-44614591" data-rep="50" data-anon="true">

                <a class="js-add-link comments-link disabled-link " title="Use comments to ask for more information or suggest improvements. Avoid comments like +1 or thanks.">add a comment</a><span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href="#" onclick=""></a>
        </div>         
    </td>
</tr>    </tbody></table>
</div>

  
<a name="45503985"></a>
<div id="answer-45503985" class="answer" data-answerid="45503985" itemscope="" itemtype="http://schema.org/Answer">
    <table>
        <tbody><tr>
            <td class="votecell">
                

<div class="vote">
        <input name="_id_" value="45503985" type="hidden">
        <a class="vote-up-off" title="This answer is useful">up vote</a>
        <span itemprop="upvoteCount" class="vote-count-post ">12</span>
        <a class="vote-down-off" title="This answer is not useful">down vote</a>




</div>

            </td>
            


<td class="answercell">
    <div class="post-text" itemprop="text">
<p><strong>Branch-prediction gain!</strong>. It is important to 
understand, branch misprediction doesn't slow down programs. Cost of 
missed prediction is just as if branch prediction didn't exist and you 
waited for the evaluation of the expression to decide what code to run 
(further explanation in the next paragraph).</p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">expression</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="com">// run 1</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// run 2</span><span class="pln">
</span><span class="pun">}</span></code></pre>

<p><br>Whenever there's an <code>if-else</code> \ <code>switch</code> 
statement, the expression has to be evaluated to determine which block 
should be executed. In the assembly code generated by the compiler, 
conditional <a href="https://en.wikipedia.org/wiki/Branch_%28computer_science%29" rel="noreferrer">branch</a>
 instructions are inserted. A branch instruction can cause a computer to
 begin executing a different instruction sequence and thus deviate from 
its default behavior of executing instructions in order (i.e. if the 
expression is false, the program skips the code of the <code>if</code> block) depending on some condition, which is the expression evaluation in our case.</p>

<p>That being said, the compiler tries to predict the outcome prior to 
it being actually evaluated. It will fetch instructions from the <code>if</code>
 block, if the expression turns out to be true, then wonderful! we 
gained the time it took to evaluate it and made progress in the code, if
 not then we are running the wrong code, the pipeline is flushed and the
 correct block is run. </p>

<p><strong>Visualization:</strong>
Lets say you need to pick route 1 or route 2. Waiting for your partner 
to check the map, you have stopped at ## and waited, or you could just 
pick route1 and if you were lucky (route 1 is the correct route), then 
great you didn't have to wait for your partner to check the map (you 
saved the time it would have taken him to check the map), otherwise you 
will just turn back. While flushing pipelines is super fast now-a-day 
taking this gamble is worthy. Predicting sorted data or a data that 
changes slowly is always easier and better than predicting fast changes.
 </p>

<pre class="default prettyprint prettyprinted" style=""><code><span class="pln"> O       route1  </span><span class="pun">/-------------------------------</span><span class="pln">
</span><span class="pun">/|</span><span class="pln">\             </span><span class="pun">/</span><span class="pln">
 </span><span class="pun">|</span><span class="pln">  </span><span class="pun">---------#</span><span class="com">#/    </span><span class="pln">
</span><span class="pun">/</span><span class="pln"> \            \ 
                \
         route2  \-</span><span class="pun">-------------------------------</span></code></pre>
    </div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">
<div class="post-menu"><a href="https://stackoverflow.com/a/45503985" title="short permalink to this answer" class="short-link" id="link-post-45503985">share</a><span class="lsep">|</span><a href="https://stackoverflow.com/posts/45503985/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td class="post-signature" align="right">
<div class="user-info ">
    <div class="user-action-time">
        <a href="https://stackoverflow.com/posts/45503985/revisions" title="show all edits to this post">edited <span title="2017-08-04 18:12:25Z" class="relativetime">Aug 4 at 18:12</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        
        <div class="-flair">
            
        </div>
    </div>
</div>    </td>
            


    <td class="post-signature" align="right">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2017-08-04 10:07:12Z" class="relativetime">Aug 4 at 10:07</span>
    </div>
    <div class="user-gravatar32">
        <a href="https://stackoverflow.com/users/6530695/tony-tannous"><div class="gravatar-wrapper-32"><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/LFCbo.jpg" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="https://stackoverflow.com/users/6530695/tony-tannous">Tony Tannous</a>
        <div class="-flair">
            <span class="reputation-score" title="reputation score " dir="ltr">3,350</span><span title="2 gold badges"><span class="badge1"></span><span class="badgecount">2</span></span><span title="11 silver badges"><span class="badge2"></span><span class="badgecount">11</span></span><span title="40 bronze badges"><span class="badge3"></span><span class="badgecount">40</span></span>
        </div>
    </div>
</div>
    </td>
    </tr>
    </tbody></table>
</td>
        </tr>
        
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-45503985" class="comments  dno">
		    <table>
                <tbody data-remaining-comments-count="0" data-canpost="false" data-cansee="true" data-comments-unavailable="false" data-addlink-disabled="true">

                        <tr><td></td><td></td></tr>
                </tbody>
		    </table>
	    </div>

        <div id="comments-link-45503985" data-rep="50" data-anon="true">

                <a class="js-add-link comments-link disabled-link " title="Use comments to ask for more information or suggest improvements. Avoid comments like +1 or thanks.">add a comment</a><span class="js-link-separator dno">&nbsp;|&nbsp;</span>
            <a class="js-show-link comments-link dno" title="expand to show all comments on this post" href="#" onclick=""></a>
        </div>         
    </td>
</tr>    </tbody></table>
</div>
                    <div class="question-status">
        <h2>                    <b>protected</b> by <a href="https://stackoverflow.com/users/102937/robert-harvey">Robert Harvey</a><span class="mod-flair" title="moderator"></span> <span dir="ltr"><span title="2014-05-02 21:51:10Z" class="relativetime">May 2 '14 at 21:51</span></span>
</h2>
        <p>
Thank you for your interest in this question. 
Because it has attracted low-quality or spam answers that had to be removed, posting an answer now requires 10 <a href="https://stackoverflow.com/help/whats-reputation">reputation</a> on this site (the <a href="https://stackoverflow.com/help/privileges/new-user">association bonus does not count</a>).
<br><br>
Would you like to answer one of these <a href="https://stackoverflow.com/unanswered?fromProtectedNotice=true">unanswered questions</a> instead?
</p>
    </div>





                        <h2 class="bottom-notice" data-loc="1">
Not the answer you're looking for?                            Browse other questions tagged <a href="https://stackoverflow.com/questions/tagged/java" class="post-tag" title="show questions tagged 'java'" rel="tag">java</a> <a href="https://stackoverflow.com/questions/tagged/c%2b%2b" class="post-tag" title="show questions tagged 'c++'" rel="tag">c++</a> <a href="https://stackoverflow.com/questions/tagged/performance" class="post-tag" title="show questions tagged 'performance'" rel="tag">performance</a> <a href="https://stackoverflow.com/questions/tagged/optimization" class="post-tag" title="show questions tagged 'optimization'" rel="tag">optimization</a> <a href="https://stackoverflow.com/questions/tagged/branch-prediction" class="post-tag" title="show questions tagged 'branch-prediction'" rel="tag">branch-prediction</a>  or <a href="https://stackoverflow.com/questions/ask">ask your own question</a>.                        </h2>
            </div>
        </div>
                <div id="sidebar" class="show-votes" role="complementary" aria-label="sidebar">
                            <div class="module question-stats">
                    <table id="qinfo">
                        <tbody><tr>
                            <td>
                                <p class="label-key">asked</p>
                            </td>
                            <td style="padding-left: 10px">
                                <p class="label-key" title="2012-06-27 13:51:36Z"><b>5 years, 1 month ago</b></p>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <p class="label-key">viewed</p>
                            </td>

                            <td style="padding-left: 10px">
                                <p class="label-key">
                                    <b>1,038,321 times</b>
                                </p>
                            </td>
                        </tr>
                            <tr>
                                <td>
                                    <p class="label-key">active</p>
                                </td>
                                <td style="padding-left: 10px">
                                    <p class="label-key"><b><a href="https://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array?lastactivity" class="lastactivity-link" title="2017-08-17 10:40:32Z">today</a></b></p>
                                </td>
                            </tr>
                    </tbody></table>
                </div>
                        
            <script>
                var ados = ados || {}; ados.run = ados.run || [];
                ados.run.push(function () { ados_add_placement(22,8277,"adzerk1796928743",[5,17,2221,1129,43]).setZone(45); });
            </script>
            <div class="everyonelovesstackoverflow adzerk-vote" id="adzerk1796928743"><div id="careersadsdoublehigh" style="display:none;"></div><div class="adzerk-vote-controls" style="display:none;"><div class="adzerk-vote-option adzerk-vote-up"><div class="adzerk-vote-icon"></div></div><div class="adzerk-vote-option adzerk-vote-down"><div class="adzerk-vote-icon"></div></div></div><div class="adzerk-vote-survey" style="display:none;"><form><span>No problem. We won't show you that ad again. Why didn't you like it?</span><ul><li><label><input value="12" name="downvoteReason" type="radio">Uninteresting</label></li><li><label><input value="13" name="downvoteReason" type="radio">Misleading</label></li><li><label><input value="14" name="downvoteReason" type="radio">Offensive</label></li><li><label><input value="15" name="downvoteReason" type="radio">Repetitive</label></li><li><label><input value="16" name="downvoteReason" type="radio">Other</label></li></ul><a href="#" class="adzerk-vote-cancel">Oops! I didn't mean to do this.</a></form></div><img style="position: absolute; display: none;" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/i.gif" class="coexmawlguhazjiueiep" border="0" width="0px" height="0px"></div>
        <div id="hireme" class="orange tagged tex2jax_ignore clc-jobs-multi"><a class="top " href="https://stackoverflow.com/jobs?allowsremote=true" target="_blank" data-clc-click="https://clc.stackoverflow.com/click?an=49rXd_rx66dXPFTPZPk5MzGxLFy6lnXPruxteo__m2YzfvS7HXA8kEGKoWcDA0ODPSMjA8tspsYH7IuWcr79JgAUTzngEH3J8ucFJ3tGtoLKkoz8vNlM95z_V32qA0tO-XrK8k6KJVxSmmn_e_a-nZyz5wmC5fefOWTJPUPPfjbTh_XsS59xNL_nB4t_zOi2zBFbawfTxyD24V3R94-y0UzzAQ&amp;cr=10439&amp;ct=1&amp;url=https%3A%2F%2Fstackoverflow.com%2Fjobs%3Fallowsremote%3Dtrue%26med=clc&amp;sig=tlg1IrlLXz5jxg"><span>Work from anywhere</span></a><div class="middle"><ul class="jobs"><li class="&quot;clc-dismissable&quot;"><div class="job-wrap"><a class="job" title="Python Developer - Web Scraping at Scrapinghub. Click to learn more." href="https://stackoverflow.com/jobs/149133/python-developer-web-scraping-scrapinghub" target="_blank" data-clc-click="https://clc.stackoverflow.com/click?an=49rXd_rx66dXPFTPZPk5MzGxLFy6lnXPruxteo__m2YzfvS7HXA8kEGKoWcDA0ODPSMjA8tspsYH7IuWcr79JgAUTzngEH3J8ucFJ3tGtoLKkoz8vNlM95z_V32qA0tO-XrK8k6KJVxSmmn_e_a-nZyz5wmC5fefOWTJPUPPfjbTh_XsS59xNL_nB4t_zOi2zBFbawfTxyD24V3R94-y0UzzAQ&amp;cr=277357&amp;ct=0&amp;url=https%3A%2F%2Fstackoverflow.com%2Fjobs%2F149133%2Fpython-developer-web-scraping-scrapinghub%3Fmed=clc&amp;sig=vd0oi5yPk0HfdA"><div class="title">Python Developer - Web Scraping</div><div><span class="company">Scrapinghub</span><span class="location">No office location</span></div><div class="opts"><span class="opt remote">Remote</span></div><span class="post-tag highlight">python</span><span class="post-tag">scrapy</span><div></div></a></div><a class="clc-dismiss" data-clc-click="https://clc.stackoverflow.com/click?an=49rXd_rx66dXPFTPZPk5MzGxLFy6lnXPruxteo__m2YzfvS7HXA8kEGKoWcDA0ODPSMjA8tspsYH7IuWcr79JgAUTzngEH3J8ucFJ3tGtoLKkoz8vNlM95z_V32qA0tO-XrK8k6KJVxSmmn_e_a-nZyz5wmC5fefOWTJPUPPfjbTh_XsS59xNL_nB4t_zOi2zBFbawfTxyD24V3R94-y0UzzAQ&amp;cr=277357&amp;ct=-1&amp;sig=ERXktXhf60XkcQ" data-clc-meta-target="-1"><span class="clc-tooltip above-left">dismiss this job</span></a></li><li class="&quot;clc-dismissable&quot;"><div class="job-wrap"><a class="job" title="Senior Software Engineer (Backend) at PT Tokopedia. Click to learn more." href="https://stackoverflow.com/jobs/122732/senior-software-engineer-backend-pt-tokopedia" target="_blank" data-clc-click="https://clc.stackoverflow.com/click?an=49rXd_rx66dXPFTPZPk5MzGxLFy6lnXPruxteo__m2YzfvS7HXA8kEGKoWcDA0ODPSMjA8tspsYH7IuWcr79JgAUTzngEH3J8ucFJ3tGtoLKkoz8vNlM95z_V32qA0tO-XrK8k6KJVxSmmn_e_a-nZyz5wmC5fefOWTJPUPPfjbTh_XsS59xNL_nB4t_zOi2zBFbawfTxyD24V3R94-y0UzzAQ&amp;cr=16242&amp;ct=0&amp;url=https%3A%2F%2Fstackoverflow.com%2Fjobs%2F122732%2Fsenior-software-engineer-backend-pt-tokopedia%3Fmed=clc&amp;sig=VSgxtnW0X7J7pw"><div class="title">Senior Software Engineer (Backend)</div><div><span class="company">PT Tokopedia</span><span class="location">Setia Budi, Indonesia</span></div><div class="opts"><span class="opt remote">Remote</span></div><span class="post-tag highlight">python</span><span class="post-tag">go</span><div></div></a></div><a class="clc-dismiss" data-clc-click="https://clc.stackoverflow.com/click?an=49rXd_rx66dXPFTPZPk5MzGxLFy6lnXPruxteo__m2YzfvS7HXA8kEGKoWcDA0ODPSMjA8tspsYH7IuWcr79JgAUTzngEH3J8ucFJ3tGtoLKkoz8vNlM95z_V32qA0tO-XrK8k6KJVxSmmn_e_a-nZyz5wmC5fefOWTJPUPPfjbTh_XsS59xNL_nB4t_zOi2zBFbawfTxyD24V3R94-y0UzzAQ&amp;cr=16242&amp;ct=-1&amp;sig=UOj0cpjkoUVfXg" data-clc-meta-target="-1"><span class="clc-tooltip above-left">dismiss this job</span></a></li><li class="&quot;clc-dismissable&quot;"><div class="job-wrap"><a class="job" title="Automation Engineers at Surge Forward. Click to learn more." href="https://stackoverflow.com/jobs/151598/automation-engineers-surge-forward" target="_blank" data-clc-click="https://clc.stackoverflow.com/click?an=49rXd_rx66dXPFTPZPk5MzGxLFy6lnXPruxteo__m2YzfvS7HXA8kEGKoWcDA0ODPSMjA8tspsYH7IuWcr79JgAUTzngEH3J8ucFJ3tGtoLKkoz8vNlM95z_V32qA0tO-XrK8k6KJVxSmmn_e_a-nZyz5wmC5fefOWTJPUPPfjbTh_XsS59xNL_nB4t_zOi2zBFbawfTxyD24V3R94-y0UzzAQ&amp;cr=282395&amp;ct=0&amp;url=https%3A%2F%2Fstackoverflow.com%2Fjobs%2F151598%2Fautomation-engineers-surge-forward%3Fmed=clc&amp;sig=8Zz2iQLsBMncsg"><div class="title">Automation Engineers</div><div><span class="company">Surge Forward</span><span class="location">No office location</span></div><div class="opts"><span class="opt remote">Remote</span></div><span class="post-tag">automation</span><span class="post-tag">protractor</span><div></div></a></div><a class="clc-dismiss" data-clc-click="https://clc.stackoverflow.com/click?an=49rXd_rx66dXPFTPZPk5MzGxLFy6lnXPruxteo__m2YzfvS7HXA8kEGKoWcDA0ODPSMjA8tspsYH7IuWcr79JgAUTzngEH3J8ucFJ3tGtoLKkoz8vNlM95z_V32qA0tO-XrK8k6KJVxSmmn_e_a-nZyz5wmC5fefOWTJPUPPfjbTh_XsS59xNL_nB4t_zOi2zBFbawfTxyD24V3R94-y0UzzAQ&amp;cr=282395&amp;ct=-1&amp;sig=SIK3CtWbmEfWCg" data-clc-meta-target="-1"><span class="clc-tooltip above-left">dismiss this job</span></a></li><li class="&quot;clc-dismissable&quot;"><div class="job-wrap"><a class="job" title="Data Engineer at Zapier. Click to learn more." href="https://stackoverflow.com/jobs/141344/data-engineer-zapier" target="_blank" data-clc-click="https://clc.stackoverflow.com/click?an=49rXd_rx66dXPFTPZPk5MzGxLFy6lnXPruxteo__m2YzfvS7HXA8kEGKoWcDA0ODPSMjA8tspsYH7IuWcr79JgAUTzngEH3J8ucFJ3tGtoLKkoz8vNlM95z_V32qA0tO-XrK8k6KJVxSmmn_e_a-nZyz5wmC5fefOWTJPUPPfjbTh_XsS59xNL_nB4t_zOi2zBFbawfTxyD24V3R94-y0UzzAQ&amp;cr=259971&amp;ct=0&amp;url=https%3A%2F%2Fstackoverflow.com%2Fjobs%2F141344%2Fdata-engineer-zapier%3Fmed=clc&amp;sig=mkpK_sh9jfFQ0w"><div class="title">Data Engineer</div><div><span class="company">Zapier</span><span class="location">No office location</span></div><div class="opts"><span class="opt remote">Remote</span></div><span class="post-tag highlight">python</span><span class="post-tag">oracle</span><div></div></a></div><a class="clc-dismiss" data-clc-click="https://clc.stackoverflow.com/click?an=49rXd_rx66dXPFTPZPk5MzGxLFy6lnXPruxteo__m2YzfvS7HXA8kEGKoWcDA0ODPSMjA8tspsYH7IuWcr79JgAUTzngEH3J8ucFJ3tGtoLKkoz8vNlM95z_V32qA0tO-XrK8k6KJVxSmmn_e_a-nZyz5wmC5fefOWTJPUPPfjbTh_XsS59xNL_nB4t_zOi2zBFbawfTxyD24V3R94-y0UzzAQ&amp;cr=259971&amp;ct=-1&amp;sig=nNFJfil_V1CzWA" data-clc-meta-target="-1"><span class="clc-tooltip above-left">dismiss this job</span></a></li></ul></div><img src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/impression.gif" class="impression" style="display: none;"></div>
        <script>try {
;window.clc=window.clc||{},window.clc.init=window.clc.init||function(t){var
 
n=window,c=n.document;try{if("function"!=typeof[].indexOf||!window.addEventListener||!t.allowed)return;if(!RegExp(t.allowed).test(location.hostname))return;if(n.clc.options)for(var
 o in n.clc.options)t[o]=n.clc.options[o];n.clc.cmd=void 
0===n.clc.cmd?[]:n.clc.cmd,n.clc.autoload=n.clc.autoload||function(){"function"==typeof
 n.clc.load?n.clc.load():n.clc.cmd.push(function(t){return 
t.load()})};var e=t.wv;if(c.hidden&&e)return void 
c.addEventListener("visibilitychange",function 
n(){c.hidden||(window.clc.init(t),c.removeEventListener("visibilitychange",n))});t.al&&n.clc.autoload(),n.clc.options=t;var
 
i=c.createElement("script");i.async=!0,i.src=t.lib,c.body.appendChild(i)}catch(t){}},true&&(window.clc.loadDfp=window.clc.loadDfp||function(t){var
 
n=window,c="248424177",o=/^\/tags\//.test(location.pathname)||/^\/questions\/tagged\//.test(location.pathname)?"tag-pages":"question-pages",e=location.hostname,i={lb:{id:"dfp-tlb",sz:[[728,90]]},mlb:{id:"dfp-mlb",sz:[[728,90]]},sb:{id:"dfp-tsb",sz:[[300,250],[300,600]]},"tag-sponsorship":{id:"dfp-tag",sz:[[730,135]]}},a=Object.keys(i).filter(function(t){return!!document.getElementById(i[t].id)});void
 0===n.googletag&&(n.googletag={cmd:[function(){var 
d=n.googletag,l=d.pubads();a.forEach(function(t){var 
n="/"+c+"/"+e+"/"+t+"/"+o;d.defineSlot(n,i[t].sz,i[t].id).addService(l)}),l.enableSingleRequest(),t&&Object.keys(t).forEach(function(n){l.setTargeting(n,t[n])}),d.enableServices()}]});for(var
 
d=n.googletag,l=0,s=a;l<s.length;l++)!function(t){d.cmd.push(function(){var
 n=i[t].id;d.display(n)})}(s[l]);var 
r=document.createElement("script");r.async=!0,r.src="https://www.googletagservices.com/tag/js/gpt.js",document.body.appendChild(r)}),window.clc.init.call(null,
 
{"lib":"https://cdn.sstatic.net/clc/clc.min.js?v=f306cca1ad0d","u":"https://clc.stackoverflow.com/markup.js","azw":true,"kt":2000,"tto":true,"h":"clc.stackoverflow.com","allowed":"^(((talent\\.)?stackoverflow)|(blog\\.codinghorror)|(serverfault|askubuntu)|([^\\.]+\\.stackexchange))\\.com$","wv":true,"al":false});
            
window.clc_request='AmsfJOHr5dQIAAAAAKFSqwACAAAAAgAAAAA1AAAAfGphdmF8YysrfHBlcmZvcm1hbmNlfG9wdGltaXphdGlvbnxicmFuY2gtcHJlZGljdGlvbnwAxDKGBCQAmkSP1w';
 (typeof clc.autoload==='function')&&clc.autoload();             
}catch(e){typeof console.error==='function'&&console.error(e);}
        </script>
            <div id="dfp-tsb" class="dfpad"><div id="google_ads_iframe_/248424177/stackoverflow.com/sb/question-pages_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/248424177/stackoverflow.com/sb/question-pages_0" title="3rd party ad content" name="google_ads_iframe_/248424177/stackoverflow.com/sb/question-pages_0" scrolling="no" marginwidth="0" marginheight="0" style="border: 0px none; vertical-align: bottom;" srcdoc="" width="300" height="250" frameborder="0"></iframe></div></div>
                <style>.dfpad{position:absolute;height:1px;width:1px;opacity:0;top:0;left:0;pointer-events:none;}</style>
                <script>!function(){try{var 
targeting={Registered:['false'],'so-tag':['java','c_plus_plus','performance','optimization','branch-prediction']};
 (typeof 
clc.loadDfp==='function')&&clc.loadDfp(targeting);}catch(e){typeof 
console.error==='function'&&console.error(e);}}();</script>
            <div class="module" id="chat-feature">

    <h4><a href="http://chat.stackoverflow.com/" id="h-chat-link" title="35 users active in 22 rooms the last 60 minutes">35 People Chatting</a></h4>
    <div class="related" id="ad502-rooms"><div class="ad502-room"><h3 class="ad502-room-h3"><span class="ad502-room-title" title="JavaScript"><a href="http://chat.stackoverflow.com/rooms/17">JavaScript</a></span></h3><span title="2017-08-18 02:02:26Z" class="ad502-last-message">1 hour ago - <a href="http://chat.stackoverflow.com/users/203093">hsimah</a></span><br><div class="ad502-users"><a href="http://chat.stackoverflow.com/users/2203974"><img title="Arrow: 1 hour ago" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/NURaP.jpg" width="23" height="23"></a><a href="http://chat.stackoverflow.com/users/203093"><img title="hsimah: 1 hour ago" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/0uzAY.jpg" width="23" height="23"></a><a href="http://chat.stackoverflow.com/users/129032"><img title="ssube: 1 hour ago" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/e8bea8f9e6972dfd3113d67da68e6933.png" width="23" height="23"></a><a href="http://chat.stackoverflow.com/users/785745"><img title="Kendall Frey: 2 hours ago" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/f9fc3249a341a64ee2721637915cd301.jpeg" width="23" height="23"></a><a href="http://chat.stackoverflow.com/users/423491"><img title="david: 2 hours ago" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/998e7a4ffb7d648a4832787d60fd62a3.png" width="23" height="23"></a><a href="http://chat.stackoverflow.com/users/5290519"><img title="Niing: 2 hours ago" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/2c5fd065a49a1be1107868f5ac639619.png" width="23" height="23"></a><a href="http://chat.stackoverflow.com/users/1386166"><img title="phenomnomnominal: 3 hours ago" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/7ea079654bb159fdaa4043834688f57d.jpeg" width="23" height="23"></a></div></div><div class="ad502-room"><h3 class="ad502-room-h3"><span class="ad502-room-title" title="SO Close Vote Reviewers"><a href="http://chat.stackoverflow.com/rooms/41570">SO Close Vote Reviewers</a></span></h3><span title="2017-08-18 01:50:08Z" class="ad502-last-message">1 hour ago - <a href="http://chat.stackoverflow.com/users/1415724">Fred -ii-</a></span><br><div class="ad502-users"><a href="http://chat.stackoverflow.com/users/1415724"><img title="Fred -ii-: 1 hour ago" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/zErhj.jpg" width="23" height="23"></a><a href="http://chat.stackoverflow.com/users/2370483"><img title="Machavity: 2 hours ago" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/c11f2b4035a85ed55486ef537d546e92.jpeg" width="23" height="23"></a><a href="http://chat.stackoverflow.com/users/6373379"><img title="FireAlarm: 3 hours ago" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/YQ7SJ.jpg" width="23" height="23"></a><a href="http://chat.stackoverflow.com/users/1896169"><img title="Justin: 4 hours ago" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/jap8U.png" width="23" height="23"></a><a href="http://chat.stackoverflow.com/users/3773011"><img title="Makyen: 4 hours ago" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/268909707f084cf82523e616dd9df570.png" width="23" height="23"></a><a href="http://chat.stackoverflow.com/users/5211833"><img title="Adriaan: 5 hours ago" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/Pyme2.jpg" width="23" height="23"></a><a href="http://chat.stackoverflow.com/users/3735529"><img title="SmokeDetector: 6 hours ago" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/m9xyh.jpg" width="23" height="23"></a></div></div></div>
    <script>
    // <!--
        StackExchange.ready(
        function () {
            var options = {
                chatUrl: 'http://chat.stackoverflow.com',
                reloadUrl: '/api/recent-chat',
                preloadData: 
{"activeUsers":35,"activeRooms":22,"rooms":[{"name":"JavaScript","id":17,"lastPost":1503021746,"posts":4166955,"users":[{"name":"Arrow","id":2203974,"emailhash":"!https://i.stack.imgur.com/NURaP.jpg?s=128\u0026g=1","lastPost":1503023196},{"name":"hsimah","id":203093,"emailhash":"!https://i.stack.imgur.com/0uzAY.jpg?s=128\u0026g=1","lastPost":1503021746},{"name":"ssube","id":129032,"emailhash":"e8bea8f9e6972dfd3113d67da68e6933","lastPost":1503021702},{"name":"Kendall
 
Frey","id":785745,"emailhash":"f9fc3249a341a64ee2721637915cd301","lastPost":1503020651},{"name":"david","id":423491,"emailhash":"998e7a4ffb7d648a4832787d60fd62a3","lastPost":1503020601},{"name":"Niing","id":5290519,"emailhash":"2c5fd065a49a1be1107868f5ac639619","lastPost":1503020449},{"name":"phenomnomnominal","id":1386166,"emailhash":"7ea079654bb159fdaa4043834688f57d","lastPost":1503016367}],"messages":[{"date":1503021746,"user":"hsimah","userid":203093}],"singleImage":false,"tags":["ecmascript","ecmascript-6","javascript","nodejs"]},{"name":"SO
 Close Vote 
Reviewers","id":41570,"lastPost":1503021008,"posts":745034,"users":[{"name":"Fred
 
-ii-","id":1415724,"emailhash":"!https://i.stack.imgur.com/zErhj.jpg?s=128\u0026g=1","lastPost":1503021008},{"name":"Machavity","id":2370483,"emailhash":"c11f2b4035a85ed55486ef537d546e92","lastPost":1503019467},{"name":"FireAlarm","id":6373379,"emailhash":"!https://i.stack.imgur.com/YQ7SJ.jpg?s=128\u0026g=1","lastPost":1503014117},{"name":"Justin","id":1896169,"emailhash":"!https://i.stack.imgur.com/jap8U.png?s=128\u0026g=1","lastPost":1503012295},{"name":"Makyen","id":3773011,"emailhash":"268909707f084cf82523e616dd9df570","lastPost":1503010805},{"name":"Adriaan","id":5211833,"emailhash":"!https://i.stack.imgur.com/Pyme2.jpg?s=128\u0026g=1","lastPost":1503009480},{"name":"SmokeDetector","id":3735529,"emailhash":"!https://i.stack.imgur.com/m9xyh.jpg?s=128\u0026g=1","lastPost":1503003632}],"messages":[{"date":1503021008,"user":"Fred
 
-ii-","userid":1415724}],"singleImage":false,"tags":["discussion","moderation","review"]}]}
 
            };

            StackExchange.chatAd.init(options);
        });
    // -->
    </script>

</div>

            <div class="module sidebar-linked">
	<h4 id="h-linked">Linked</h4>
	<div class="linked" data-tracker="lq=1">

<div class="spacer">
	<a href="https://stackoverflow.com/q/32063235?lq=1" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes answered-accepted default">18</div>
	</a>
	<a href="https://stackoverflow.com/questions/32063235/is-in-sorted-array-not-faster-than-unsorted-array?noredirect=1&amp;lq=1" class="question-hyperlink">Is == in sorted array not faster than unsorted array?</a>
</div>
<div class="spacer">
	<a href="https://stackoverflow.com/q/29259466?lq=1" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes  default">8</div>
	</a>
	<a href="https://stackoverflow.com/questions/29259466/complexity-of-comparison-operators?noredirect=1&amp;lq=1" class="question-hyperlink">Complexity of comparison operators</a>
</div>
<div class="spacer">
	<a href="https://stackoverflow.com/q/21947452?lq=1" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes answered-accepted extra-large">2161</div>
	</a>
	<a href="https://stackoverflow.com/questions/21947452/why-is-printing-b-dramatically-slower-than-printing?noredirect=1&amp;lq=1" class="question-hyperlink">Why is printing B dramatically slower than printing #?</a>
</div>
<div class="spacer">
	<a href="https://stackoverflow.com/q/25078285?lq=1" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes answered-accepted large">920</div>
	</a>
	<a href="https://stackoverflow.com/questions/25078285/replacing-a-32-bit-loop-count-variable-with-64-bit-introduces-crazy-performance?noredirect=1&amp;lq=1" class="question-hyperlink">Replacing a 32-bit loop count variable with 64-bit introduces crazy performance deviations</a>
</div>
<div class="spacer">
	<a href="https://stackoverflow.com/q/14283270?lq=1" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes answered-accepted large">703</div>
	</a>
	<a href="https://stackoverflow.com/questions/14283270/how-to-determine-whether-my-calculation-of-pi-is-accurate?noredirect=1&amp;lq=1" class="question-hyperlink">How to determine whether my calculation of pi is accurate?</a>
</div>
<div class="spacer">
	<a href="https://stackoverflow.com/q/16699247?lq=1" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes answered-accepted large">559</div>
	</a>
	<a href="https://stackoverflow.com/questions/16699247/what-is-cache-friendly-code?noredirect=1&amp;lq=1" class="question-hyperlink">What is cache-friendly code?</a>
</div>
<div class="spacer">
	<a href="https://stackoverflow.com/q/34179968?lq=1" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes answered-accepted large">223</div>
	</a>
	<a href="https://stackoverflow.com/questions/34179968/are-there-any-cases-where-you-would-prefer-a-higher-big-o-time-complexity-algori?noredirect=1&amp;lq=1" class="question-hyperlink">Are there any cases where you would prefer a higher big-O time complexity algorithm over the lower one?</a>
</div>
<div class="spacer">
	<a href="https://stackoverflow.com/q/1978933?lq=1" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes answered-accepted large">247</div>
	</a>
	<a href="https://stackoverflow.com/questions/1978933/a-quick-and-easy-way-to-join-array-elements-with-a-separator-the-opposite-of-sp?noredirect=1&amp;lq=1" class="question-hyperlink">A quick and easy way to join array elements with a separator (the opposite of split) in Java</a>
</div>
<div class="spacer">
	<a href="https://stackoverflow.com/q/19470873?lq=1" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes answered-accepted large">322</div>
	</a>
	<a href="https://stackoverflow.com/questions/19470873/why-does-gcc-generate-15-20-faster-code-if-i-optimize-for-size-instead-of-speed?noredirect=1&amp;lq=1" class="question-hyperlink">Why does gcc generate 15-20% faster code if I optimize for size instead of speed?</a>
</div>
<div class="spacer">
	<a href="https://stackoverflow.com/q/17328641?lq=1" title="Vote score (upvotes - downvotes)">
		<div class="answer-votes answered-accepted large">224</div>
	</a>
	<a href="https://stackoverflow.com/questions/17328641/ternary-operator-is-twice-as-slow-as-an-if-else-block?noredirect=1&amp;lq=1" class="question-hyperlink">Ternary operator is twice as slow as an if-else block?</a>
</div>					<div class="spacer more">
				<a href="https://stackoverflow.com/questions/linked/11227809?lq=1">see more linked questions</a>
			</div>
	</div>
</div>

                <div class="module sidebar-related">
                    <h4 id="h-related">Related</h4>
                    <div class="related js-gps-related-questions" data-tracker="rq=1">
                        <div class="spacer js-gps-track"><a href="https://stackoverflow.com/q/8547778?rq=1" title="Vote score (upvotes - downvotes)"><div class="answer-votes answered-accepted extra-large">1790</div></a><a href="https://stackoverflow.com/questions/8547778/why-are-elementwise-additions-much-faster-in-separate-loops-than-in-a-combined-l?rq=1" class="question-hyperlink">Why are elementwise additions much faster in separate loops than in a combined loop?</a></div><div class="spacer js-gps-track"><a href="https://stackoverflow.com/q/12135518?rq=1" title="Vote score (upvotes - downvotes)"><div class="answer-votes answered-accepted extra-large">1240</div></a><a href="https://stackoverflow.com/questions/12135518/is-faster-than?rq=1" class="question-hyperlink">Is &lt; faster than &lt;=?</a></div><div class="spacer js-gps-track"><a href="https://stackoverflow.com/q/12842717?rq=1" title="Vote score (upvotes - downvotes)"><div class="answer-votes answered-accepted default">11</div></a><a href="https://stackoverflow.com/questions/12842717/why-is-processing-a-sorted-array-not-faster-than-an-unsorted-array-in-python?rq=1" class="question-hyperlink">Why is processing a sorted array not faster than an unsorted array in Python?</a></div><div class="spacer js-gps-track"><a href="https://stackoverflow.com/q/14023988?rq=1" title="Vote score (upvotes - downvotes)"><div class="answer-votes answered-accepted large">213</div></a><a href="https://stackoverflow.com/questions/14023988/why-is-processing-a-sorted-array-slower-than-an-unsorted-array?rq=1" class="question-hyperlink">Why is processing a sorted array slower than an unsorted array?</a></div><div class="spacer js-gps-track"><a href="https://stackoverflow.com/q/21947452?rq=1" title="Vote score (upvotes - downvotes)"><div class="answer-votes answered-accepted extra-large">2161</div></a><a href="https://stackoverflow.com/questions/21947452/why-is-printing-b-dramatically-slower-than-printing?rq=1" class="question-hyperlink">Why is printing B dramatically slower than printing #?</a></div><div class="spacer js-gps-track"><a href="https://stackoverflow.com/q/30216000?rq=1" title="Vote score (upvotes - downvotes)"><div class="answer-votes answered-accepted large">526</div></a><a href="https://stackoverflow.com/questions/30216000/why-is-faster-than-list?rq=1" class="question-hyperlink">Why is [] faster than list()?</a></div><div class="spacer js-gps-track"><a href="https://stackoverflow.com/q/32063235?rq=1" title="Vote score (upvotes - downvotes)"><div class="answer-votes answered-accepted default">18</div></a><a href="https://stackoverflow.com/questions/32063235/is-in-sorted-array-not-faster-than-unsorted-array?rq=1" class="question-hyperlink">Is == in sorted array not faster than unsorted array?</a></div><div class="spacer js-gps-track"><a href="https://stackoverflow.com/q/35018999?rq=1" title="Vote score (upvotes - downvotes)"><div class="answer-votes answered-accepted default">78</div></a><a href="https://stackoverflow.com/questions/35018999/why-is-processing-a-sorted-array-slower-than-an-unsorted-array-javas-arrayl?rq=1" class="question-hyperlink">Why is processing a sorted array *slower* than an unsorted array? (Java's ArrayList.indexOf)</a></div><div class="spacer js-gps-track"><a href="https://stackoverflow.com/q/35531369?rq=1" title="Vote score (upvotes - downvotes)"><div class="answer-votes answered-accepted large">316</div></a><a href="https://stackoverflow.com/questions/35531369/why-is-ab-0-faster-than-a-0-b-0-in-java?rq=1" class="question-hyperlink">Why is (a*b != 0) faster than (a != 0 &amp;&amp; b != 0) in Java?</a></div><div class="spacer js-gps-track"><a href="https://stackoverflow.com/q/40354978?rq=1" title="Vote score (upvotes - downvotes)"><div class="answer-votes answered-accepted large">446</div></a><a href="https://stackoverflow.com/questions/40354978/why-is-this-c-code-faster-than-my-hand-written-assembly-for-testing-the-collat?rq=1" class="question-hyperlink">Why is this C++ code faster than my hand-written assembly for testing the Collatz conjecture?</a></div>
                    </div>
                </div>

<div id="hot-network-questions" class="module tex2jax_ignore">
    <h4>
        <a href="https://stackexchange.com/questions?tab=hot" class="js-gps-track" data-gps-track="posts_hot_network.click({ item_type:1, location:11 })">
            Hot Network Questions
        </a>
    </h4>
    <ul>
            <li>
                <div class="favicon favicon-spanish" title="Spanish Language Stack Exchange"></div><a href="https://spanish.stackexchange.com/questions/21835/can-the-term-agua-potable-not-mean-drinkable-water" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:353 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Can the term "agua potable" not mean "drinkable water"?
                </a>

            </li>
            <li>
                <div class="favicon favicon-aviation" title="Aviation Stack Exchange"></div><a href="https://aviation.stackexchange.com/questions/43026/how-high-does-the-ground-effect-last" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:528 }); posts_hot_network.click({ item_type:2, location:11 })">
                    How high does the ground effect last?
                </a>

            </li>
            <li>
                <div class="favicon favicon-worldbuilding" title="Worldbuilding Stack Exchange"></div><a href="https://worldbuilding.stackexchange.com/questions/89086/moving-stealthy-in-an-hostile-enviroment" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:579 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Moving stealthy in an hostile enviroment
                </a>

            </li>
            <li>
                <div class="favicon favicon-travel" title="Travel Stack Exchange"></div><a href="https://travel.stackexchange.com/questions/100330/are-you-required-to-sit-in-your-assigned-seat-on-an-airplane" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:273 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Are you required to sit in your assigned seat on an airplane?
                </a>

            </li>
            <li>
                <div class="favicon favicon-mathematica" title="Mathematica Stack Exchange"></div><a href="https://mathematica.stackexchange.com/questions/153951/number-elements-in-a-list" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:387 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Number elements in a list
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-interpersonal" title="Interpersonal Skills Stack Exchange"></div><a href="https://interpersonal.stackexchange.com/questions/1804/how-to-respond-to-someone-when-they-ask-how-much-you-earn" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:680 }); posts_hot_network.click({ item_type:2, location:11 })">
                    How to respond to someone when they ask how much you earn?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-interpersonal" title="Interpersonal Skills Stack Exchange"></div><a href="https://interpersonal.stackexchange.com/questions/1952/what-is-the-correct-way-of-asking-how-someone-is-doing-in-case-of-an-accident" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:680 }); posts_hot_network.click({ item_type:2, location:11 })">
                    What is the correct way of asking "how someone is doing" in case of an accident?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-math" title="Mathematics Stack Exchange"></div><a href="https://math.stackexchange.com/questions/2397544/help-with-writing-a-paper-on-fractals" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:69 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Help with writing a paper on fractals
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-serverfault" title="Server Fault"></div><a href="https://serverfault.com/questions/868863/does-drilling-a-hole-into-a-hard-drive-suffice-to-make-its-data-unrecoverable" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:2 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Does drilling a hole into a hard drive suffice to make its data unrecoverable?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-drupal" title="Drupal Answers"></div><a href="https://drupal.stackexchange.com/questions/244021/whats-the-difference-between-using-this-ttext-and-ttext-in-a-block-pl" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:220 }); posts_hot_network.click({ item_type:2, location:11 })">
                    What's the difference between using $this-&gt;t('text') and t('text') in a block plugin
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-gaming" title="Arqade"></div><a href="https://gaming.stackexchange.com/questions/316333/what-does-aos-mean" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:41 }); posts_hot_network.click({ item_type:2, location:11 })">
                    What does AoS mean?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-worldbuilding" title="Worldbuilding Stack Exchange"></div><a href="https://worldbuilding.stackexchange.com/questions/88877/how-can-a-race-of-eldritch-abominations-help-humanity" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:579 }); posts_hot_network.click({ item_type:2, location:11 })">
                    How can a race of eldritch abominations help humanity?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-history" title="History Stack Exchange"></div><a href="https://history.stackexchange.com/questions/39639/states-calling-themselves-a-dictatorship" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:324 }); posts_hot_network.click({ item_type:2, location:11 })">
                    States calling themselves a dictatorship
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-movies" title="Movies &amp; TV Stack Exchange"></div><a href="https://movies.stackexchange.com/questions/78946/what-does-the-night-king-really-want" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:367 }); posts_hot_network.click({ item_type:2, location:11 })">
                    What does the Night King really want?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-codegolf" title="Programming Puzzles &amp; Code Golf Stack Exchange"></div><a href="https://codegolf.stackexchange.com/questions/139455/is-this-a-losing-square" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:200 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Is this a losing square?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-scifi" title="Science Fiction &amp; Fantasy Stack Exchange"></div><a href="https://scifi.stackexchange.com/questions/167406/why-didnt-harry-play-king" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:186 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Why didn't Harry play king?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-ux" title="User Experience Stack Exchange"></div><a href="https://ux.stackexchange.com/questions/110855/how-big-of-a-deal-is-blocking-copy-pasting-on-a-website" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:102 }); posts_hot_network.click({ item_type:2, location:11 })">
                    How big of a deal is blocking copy-pasting on a website?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-english" title="English Language &amp; Usage Stack Exchange"></div><a href="https://english.stackexchange.com/questions/406230/what-happened-to-the-ch-in-moschito" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:97 }); posts_hot_network.click({ item_type:2, location:11 })">
                    What happened to the ch in moschito?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-aviation" title="Aviation Stack Exchange"></div><a href="https://aviation.stackexchange.com/questions/43002/is-fuel-moved-around-during-flight-on-a-passenger-or-cargo-plane-if-so-why" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:528 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Is fuel moved around during flight on a passenger or cargo plane? If so why?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-interpersonal" title="Interpersonal Skills Stack Exchange"></div><a href="https://interpersonal.stackexchange.com/questions/1964/what-can-i-do-to-be-a-courteous-guest-when-someone-says-i-dont-need-to-bring-a" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:680 }); posts_hot_network.click({ item_type:2, location:11 })">
                    What can I do to be a courteous guest, when someone says I don't need to bring anything?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-diy" title="Home Improvement Stack Exchange"></div><a href="https://diy.stackexchange.com/questions/121602/direct-stove-kitchen-exhaust-into-kitchen-sink-drain" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:73 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Direct stove/kitchen exhaust into kitchen sink drain
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-codegolf" title="Programming Puzzles &amp; Code Golf Stack Exchange"></div><a href="https://codegolf.stackexchange.com/questions/139243/determine-your-languages-version" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:200 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Determine your language's version
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-scifi" title="Science Fiction &amp; Fantasy Stack Exchange"></div><a href="https://scifi.stackexchange.com/questions/167392/s07e05-would-this-person-be-the-rightful-heir-to-the-targaryen-throne-when-born" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:186 }); posts_hot_network.click({ item_type:2, location:11 })">
                    S07E05: Would this person be the rightful heir to 
the Targaryen throne when born even if Viserys ascended to the throne 
before their birth?
                </a>

            </li>
            <li class="dno js-hidden" style="display: list-item;">
                <div class="favicon favicon-scifi" title="Science Fiction &amp; Fantasy Stack Exchange"></div><a href="https://scifi.stackexchange.com/questions/167240/why-would-arya-reveal-her-fighting-ability" class="js-gps-track" data-gps-track="site.switch({ item_type:11, target_site:186 }); posts_hot_network.click({ item_type:2, location:11 })">
                    Why would Arya reveal her fighting ability?
                </a>

            </li>
    </ul>

        
</div>
        </div>
    
<div id="feed-link">
    <div id="feed-link-text">
        <a href="https://stackoverflow.com/feeds/question/11227809" title="feed of this question and its answers">
            <span class="feed-icon"></span>question feed
        </a>
    </div>
</div>    </div>
<script>
StackExchange.ready(function(){$.get('/posts/11227809/ivc/7f31');});
</script>
<noscript>
    <div><img src="/posts/11227809/ivc/7f31" class="dno" alt="" width="0" height="0"></div>
</noscript><div style="display:none" id="prettify-lang">default</div></div>


        </div>
    </div><script async="" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/clc.js"></script><script async="" src="java%20-%20Why%20is%20it%20faster%20to%20process%20a%20sorted%20array%20than%20an%20unsorted%20array%3F%20-%20Stack%20Overflow_files/gpt.js"></script>

    <footer id="footer" class="s-footer js-footer" role="contentinfo">
        <div class="-container">
            <div class="g-row js-sp-between">
                    <div class="-logo">
                        <a href="https://stackoverflow.com/"><svg role="icon" class="svg-icon iconLogo" width="150" height="30" viewBox="0 0 150 30"><g><path d="M33.9 18.6l-1.7-.2c-1.3-.1-1.9-.6-1.9-1.6 0-1.1.8-1.8 2.4-1.8 1.1 0 2.1.3 2.8.8l1-1c-1-.8-2.3-1.1-3.8-1.1-2.3 0-3.9 1.2-3.9 3.1 0 1.8 1.1 2.7 3.2 2.9l1.8.2c1.2.1 1.8.6 1.8 1.6 0 1.3-1.1 1.9-2.8 1.9-1.3 0-2.5-.3-3.3-1.2l-1 1c1.2 1.1 2.6 1.5 4.4 1.5 2.6 0 4.3-1.2 4.3-3.2-.2-2-1.5-2.7-3.3-2.9zm13.3-4.8c-1.7 0-2.8.3-3.7 1.5l1 1c.6-.9 1.3-1.2 2.7-1.2 1.9 0 2.7.8 2.7 2.3v1h-3.2c-2.4 0-3.7 1.2-3.7 3.1 0 .8.3 1.6.8 2.2.7.7 1.5 1 3 1 1.4 0 2.2-.3 3.1-1.1v1h1.6v-7.2c-.1-2.4-1.5-3.6-4.3-3.6zm2.7 7c0 .9-.2 1.5-.5 1.8-.7.6-1.5.7-2.4.7-1.7 0-2.4-.6-2.4-1.8 0-1.2.8-1.9 2.4-1.9h3l-.1 1.2zm7.6-5.6c1 0 1.6.3 2.4 1.2l1-1c-1.1-1.2-2-1.6-3.5-1.6-2.7 0-4.7 1.8-4.7 5.5 0 3.6 2 5.5 4.7 5.5 1.5 0 2.4-.4 3.5-1.6l-1.1-1c-.8.9-1.4 1.2-2.4 1.2s-1.9-.4-2.5-1.2c-.5-.7-.7-1.5-.7-2.9 0-1.3.2-2.2.7-2.9.7-.8 1.6-1.2 2.6-1.2zm13.4-1.3H69l-4.8 4.7V9.1h-1.6v15.4h1.6v-3.9l1.9-1.9 3.6 5.8h1.9l-4.4-6.9 3.7-3.7zm7.3-.33c-1.6 0-2.7.6-3.4 1.4-1 1-1.3 2.3-1.3 4.3s.3 3.3 1.3 4.3c.7.7 1.8 1.4 3.4 1.4 1.6 0 2.8-.6 3.4-1.4 1-1 1.3-2.3 1.3-4.3s-.3-3.3-1.3-4.3c-.6-.8-1.7-1.4-3.4-1.4zm1.3 8.3c-.3.3-.7.5-1.3.5-.6 0-1-.2-1.3-.5-.6-.6-.6-1.6-.6-2.7 0-1.2.1-2.1.6-2.7.3-.3.7-.5 1.3-.5.6 0 1 .2 1.3.5.6.6.6 1.5.6 2.7.1 1.2 0 2.2-.6 2.7zm10.8-8.2l-2.2 6.9-2.3-6.9h-2.9l4.1 11.1h2.2l4.1-11.1h-3zm7.6-.1c-2.9 0-4.8 2-4.8 5.7 0 4.5 2.5 5.7 5.1 5.7 2 0 3.1-.6 4.2-1.7l-1.7-1.6c-.7.7-1.3 1-2.5 1-1.6 0-2.4-1-2.4-2.5h6.9v-1.2c0-3.2-1.7-5.4-4.8-5.4zm-2.1 4.6c0-.5.1-.8.3-1.2.3-.7.9-1.2 1.9-1.2.9 0 1.6.5 1.9 1.2.2.4.2.7.3 1.2h-4.4zm11-3.4v-1.1h-2.7v11.1h2.8v-6.7c0-1.4.9-2 1.8-2 .7 0 1 .2 1.5.7l2.1-2.1c-.8-.8-1.5-1-2.6-1-1.3-.1-2.3.4-2.9 1.1zm6.3-2.3v12.3h2.8v-8.8h2v-2.1h-2v-1.2c0-.6.3-1 1-1h1.1v-2.3h-1.6c-2.3 0-3.3 1.6-3.3 3.1zm16.2 1.1c-1.6 0-2.7.6-3.4 1.4-1 1-1.3 2.3-1.3 4.3s.3 3.3 1.3 4.3c.7.7 1.8 1.4 3.4 1.4 1.6 0 2.8-.6 3.4-1.4 1-1 1.3-2.3 1.3-4.3s-.3-3.3-1.3-4.3c-.6-.8-1.8-1.4-3.4-1.4zm1.3 8.3c-.3.3-.7.5-1.3.5-.6 0-1-.2-1.3-.5-.6-.6-.6-1.6-.6-2.7 0-1.2.1-2.1.6-2.7.3-.3.7-.5 1.3-.5.6 0 1 .2 1.3.5.6.6.6 1.5.6 2.7 0 1.2 0 2.2-.6 2.7zm16.5-8.2l-1.8 6.9-2.3-6.9h-2l-2.3 6.9-1.8-6.9H134l3.4 11.1h2.3l2.3-7 2.3 7h2.3l3.4-11.1h-2.9zm-25.1 7.7V9.27h-2.8v12.3c0 1.6 1 3.2 3.2 3.2h1.6v-2.3h-1c-.7 0-1-.4-1-1.1zM41.3 15.6l1.4-1.4h-3v-3.5h-1.6v11.1c0 1.6.9 2.9 2.7 2.9h1.1v-1.3h-.8c-1 0-1.5-.6-1.5-1.6v-6.1h1.7v-.1z" fill="#222426"></path><path fill="#BCBBBB" d="M21 27v-8h3v11H0V19h3v8z"></path><path d="M5.4 19.1l13.56 1.96.17-2.38-13.26-2.55-.47 2.97zm1.8-6.8l12 5.6 1.1-2.4-12-5.6-1.1 2.4zm3.4-5.9l10.2 8.5 1.7-2-10.2-8.5-1.7 2zM17.1.2L15 1.8l7.9 10.6 2.1-1.6L17.1.2zM5 25h14v-3H5v3z" fill="#F48024"></path></g></svg></a>
                    </div>
                
                    <nav class="-nav js-category _visible" data-name="default">
                        <h5 class="-title"><a href="https://stackoverflow.com/" class="js-gps-track" data-gps-track="footer.click({ location: 2, link: 15})">Stack Overflow</a></h5>
                        <ul class="-list">
                            <li class="-item"><a href="https://stackoverflow.com/questions" class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 16})">Questions</a></li>
                                <li class="-item"><a href="https://stackoverflow.com/jobs" class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 17})">Jobs</a></li>
                                <li class="-item"><a href="https://stackoverflow.com/jobs/directory/developer-jobs" class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 11})">Developer Jobs Directory</a></li>
                                                            <li class="-item"><a href="https://stackoverflow.com/documentation" class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 18})">Documentation</a></li>
                            <li class="-item"><a href="https://stackoverflow.com/help" class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 3 })">Help</a></li>
                            <li class="-item"><a onclick='StackExchange.switchMobile("on")' class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 12 })">Mobile</a></li>
                        </ul>
                    </nav>
                    <nav class="-nav js-category _visible" data-name="default">
                        <h5 class="-title"><a href="https://www.stackoverflowbusiness.com/?utm_source=so-footer&amp;utm_medium=referral&amp;utm_campaign=brand-activation" class="js-gps-track" data-gps-track="footer.click({ location: 2, link: 19 })">Stack Overflow<br> Business</a></h5>
                        <ul class="-list">
                            <li class="-item"><a href="https://www.stackoverflowbusiness.com/talent?utm_source=so-footer&amp;utm_medium=referral&amp;utm_campaign=brand-activation" class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 20 })">Talent</a></li>
                            <li class="-item"><a href="https://www.stackoverflowbusiness.com/advertise?utm_source=so-footer&amp;utm_medium=referral&amp;utm_campaign=brand-activation" class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 21 })">Ads</a></li>
                            <li class="-item"><a href="https://www.stackoverflowbusiness.com/enterprise?utm_source=so-footer&amp;utm_medium=referral&amp;utm_campaign=brand-activation" class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 22 })">Enterprise</a></li>
                            <li class="-item"><a href="https://www.stackoverflowbusiness.com/insights?utm_source=so-footer&amp;utm_medium=referral&amp;utm_campaign=brand-activation" class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 23 })">Insights</a></li>
                        </ul>
                    </nav>
                <nav class="-nav js-category _visible" data-name="default">
                    <h5 class="-title"><a class="js-gps-track" data-gps-track="footer.click({ location: 2, link: 1 })" href="https://stackoverflow.com/company/about">Company</a></h5>
                    <ul class="-list">
                            <li class="-item"><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 1 })" href="https://stackoverflow.com/company/about">About</a></li>
                                                <li class="-item"><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 27 })" href="https://stackoverflow.com/company/press">Press</a></li>
                            <li class="-item"><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 9 })" href="https://stackoverflow.com/company/work-here">Work Here</a></li>
                        <li class="-item"><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 7 })" href="https://stackexchange.com/legal">Legal</a></li>
                        <li class="-item"><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 8 })" href="https://stackexchange.com/legal/privacy-policy">Privacy Policy</a></li>
                            <li class="-item"><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link: 13 })" href="https://stackoverflow.com/company/contact">Contact Us</a></li>
                    </ul>
                </nav>
                <div class="-network g-row">
                    <a href="#" class="-back-trigger js-back"><svg role="icon" class="svg-icon iconArrowLeftAlt" width="18" height="18" viewBox="0 0 18 18"><path d="M10.58 16L12 14.59 6.4 9 12 3.41 10.57 2l-7 7z"></path></svg></a>
                    <div>
                        <h5 class="-title"><a href="https://stackexchange.com/">Stack Exchange<br> Network</a></h5>
                        <ul class="-list">
                            <li class="-item"><a href="#" class="-link _expandable js-category-trigger js-gps-track" data-gps-track="footer.click({ location: 2, link: 24 })" data-target="Technology">Technology</a></li>
                            <li class="-item"><a href="#" class="-link _expandable js-category-trigger js-gps-track" data-gps-track="footer.click({ location: 2, link: 24 })" data-target="Life / Arts">Life / Arts</a></li>
                            <li class="-item"><a href="#" class="-link _expandable js-category-trigger js-gps-track" data-gps-track="footer.click({ location: 2, link: 24 })" data-target="Culture / Recreation">Culture / Recreation</a></li>
                            <li class="-item"><a href="#" class="-link _expandable js-category-trigger js-gps-track" data-gps-track="footer.click({ location: 2, link: 24 })" data-target="Science">Science</a></li>
                            <li class="-item"><a href="#" class="-link _expandable js-category-trigger js-gps-track" data-gps-track="footer.click({ location: 2, link: 24 })" data-target="Other">Other</a></li>

                        </ul>
                    </div>
                </div>
                <nav class="-nav js-category" data-name="Technology">
        <ul class="-list">
                <li class="-item"><a href="https://stackoverflow.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="professional and enthusiast programmers">Stack Overflow</a></li>
                <li class="-item"><a href="https://serverfault.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="system and network administrators">Server Fault</a></li>
                <li class="-item"><a href="https://superuser.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="computer enthusiasts and power users">Super User</a></li>
                <li class="-item"><a href="https://webapps.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="power users of web applications">Web Applications</a></li>
                <li class="-item"><a href="https://askubuntu.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="Ubuntu users and developers">Ask Ubuntu</a></li>
                <li class="-item"><a href="https://webmasters.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="pro webmasters">Webmasters</a></li>
                <li class="-item"><a href="https://gamedev.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="professional and independent game developers">Game Development</a></li>
                    </ul></nav><nav class="-nav js-category" data-name="Technology"><ul class="-list">
                <li class="-item"><a href="https://tex.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="users of TeX, LaTeX, ConTeXt, and related typesetting systems">TeX - LaTeX</a></li>
                <li class="-item"><a href="https://softwareengineering.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="professionals, academics, and students working within the systems development life cycle">Software Engineering</a></li>
                <li class="-item"><a href="https://unix.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="users of Linux, FreeBSD and other Un*x-like operating systems">Unix &amp; Linux</a></li>
                <li class="-item"><a href="https://apple.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="power users of Apple hardware and software">Ask Different (Apple)</a></li>
                <li class="-item"><a href="https://wordpress.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="WordPress developers and administrators">WordPress Development</a></li>
                <li class="-item"><a href="https://gis.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="cartographers, geographers and GIS professionals">Geographic Information Systems</a></li>
                <li class="-item"><a href="https://electronics.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="electronics and electrical engineering professionals, students, and enthusiasts">Electrical Engineering</a></li>
                    </ul></nav><nav class="-nav js-category" data-name="Technology"><ul class="-list">
                <li class="-item"><a href="https://android.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="enthusiasts and power users of the Android operating system">Android Enthusiasts</a></li>
                <li class="-item"><a href="https://security.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="information security professionals">Information Security</a></li>
                <li class="-item"><a href="https://dba.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="database professionals who wish to improve their database skills and learn from others in the community">Database Administrators</a></li>
                <li class="-item"><a href="https://drupal.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="Drupal developers and administrators">Drupal Answers</a></li>
                <li class="-item"><a href="https://sharepoint.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="SharePoint enthusiasts">SharePoint</a></li>
                <li class="-item"><a href="https://ux.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="user experience researchers and experts">User Experience</a></li>
                <li class="-item"><a href="https://mathematica.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="users of Wolfram Mathematica">Mathematica</a></li>
                    </ul></nav><nav class="-nav js-category" data-name="Technology"><ul class="-list">
                <li class="-item"><a href="https://salesforce.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="Salesforce administrators, implementation experts, developers and anybody in-between">Salesforce</a></li>
                <li class="-item"><a href="https://expressionengine.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="administrators, end users, developers and designers for ExpressionEngine CMS">ExpressionEngine Answers</a></li>
                <li class="-item"><a href="https://blender.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="people who use Blender to create 3D graphics, animations, or games">Blender</a></li>
                <li class="-item"><a href="https://networkengineering.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="network engineers">Network Engineering</a></li>
                <li class="-item"><a href="https://crypto.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="software developers, mathematicians and others interested in cryptography">Cryptography</a></li>
                <li class="-item"><a href="https://codereview.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="peer programmer code reviews">Code Review</a></li>
                <li class="-item"><a href="https://magento.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="users of the Magento e-Commerce platform">Magento</a></li>
                    </ul></nav><nav class="-nav js-category" data-name="Technology"><ul class="-list">
                <li class="-item"><a href="https://softwarerecs.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="people seeking specific software recommendations">Software Recommendations</a></li>
                <li class="-item"><a href="https://dsp.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="practitioners of the art and science of signal, image and video processing">Signal Processing</a></li>
                <li class="-item"><a href="https://emacs.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="those using, extending or developing Emacs">Emacs</a></li>
                <li class="-item"><a href="https://raspberrypi.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="users and developers of hardware and software for Raspberry Pi">Raspberry Pi</a></li>
                <li class="-item"><a href="https://codegolf.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="programming puzzle enthusiasts and code golfers">Programming Puzzles &amp; Code Golf</a></li>
                <li class="-item"><a href="https://ethereum.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="users of Ethereum, the decentralized application platform and smart contract enabled blockchain">Ethereum</a></li>
                <li class="-item"><a href="https://datascience.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="Data science professionals, Machine Learning specialists, and those interested in learning more about the field">Data Science</a></li>
                    </ul></nav><nav class="-nav js-category" data-name="Technology"><ul class="-list">
                <li class="-item"><a href="https://arduino.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="developers of open-source hardware and software that is compatible with Arduino">Arduino</a></li>
                            <li class="-item">
                    <a href="https://stackexchange.com/sites#technology" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 26 })">
                        <strong>
                            more (26)
                        </strong>
                    </a>
                </li>
        </ul>
    </nav>
    <nav class="-nav js-category" data-name="Life / Arts">
        <ul class="-list">
                <li class="-item"><a href="https://photo.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="professional, enthusiast and amateur photographers">Photography</a></li>
                <li class="-item"><a href="https://scifi.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="science fiction and fantasy enthusiasts">Science Fiction &amp; Fantasy</a></li>
                <li class="-item"><a href="https://graphicdesign.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="Graphic Design professionals, students, and enthusiasts">Graphic Design</a></li>
                <li class="-item"><a href="https://movies.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="movie and tv enthusiasts">Movies &amp; TV</a></li>
                <li class="-item"><a href="https://music.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="musicians, students, and enthusiasts">Music: Practice &amp; Theory</a></li>
                <li class="-item"><a href="https://worldbuilding.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="writers/artists using science, geography and culture to construct imaginary worlds and settings">Worldbuilding</a></li>
                <li class="-item"><a href="https://cooking.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="professional and amateur chefs">Seasoned Advice (cooking)</a></li>
                    </ul></nav><nav class="-nav js-category" data-name="Life / Arts"><ul class="-list">
                <li class="-item"><a href="https://diy.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="contractors and serious DIYers">Home Improvement</a></li>
                <li class="-item"><a href="https://money.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="people who want to be financially literate">Personal Finance &amp; Money</a></li>
                <li class="-item"><a href="https://academia.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="academics and those enrolled in higher education">Academia</a></li>
                <li class="-item"><a href="https://law.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="legal professionals, students, and others with experience or interest in law">Law</a></li>
                            <li class="-item">
                    <a href="https://stackexchange.com/sites#lifearts" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 26 })">
                        <strong>
                            more (17)
                        </strong>
                    </a>
                </li>
        </ul>
    </nav>
    <nav class="-nav js-category" data-name="Culture / Recreation">
        <ul class="-list">
                <li class="-item"><a href="https://english.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="linguists, etymologists, and serious English language enthusiasts">English Language &amp; Usage</a></li>
                <li class="-item"><a href="https://skeptics.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="scientific skepticism">Skeptics</a></li>
                <li class="-item"><a href="https://judaism.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="those who base their lives on Jewish law and tradition and anyone interested in learning more">Mi Yodeya (Judaism)</a></li>
                <li class="-item"><a href="https://travel.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="road warriors and seasoned travelers">Travel</a></li>
                <li class="-item"><a href="https://christianity.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="committed Christians, experts in Christianity and those interested in learning more">Christianity</a></li>
                <li class="-item"><a href="https://ell.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="speakers of other languages learning English">English Language Learners</a></li>
                <li class="-item"><a href="https://japanese.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="students, teachers, and linguists wanting to discuss the finer points of the Japanese language">Japanese Language</a></li>
                    </ul></nav><nav class="-nav js-category" data-name="Culture / Recreation"><ul class="-list">
                <li class="-item"><a href="https://gaming.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="passionate videogamers on all platforms">Arqade (gaming)</a></li>
                <li class="-item"><a href="https://bicycles.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="people who build and repair bicycles, people who train cycling, or commute on bicycles">Bicycles</a></li>
                <li class="-item"><a href="https://rpg.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="gamemasters and players of tabletop, paper-and-pencil role-playing games">Role-playing Games</a></li>
                <li class="-item"><a href="https://anime.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="anime and manga fans">Anime &amp; Manga</a></li>
                <li class="-item"><a href="https://puzzling.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="those who create, solve, and study puzzles">Puzzling</a></li>
                <li class="-item"><a href="https://mechanics.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="mechanics and DIY enthusiast owners of cars, trucks, and motorcycles">Motor Vehicle Maintenance &amp; Repair</a></li>
                            <li class="-item">
                    <a href="https://stackexchange.com/sites#culturerecreation" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 26 })">
                        <strong>
                            more (32)
                        </strong>
                    </a>
                </li>
        </ul>
    </nav>
    <nav class="-nav js-category" data-name="Science">
        <ul class="-list">
                <li class="-item"><a href="https://mathoverflow.net/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="professional mathematicians">MathOverflow</a></li>
                <li class="-item"><a href="https://math.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="people studying math at any level and professionals in related fields">Mathematics</a></li>
                <li class="-item"><a href="https://stats.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="people interested in statistics, machine learning, data analysis, data mining, and data visualization">Cross Validated (stats)</a></li>
                <li class="-item"><a href="https://cstheory.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="theoretical computer scientists and researchers in related fields">Theoretical Computer Science</a></li>
                <li class="-item"><a href="https://physics.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="active researchers, academics and students of physics">Physics</a></li>
                <li class="-item"><a href="https://chemistry.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="scientists, academics, teachers and students">Chemistry</a></li>
                <li class="-item"><a href="https://biology.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="biology researchers, academics, and students">Biology</a></li>
                    </ul></nav><nav class="-nav js-category" data-name="Science"><ul class="-list">
                <li class="-item"><a href="https://cs.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="students, researchers and practitioners of computer science">Computer Science</a></li>
                <li class="-item"><a href="https://philosophy.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="those interested in the study of the fundamental nature of knowledge, reality, and existence">Philosophy</a></li>
                            <li class="-item">
                    <a href="https://stackexchange.com/sites#science" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 26 })">
                        <strong>
                            more (10)
                        </strong>
                    </a>
                </li>
        </ul>
    </nav>
    <nav class="-nav js-category" data-name="Other">
        <ul class="-list">
                <li class="-item"><a href="https://meta.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="meta-discussion of the Stack Exchange family of Q&amp;A websites">Meta Stack Exchange</a></li>
                <li class="-item"><a href="https://stackapps.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="apps, scripts, and development with the Stack Exchange API">Stack Apps</a></li>
                <li class="-item"><a href="https://api.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="programmatic interaction with Stack Exchange sites">API</a></li>
                <li class="-item"><a href="https://data.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="querying Stack Exchange data using SQL">Data</a></li>
                <li class="-item"><a href="https://area51.stackexchange.com/" class="-link js-gps-track" data-gps-track="footer.click({ location: 2, link: 25 })" title="proposing new sites in the Stack Exchange network">Area 51</a></li>
                    </ul>
    </nav>
                <div class="-copyright text-right">
                    <div class="g-column jc-sp-between">
                        <ul class="-list">
                            <li class="-item"><a class="js-gps-track -link" data-gps-track="footer.click({ location: 2, link:4 })" href="https://stackoverflow.blog/?blb=1">Blog</a></li>
                            <li class="-item"><a href="https://www.facebook.com/officialstackoverflow/" class="-link">Facebook</a></li>
                            <li class="-item"><a href="https://twitter.com/stackoverflow" class="-link">Twitter</a></li>
                            <li class="-item"><a href="https://linkedin.com/company/stack-overflow" class="-link">LinkedIn</a></li>
                        </ul>

                        <div>
                            <p>
                                site design / logo  2017 Stack Exchange Inc; user contributions licensed under <a href="https://creativecommons.org/licenses/by-sa/3.0/" rel="license" class="-link">cc by-sa 3.0</a>
                                with <a href="https://stackoverflow.blog/2009/06/25/attribution-required/" rel="license" class="-link">attribution required</a>.
                                <span id="svnrev">rev 2017.8.17.26807</span>
                            </p>

                        </div>
                    </div>
                </div>
            </div>

                    </div>
    </footer>

    <noscript>
        <div id="noscript-warning">Stack Overflow works best with JavaScript enabled
            <img src="https://pixel.quantserve.com/pixel/p-c1rF4kxgLUzNc.gif" alt="" class="dno">
        </div>
    </noscript>
<script>var 
z=document.createElement("script");z.type="text/javascript",z.async=!0,z.src="https://static.adzerk.net/ados.js";var
 
s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script>
var ados = ados || {};
ados.run = ados.run || [];


ados.run.push(function () {
    setTimeout(function () { $("#adzerk-user-match").remove(); }, window.AUMIframeDone ? 0 : 2000);
    ados_setKeywords('java,c%2b%2b,performance,optimization,branch-prediction');; ados_load();
});   

</script>

    <script>
            (function(i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || 
function() { (i[r].q = i[r].q || []).push(arguments) }, i[r].l = 1 * new
 Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = 
g; m.parentNode.insertBefore(a, m);
            })(window, document, 'script', 
'https://www.google-analytics.com/analytics.js', 'ga');
                ga('create', 'UA-5620270-1');
                ga('create', 'UA-5620270-59', {name: 'pageData', 
sampleRate: 5 });
                ga('set', 'dimension2', 
'|java|c++|performance|optimization|branch-prediction|');
                ga('pageData.set', 'dimension2', 
'|java|c++|performance|optimization|branch-prediction|');
                ga('send', 'pageview');
                ga('pageData.send', 'pageview');
        var _qevents = _qevents || [],
            _comscore = _comscore || [];
        (function () {
            var ssl='https:'==document.location.protocol,
                s=document.getElementsByTagName('script')[0],
                qc=document.createElement('script');
                qc.async = true;
                qc.src = (ssl ? 'https://secure' : 'http://edge') + 
'.quantserve.com/quant.js';
                s.parentNode.insertBefore(qc, s);
                _qevents.push({ qacct: "p-c1rF4kxgLUzNc" });
                            var sc=document.createElement('script');
                sc.async=true;
                sc.src=(ssl?'https://sb':'http://b') + 
'.scorecardresearch.com/beacon.js';
                s.parentNode.insertBefore(sc, s);
                _comscore.push({ c1: "2", c2: "17440561" });
        })();

    </script>
        
    
            <script type="text/javascript">
                
                (function(appendChild) {
                    Node.prototype.appendChild = function() {
                        var parent = this;
                        var newNode = arguments[0];
                        if (parent.nodeName === 'HEAD'
                            && newNode
                            && newNode.nodeName === 'SCRIPT'
                            && newNode.src) {
                            
                            window.setTimeout(function() {
                                var result = 
newNode.src.match(/^https:\/\/maps\.googleapis\.com\/maps\/api\/place\/js\/(\w+)Service\./i)
 || [];
                                var service = result[1];
                                if (service) {
                                    if (service === 'Autocompletion') 
service =  2;
                                    else if (service === 'Place') 
service = 1;
                                    else service = 0;
                                    StackExchange.using('gps', 
function() {
                                        
StackExchange.gps.track('google_maps_places_api.call', { service: 
service });
                                    });
                                }
                            }, 0);
                        }
                        return appendChild.apply(this, arguments);
                    };
                })(Node.prototype.appendChild);
            </script>
    

</body></html>