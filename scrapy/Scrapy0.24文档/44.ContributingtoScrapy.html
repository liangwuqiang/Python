
<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="UTF-8">
</head><body>

    <div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<center><h3>ContributingtoScrapy</h3></center>
<div itemprop="articleBody">
<div class="section" id="contributing-to-scrapy">
<span id="topics-contributing"></span><h1>Contributing to Scrapy<a class="headerlink" href="#contributing-to-scrapy" title="永久链接至标题"></a></h1>
<div class="admonition important">
<p class="first admonition-title">重要</p>
<p class="last">Double check you are reading the most recent version of this document at
<a class="reference external" href="http://doc.scrapy.org/en/master/contributing.html">http://doc.scrapy.org/en/master/contributing.html</a></p>
</div>
<p>There are many ways to contribute to Scrapy. Here are some of them:</p>
<ul class="simple">
<li>Blog about Scrapy. Tell the world how you’re using Scrapy. This will help
newcomers with more examples and the Scrapy project to increase its
visibility.</li>
<li>Report bugs and request features in the <a class="reference external" href="https://github.com/scrapy/scrapy/issues">issue tracker</a>, trying to follow
the guidelines detailed in <a class="reference internal" href="#reporting-bugs">Reporting bugs</a> below.</li>
<li>Submit patches for new functionality and/or bug fixes. Please read
<a class="reference internal" href="#writing-patches">Writing patches</a> and <a class="reference internal" href="#submitting-patches">Submitting patches</a> below for details on how to
write and submit a patch.</li>
<li>Join the <a class="reference external" href="http://groups.google.com/group/scrapy-users">scrapy-users</a> mailing list and share your ideas on how to
improve Scrapy. We’re always open to suggestions.</li>
</ul>
<div class="section" id="reporting-bugs">
<h2>Reporting bugs<a class="headerlink" href="#reporting-bugs" title="永久链接至标题"></a></h2>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">Please report security issues <strong>only</strong> to
<a class="reference external" href="mailto:scrapy-security%40googlegroups.com">scrapy-security<span>@</span>googlegroups<span>.</span>com</a>. This is a private list only open to
trusted Scrapy developers, and its archives are not public.</p>
</div>
<p>Well-written bug reports are very helpful, so keep in mind the following
guidelines when reporting a new bug.</p>
<ul class="simple">
<li>check the <a class="reference internal" href="faq.html#faq"><span class="std std-ref">FAQ</span></a> first to see if your issue is addressed in a
well-known question</li>
<li>check the <a class="reference external" href="https://github.com/scrapy/scrapy/issues">open issues</a> to see if it has already been reported. If it has,
don’t dismiss the report but check the ticket history and comments, you may
find additional useful information to contribute.</li>
<li>search the <a class="reference external" href="http://groups.google.com/group/scrapy-users">scrapy-users</a> list to see if it has been discussed there, or
if you’re not sure if what you’re seeing is a bug. You can also ask in the
<cite>#scrapy</cite> IRC channel.</li>
<li>write complete, reproducible, specific bug reports. The smaller the test
case, the better. Remember that other developers won’t have your project to
reproduce the bug, so please include all relevant files required to reproduce
it.</li>
<li>include the output of <code class="docutils literal"><span class="pre">scrapy</span> <span class="pre">version</span> <span class="pre">-v</span></code> so developers working on your bug
know exactly which version and platform it occurred on, which is often very
helpful for reproducing it, or knowing if it was already fixed.</li>
</ul>
</div>
<div class="section" id="writing-patches">
<h2>Writing patches<a class="headerlink" href="#writing-patches" title="永久链接至标题"></a></h2>
<p>The better written a patch is, the higher chance that it’ll get accepted and
the sooner that will be merged.</p>
<p>Well-written patches should:</p>
<ul class="simple">
<li>contain the minimum amount of code required for the specific change. Small
patches are easier to review and merge. So, if you’re doing more than one
change (or bug fix), please consider submitting one patch per change. Do not
collapse multiple changes into a single patch. For big changes consider using
a patch queue.</li>
<li>pass all unit-tests. See <a class="reference internal" href="#running-tests">Running tests</a> below.</li>
<li>include one (or more) test cases that check the bug fixed or the new
functionality added. See <a class="reference internal" href="#writing-tests">Writing tests</a> below.</li>
<li>if you’re adding or changing a public (documented) API, please include
the documentation changes in the same patch.  See <a class="reference internal" href="#documentation-policies">Documentation policies</a>
below.</li>
</ul>
</div>
<div class="section" id="submitting-patches">
<h2>Submitting patches<a class="headerlink" href="#submitting-patches" title="永久链接至标题"></a></h2>
<p>The best way to submit a patch is to issue a <a class="reference external" href="http://help.github.com/send-pull-requests/">pull request</a> on Github,
optionally creating a new issue first.</p>
<p>Remember to explain what was fixed or the new functionality (what it is, why
it’s needed, etc). The more info you include, the easier will be for core
developers to understand and accept your patch.</p>
<p>You can also discuss the new functionality (or bug fix) before creating the
patch, but it’s always good to have a patch ready to illustrate your arguments
and show that you have put some additional thought into the subject. A good
starting point is to send a pull request on Github. It can be simple enough to
illustrate your idea, and leave documentation/tests for later, after the idea
has been validated and proven useful. Alternatively, you can send an email to
<a class="reference external" href="http://groups.google.com/group/scrapy-users">scrapy-users</a> to discuss your idea first.</p>
<p>Finally, try to keep aesthetic changes (<span class="target" id="index-0"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0008"><strong>PEP 8</strong></a> compliance, unused imports
removal, etc) in separate commits than functional changes. This will make pull
requests easier to review and more likely to get merged.</p>
</div>
<div class="section" id="coding-style">
<h2>Coding style<a class="headerlink" href="#coding-style" title="永久链接至标题"></a></h2>
<p>Please follow these coding conventions when writing code for inclusion in
Scrapy:</p>
<ul class="simple">
<li>Unless otherwise specified, follow <span class="target" id="index-1"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0008"><strong>PEP 8</strong></a>.</li>
<li>It’s OK to use lines longer than 80 chars if it improves the code
readability.</li>
<li>Don’t put your name in the code you contribute. Our policy is to keep
the contributor’s name in the <a class="reference external" href="https://github.com/scrapy/scrapy/blob/master/AUTHORS">AUTHORS</a> file distributed with Scrapy.</li>
</ul>
</div>
<div class="section" id="scrapy-contrib">
<h2>Scrapy Contrib<a class="headerlink" href="#scrapy-contrib" title="永久链接至标题"></a></h2>
<p>Scrapy contrib shares a similar rationale as Django contrib, which is explained
in <a class="reference external" href="http://jacobian.org/writing/what-is-django-contrib/">this post</a>. If you
are working on a new functionality, please follow that rationale to decide
whether it should be a Scrapy contrib. If unsure, you can ask in
<a class="reference external" href="http://groups.google.com/group/scrapy-users">scrapy-users</a>.</p>
</div>
<div class="section" id="documentation-policies">
<h2>Documentation policies<a class="headerlink" href="#documentation-policies" title="永久链接至标题"></a></h2>
<ul class="simple">
<li><strong>Don’t</strong> use docstrings for documenting classes, or methods which are
already documented in the official (sphinx) documentation. For example, the
<code class="xref py py-meth docutils literal"><span class="pre">ItemLoader.add_value()</span></code> method should be documented in the sphinx
documentation, not its docstring.</li>
<li><strong>Do</strong> use docstrings for documenting functions not present in the official
(sphinx) documentation, such as functions from <code class="docutils literal"><span class="pre">scrapy.utils</span></code> package and
its sub-modules.</li>
</ul>
</div>
<div class="section" id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="永久链接至标题"></a></h2>
<p>Tests are implemented using the <a class="reference external" href="http://twistedmatrix.com/documents/current/core/development/policy/test-standard.html">Twisted unit-testing framework</a> called
<code class="docutils literal"><span class="pre">trial</span></code>.</p>
<div class="section" id="running-tests">
<h3>Running tests<a class="headerlink" href="#running-tests" title="永久链接至标题"></a></h3>
<p>To run all tests go to the root directory of Scrapy source code and run:</p>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">bin/runtests.sh</span></code> (on unix)</p>
<p><code class="docutils literal"><span class="pre">bin\runtests.bat</span></code> (on windows)</p>
</div></blockquote>
<p>To run a specific test (say <code class="docutils literal"><span class="pre">scrapy.tests.test_contrib_loader</span></code>) use:</p>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">bin/runtests.sh</span> <span class="pre">scrapy.tests.test_contrib_loader</span></code> (on unix)</p>
<p><code class="docutils literal"><span class="pre">bin\runtests.bat</span> <span class="pre">scrapy.tests.test_contrib_loader</span></code> (on windows)</p>
</div></blockquote>
</div>
<div class="section" id="writing-tests">
<h3>Writing tests<a class="headerlink" href="#writing-tests" title="永久链接至标题"></a></h3>
<p>All functionality (including new features and bug fixes) must include a test
case to check that it works as expected, so please include tests for your
patches if you want them to get accepted sooner.</p>
<p>Scrapy uses unit-tests, which are located in the <code class="docutils literal"><span class="pre">scrapy.tests</span></code> package
(<a class="reference external" href="https://github.com/scrapy/scrapy/tree/master/scrapy/tests">scrapy/tests</a> directory). Their module name typically resembles the full
path of the module they’re testing. For example, the item loaders code is in:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">scrapy</span><span class="o">.</span><span class="n">contrib</span><span class="o">.</span><span class="n">loader</span>
</pre></div>
</div>
<p>And their unit-tests are in:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">scrapy</span><span class="o">.</span><span class="n">tests</span><span class="o">.</span><span class="n">test_contrib_loader</span>
</pre></div>
</div>
</div>
</div>
</div>
<h2>
            讨论
            <a class="headerlink" href="#discuss" title="永久链接至标题"></a>
</h2>
<div id="disqus_thread"></div>
</div>
<div class="articleComments">
</div>
</div>
    
</body></html>
